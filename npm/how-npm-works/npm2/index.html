
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>02 - Npm V2 - Npm - W3cubDocs</title>
  
  <meta name="description" content=" Imagine there are three modules&#58; A, B, and C. A requires B at v1.0, and C also requires B, but at v2.0. We can visualize this like so&#58; ">
  <meta name="keywords" content="npm, dependency, resolution, -">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/npm/how-npm-works/npm2/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/npm.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/npm/" class="_nav-link" title="" style="margin-left:0;">npm</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _npm">
				
<h1 id="npm-v2-dependency-resolution">npm v2 Dependency Resolution</h1> <h2 id="example---explore-on-github">Example - <a class="button" href="https://github.com/ashleygwilliams/npm-sandbox/tree/master/npm2/example1" target="_blank">Explore on Github</a>
</h2> <p>Imagine there are three modules: A, B, and C. A requires B at v1.0, and C also requires B, but at v2.0. We can visualize this like so:</p> <p><img src="https://docs.npmjs.com/images/how-npm-works/deps1.png" alt="2 modules need B"></p> <p>Now, let's create an application that requires both module A and module C.</p> <p><img src="https://docs.npmjs.com/images/how-npm-works/deps2.png" alt="My app needs both A and C"></p> <h2 id="dependency-hell">Dependency Hell</h2> <p>A package manager would need to provide a version of module B. In all other runtimes prior to Node.js, this is what a package manager would try to do. This is dependency hell:</p> <p><img src="https://docs.npmjs.com/images/how-npm-works/deps3.png" alt="Dependency Hell"></p> <p>Instead of attempting to resolve module B to a single version, npm puts both versions of module B into the tree, each version nested under the module that requires it.</p> <p><img src="https://docs.npmjs.com/images/how-npm-works/deps4.png" alt="what npm does"></p> <p>In the terminal, this looks like this:</p> <p><img src="https://docs.npmjs.com/images/how-npm-works/tree.png" alt="tree"></p> <p>You can list the dependencies and still see their relationships using <code>npm ls</code>:</p> <p><img src="https://docs.npmjs.com/images/how-npm-works/npmls.png" alt="npmls"></p> <p>If you want to just see your primary dependencies, you can use:</p> <div class="highlight "><pre class="editor editor-colors">npm ls --depth=0</pre></div> <p><img src="https://docs.npmjs.com/images/how-npm-works/npmlsdepth0.png" alt="npmlsdepth0"></p> <h2 id="npm-and-the-nodejs-module-loader">npm and the Node.js Module Loader</h2> <p>However, npm doing this is <em>not enough</em>. Despite the fact that their nested locations allow for the coexistence of two versions of the same module, most module loaders are unable to load two different versions of the same module into memory. Luckily, the Node.js module loader is written for exactly this situation, and can easily load both versions of the module in a way that they do not conflict with each other.</p> <p>How is it that npm and the node module loader are so wonderfully symbiotic? They were both written in large part by the same person, npm, Inc. CEO, Isaac Z. Schlueter. Like 2 sides of the same piece of paper, npm and the Node.js module loader are what make Node.js a uniquely well-suited runtime for dependency management.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © npm, Inc. and Contributors<br>Licensed under the npm License.<br>npm is a trademark of npm, Inc.<br>
    <a href="https://docs.npmjs.com/how-npm-works/npm2" class="_attribution-link" target="_blank">https://docs.npmjs.com/how-npm-works/npm2</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
