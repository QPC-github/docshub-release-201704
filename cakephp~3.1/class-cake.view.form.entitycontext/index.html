
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>EntityContext (Class) - CakePHP 3.1 - W3cubDocs</title>
  
  <meta name="description" content=" Provides a form context around a single entity and its relations. It also can be used as context around an array or iterator of entities. ">
  <meta name="keywords" content="class, entitycontext, -, cakephp, cakephp~3.1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/cakephp~3.1/class-cake.view.form.entitycontext/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/cakephp~3.1.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cakephp~3.1/" class="_nav-link" title="" style="margin-left:0;">CakePHP 3.1</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _cakephp">
				
<h1>Class EntityContext</h1>  <p>Provides a form context around a single entity and its relations. It also can be used as context around an array or iterator of entities.</p> <p>This class lets FormHelper interface with entities or collections of entities.</p> <p>Important Keys:</p> <ul> <li>
<code>entity</code> The entity this context is operating on.</li> <li>
<code>table</code> Either the ORM\Table instance to fetch schema/validators from, an array of table instances in the case of a form spanning multiple entities, or the name(s) of the table. If this is null the table name(s) will be determined using naming conventions.</li> <li>
<code>validator</code> Either the Validation\Validator to use, or the name of the validation method to call on the table object. For example 'default'. Defaults to 'default'. Can be an array of table alias=&gt;validators when dealing with associated forms.</li> </ul>  <dl class="tree"> <dd style="padding-left:0px"> <b><span>Cake\View\Form\EntityContext</span></b> implements <a href="../class-cake.view.form.contextinterface/"><span>Cake\View\Form\ContextInterface</span></a> </dd> </dl> <div class="info"> <b>Namespace:</b> <a href="../namespace-cake/">Cake</a>\<a href="../namespace-cake.view/">View</a>\<a href="../namespace-cake.view.form/">Form</a><br> <b>Located at</b> <a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#25-506" title="Go to source code" target="_blank">View/Form/EntityContext.php</a><br> </div>  <h2>Method Detail</h2> <div class="method-detail">   <h3 class="method-name" id="___construct"> <span class="name">__construct</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#84-100" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">__construct( Cake\Network\Request $request , array $context )</pre>  <p>Constructor.</p> <h4>Parameters</h4>  <dl> <dt> <code><a href="../class-cake.network.request/">Cake\Network\Request</a></code> <code>$request</code> </dt> <dd>The request object.</dd> <dt> array <code>$context</code> </dt> <dd>Context info.</dd> </dl>   </div> <div class="method-detail">   <h3 class="method-name" id="__extractMultiple"> <span class="name">_extractMultiple</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#231-247" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> protected </span>  </h3> <pre class="method-signature" data-language="php">_extractMultiple( array|Traversable $values , array $path )</pre>  <p>Helper method used to extract all the primary key values out of an array, The primary key column is guessed out of the provided $path array</p> <h4>Parameters</h4>  <dl> <dt> array|Traversable <code>$values</code> </dt> <dd>The list from which to extract primary keys from</dd> <dt> array <code>$path</code> </dt> <dd>Each one of the parts in a path for a field name</dd> </dl>  <h4>Returns</h4>  <code>array</code><br>array<br>   </div> <div class="method-detail">   <h3 class="method-name" id="__getProp"> <span class="name">_getProp</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#308-331" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> protected </span>  </h3> <pre class="method-signature" data-language="php">_getProp( mixed $target , string $field )</pre>  <p>Read property values or traverse arrays/iterators.</p> <h4>Parameters</h4>  <dl> <dt> mixed <code>$target</code> </dt> <dd>The entity/array/collection to fetch $field from.</dd> <dt> string <code>$field</code> </dt> <dd>The next field to fetch.</dd> </dl>  <h4>Returns</h4>  <code>mixed</code><br>mixed<br>   </div> <div class="method-detail">   <h3 class="method-name" id="__getTable"> <span class="name">_getTable</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#408-448" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> protected </span>  </h3> <pre class="method-signature" data-language="php">_getTable( array $parts , boolean $rootFallback true )</pre>  <p>Get the table instance from a property path</p> <h4>Parameters</h4>  <dl> <dt> array <code>$parts</code> </dt> <dd>Each one of the parts in a path for a field name</dd> <dt> boolean <code>$rootFallback</code> <span class="label">optional</span> <span class="php-keyword1">true</span> </dt> <dd>Whether or not to fallback to the root entity.</dd> </dl>  <h4>Returns</h4>  <code><a href="../class-cake.orm.table/">Cake\ORM\Table</a>|boolean</code><br>Table instance or false<br>   </div> <div class="method-detail">   <h3 class="method-name" id="__getValidator"> <span class="name">_getValidator</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#373-406" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> protected </span>  </h3> <pre class="method-signature" data-language="php">_getValidator( array $parts )</pre>  <p>Get the validator associated to an entity based on naming conventions.</p> <h4>Parameters</h4>  <dl> <dt> array <code>$parts</code> </dt> <dd>Each one of the parts in a path for a field name</dd> </dl>  <h4>Returns</h4>  <code><a href="../class-cake.validation.validator/">Cake\Validation\Validator</a></code><br>\Cake\Validation\Validator<br>   </div> <div class="method-detail">   <h3 class="method-name" id="__prepare"> <span class="name">_prepare</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#102-150" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> protected </span>  </h3> <pre class="method-signature" data-language="php">_prepare( )</pre>  <p>Prepare some additional data from the context.</p> <p>If the table option was provided to the constructor and it was a string, ORM\TableRegistry will be used to get the correct table instance.</p> <p>If an object is provided as the table option, it will be used as is.</p> <p>If no table option is provided, the table name will be derived based on naming conventions. This inference will work with a number of common objects like arrays, Collection objects and ResultSets.</p> <h4>Throws</h4>  <code>RuntimeException</code><br>When a table object cannot be located/inferred.<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_attributes"> <span class="name">attributes</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#464-477" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">attributes( string $field )</pre>  <p>Get an associative array of other attributes for a field name.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$field</code> </dt> <dd>A dot separated path to get additional data on.</dd> </dl>  <h4>Returns</h4>  <code>array</code><br>An array of data describing the additional attributes on a field.<br>  <h4>Implementation of</h4> <code><a href="../class-cake.view.form.contextinterface/#_attributes">Cake\View\Form\ContextInterface::attributes()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_entity"> <span class="name">entity</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#249-306" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">entity( array|null $path null )</pre>  <p>Fetch the leaf entity for the given path.</p> <p>This method will traverse the given path and find the leaf entity. If the path does not contain a leaf entity false will be returned.</p> <h4>Parameters</h4>  <dl> <dt> array|null <code>$path</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>Each one of the parts in a path for a field name or null to get the entity passed in contructor context.</dd> </dl>  <h4>Returns</h4>  <code><a href="../class-cake.datasource.entityinterface/">Cake\Datasource\EntityInterface</a>|Traversable|array|boolean</code><br>\Cake\Datasource\EntityInterface|\Traversable|array|bool<br>  <h4>Throws</h4>  <code>RuntimeException</code><br>When properties cannot be read.<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_error"> <span class="name">error</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#490-505" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">error( string $field )</pre>  <p>Get the errors for a given field</p> <h4>Parameters</h4>  <dl> <dt> string <code>$field</code> </dt> <dd>A dot separated path to check errors on.</dd> </dl>  <h4>Returns</h4>  <code>array</code><br>An array of errors.<br>  <h4>Implementation of</h4> <code><a href="../class-cake.view.form.contextinterface/#_error">Cake\View\Form\ContextInterface::error()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_fieldNames"> <span class="name">fieldNames</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#360-371" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">fieldNames( )</pre>  <p>Get the field names from the top level entity.</p> <p>If the context is for an array of entities, the 0th index will be used.</p> <h4>Returns</h4>  <code>array</code><br>Array of fieldnames in the table/entity.<br>  <h4>Implementation of</h4> <code><a href="../class-cake.view.form.contextinterface/#_fieldNames">Cake\View\Form\ContextInterface::fieldNames()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_hasError"> <span class="name">hasError</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#479-488" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">hasError( string $field )</pre>  <p>Check whether or not a field has an error attached to it</p> <h4>Parameters</h4>  <dl> <dt> string <code>$field</code> </dt> <dd>A dot separated path to check errors on.</dd> </dl>  <h4>Returns</h4>  <code>boolean</code><br>Returns true if the errors for the field are not empty.<br>  <h4>Implementation of</h4> <code><a href="../class-cake.view.form.contextinterface/#_hasError">Cake\View\Form\ContextInterface::hasError()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_isCreate"> <span class="name">isCreate</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#175-196" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">isCreate( )</pre>  <p>Check whether or not this form is a create or update.</p> <p>If the context is for a single entity, the entity's isNew() method will be used. If isNew() returns null, a create operation will be assumed.</p> <p>If the context is for a collection or array the first object in the collection will be used.</p> <h4>Returns</h4>  <code>boolean</code><br>bool<br>  <h4>Implementation of</h4> <code><a href="../class-cake.view.form.contextinterface/#_isCreate">Cake\View\Form\ContextInterface::isCreate()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_isPrimaryKey"> <span class="name">isPrimaryKey</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#164-173" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">isPrimaryKey( string $field )</pre>  <p>Returns true if the passed field name is part of the primary key for this context</p> <h4>Parameters</h4>  <dl> <dt> string <code>$field</code> </dt> <dd>A dot separated path to the field a value is needed for.</dd> </dl>  <h4>Returns</h4>  <code>boolean</code><br>bool<br>  <h4>Implementation of</h4> <code><a href="../class-cake.view.form.contextinterface/#_isPrimaryKey">Cake\View\Form\ContextInterface::isPrimaryKey()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_isRequired"> <span class="name">isRequired</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#333-358" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">isRequired( string $field )</pre>  <p>Check if a field should be marked as required.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$field</code> </dt> <dd>The dot separated path to the field you want to check.</dd> </dl>  <h4>Returns</h4>  <code>boolean</code><br>bool<br>  <h4>Implementation of</h4> <code><a href="../class-cake.view.form.contextinterface/#_isRequired">Cake\View\Form\ContextInterface::isRequired()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_primaryKey"> <span class="name">primaryKey</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#152-162" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">primaryKey( )</pre>  <p>Get the primary key data for the context.</p> <p>Gets the primary key columns from the root entity's schema.</p> <h4>Returns</h4>  <code>boolean</code><br>bool<br>  <h4>Implementation of</h4> <code><a href="../class-cake.view.form.contextinterface/#_primaryKey">Cake\View\Form\ContextInterface::primaryKey()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_type"> <span class="name">type</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#450-462" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">type( string $field )</pre>  <p>Get the abstract field type for a given field name.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$field</code> </dt> <dd>A dot separated path to get a schema type for.</dd> </dl>  <h4>Returns</h4>  <code>null|string</code><br>An abstract data type or null.<br>  <h4>See</h4>  <code><a href="../class-cake.database.type/">Cake\Database\Type</a></code><br>  <h4>Implementation of</h4> <code><a href="../class-cake.view.form.contextinterface/#_type">Cake\View\Form\ContextInterface::type()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_val"> <span class="name">val</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#198-229" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">val( string $field )</pre>  <p>Get the value for a given path.</p> <p>Traverses the entity data and finds the value for $path.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$field</code> </dt> <dd>The dot separated path to the value.</dd> </dl>  <h4>Returns</h4>  <code>mixed</code><br>The value of the field or null on a miss.<br>  <h4>Implementation of</h4> <code><a href="../class-cake.view.form.contextinterface/#_val">Cake\View\Form\ContextInterface::val()</a></code>  </div>   <h2>Properties summary</h2> <table class="summary properties" id="properties"> <div class="property-detail"> <h3 class="property-name" id="$_context"> <span class="name">$_context</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#55-60" title="Go to source code" class="source" target="_blank">source</a>  </h3> <p class="attributes"> <span class="label">protected</span> array </p>  <p>Context data for this object.</p>  </div> <div class="property-detail"> <h3 class="property-name" id="$_isCollection"> <span class="name">$_isCollection</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#69-75" title="Go to source code" class="source" target="_blank">source</a>  </h3> <p class="attributes"> <span class="label">protected</span> boolean </p>  <p>Boolean to track whether or not the entity is a collection.</p> <div class="default-value"> <pre><span class="php-keyword1">false</span></pre> </div>  </div> <div class="property-detail"> <h3 class="property-name" id="$_request"> <span class="name">$_request</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#48-53" title="Go to source code" class="source" target="_blank">source</a>  </h3> <p class="attributes"> <span class="label">protected</span> <code><a href="../class-cake.network.request/">Cake\Network\Request</a></code> </p>  <p>The request object.</p>  </div> <div class="property-detail"> <h3 class="property-name" id="$_rootName"> <span class="name">$_rootName</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#62-67" title="Go to source code" class="source" target="_blank">source</a>  </h3> <p class="attributes"> <span class="label">protected</span> string </p>  <p>The name of the top level entity/table object.</p>  </div> <div class="property-detail"> <h3 class="property-name" id="$_tables"> <span class="name">$_tables</span><a href="http://api.cakephp.org/3.1/source-class-Cake.View.Form.EntityContext.html#77-82" title="Go to source code" class="source" target="_blank">source</a>  </h3> <p class="attributes"> <span class="label">protected</span> array </p>  <p>A dictionary of tables</p> <div class="default-value"> <pre>[]</pre> </div>  </div> </table>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2016 The Cake Software Foundation, Inc.<br>Licensed under the MIT License.<br>CakePHP is a registered trademark of Cake Software Foundation, Inc.<br>We are not endorsed by or affiliated with CakePHP.<br>
    <a href="http://api.cakephp.org/3.1/class-Cake.View.Form.EntityContext.html" class="_attribution-link" target="_blank">http://api.cakephp.org/3.1/class-Cake.View.Form.EntityContext.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
