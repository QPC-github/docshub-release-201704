
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>CallbackStatement (Class) - CakePHP 3.1 - W3cubDocs</title>
  
  <meta name="description" content=" Wraps a statement in a callback that allows row results to be modified when being fetched. ">
  <meta name="keywords" content="class, callbackstatement, -, cakephp, cakephp~3.1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/cakephp~3.1/class-cake.database.statement.callbackstatement/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/cakephp~3.1.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cakephp~3.1/" class="_nav-link" title="" style="margin-left:0;">CakePHP 3.1</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _cakephp">
				
<h1>Class CallbackStatement</h1>  <p>Wraps a statement in a callback that allows row results to be modified when being fetched.</p> <p>This is used by CakePHP to eagerly load association data.</p>  <dl class="tree"> <dd style="padding-left:0px"> <a href="../class-cake.database.statement.statementdecorator/"><span>Cake\Database\Statement\StatementDecorator</span></a> implements <a href="../class-cake.database.statementinterface/"><span>Cake\Database\StatementInterface</span></a>, <span>Countable</span>, <span>IteratorAggregate</span> uses <a href="../class-cake.database.typeconvertertrait/"><span>Cake\Database\TypeConverterTrait</span></a> </dd> <dd style="padding-left:30px"> <img src="http://api.cakephp.org/3.1/resources/inherit.png" alt="Extended by"> <b><span>Cake\Database\Statement\CallbackStatement</span></b> </dd> </dl> <div class="info"> <b>Namespace:</b> <a href="../namespace-cake/">Cake</a>\<a href="../namespace-cake.database/">Database</a>\<a href="../namespace-cake.database.statement/">Statement</a><br> <b>Located at</b> <a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.CallbackStatement.html#17-73" title="Go to source code" target="_blank">Database/Statement/CallbackStatement.php</a><br> </div>  <h2>Method Detail</h2> <div class="method-detail">   <h3 class="method-name" id="___construct"> <span class="name">__construct</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.CallbackStatement.html#33-44" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">__construct( Cake\Database\StatementInterface $statement , Cake\Database\Driver $driver , callable $callback )</pre>  <p>Constructor</p> <h4>Parameters</h4>  <dl> <dt> <code><a href="../class-cake.database.statementinterface/">Cake\Database\StatementInterface</a></code> <code>$statement</code> </dt> <dd>The statement to decorate.</dd> <dt> <code><a href="../class-cake.database.driver/">Cake\Database\Driver</a></code> <code>$driver</code> </dt> <dd>The driver instance used by the statement.</dd> <dt> callable <code>$callback</code> </dt> <dd>The callback to apply to results before they are returned.</dd> </dl>  <h4>Overrides</h4> <code><a href="../class-cake.database.statement.statementdecorator/#___construct">Cake\Database\Statement\StatementDecorator::__construct()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_fetch"> <span class="name">fetch</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.CallbackStatement.html#46-59" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">fetch( string $type 'num' )</pre>  <p>Fetch a row from the statement.</p> <p>The result will be processed by the callback when it is not <code>false</code>.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$type</code> <span class="label">optional</span> <span class="php-quote">'num'</span> </dt> <dd>Either 'num' or 'assoc' to indicate the result format you would like.</dd> </dl>  <h4>Returns</h4>  <code>array|false</code><br>array|false<br>  <h4>Overrides</h4> <code><a href="../class-cake.database.statement.statementdecorator/#_fetch">Cake\Database\Statement\StatementDecorator::fetch()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_fetchAll"> <span class="name">fetchAll</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.CallbackStatement.html#61-72" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">fetchAll( string $type 'num' )</pre>  <p>Fetch all rows from the statement.</p> <p>Each row in the result will be processed by the callback when it is not `false.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$type</code> <span class="label">optional</span> <span class="php-quote">'num'</span> </dt> <dd>Either 'num' or 'assoc' to indicate the result format you would like.</dd> </dl>  <h4>Returns</h4>  <code>array</code><br>array<br>  <h4>Overrides</h4> <code><a href="../class-cake.database.statement.statementdecorator/#_fetchAll">Cake\Database\Statement\StatementDecorator::fetchAll()</a></code>  </div>   <h2>Methods inherited from <a href="../class-cake.database.statement.statementdecorator/#methods">Cake\Database\Statement\StatementDecorator</a>
</h2> <div class="method-detail">   <h3 class="method-name" id="___get"> <span class="name">__get</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.StatementDecorator.html#70-81" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">__get( string $property )</pre>  <p>Magic getter to return $queryString as read-only.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$property</code> </dt> <dd>internal property to get</dd> </dl>  <h4>Returns</h4>  <code>mixed</code><br>mixed<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_bind"> <span class="name">bind</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.StatementDecorator.html#267-292" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">bind( array $params , array $types )</pre>  <p>Binds a set of values to statement object with corresponding type.</p> <h4>Parameters</h4>  <dl> <dt> array <code>$params</code> </dt> <dd>list of values to be bound</dd> <dt> array <code>$types</code> </dt> <dd>list of types to be used, keys should match those in $params</dd> </dl>  <h4>Implementation of</h4> <code><a href="../class-cake.database.statementinterface/#_bind">Cake\Database\StatementInterface::bind()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_bindValue"> <span class="name">bindValue</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.StatementDecorator.html#83-106" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">bindValue( string|integer $column , mixed $value , string $type 'string' )</pre>  <p>Assign a value to a positional or named variable in prepared query. If using positional variables you need to start with index one, if using named params then just use the name in any order.</p> <p>It is not allowed to combine positional and named variables in the same statement.</p> <h2>Examples:</h2> <pre>
<span class="php-var">$statement</span>-&gt;bindValue(<span class="php-num">1</span>, <span class="php-quote">'a title'</span>);
<span class="php-var">$statement</span>-&gt;bindValue(<span class="php-quote">'active'</span>, <span class="php-keyword1">true</span>, <span class="php-quote">'boolean'</span>);
<span class="php-var">$statement</span>-&gt;bindValue(<span class="php-num">5</span>, <span class="php-keyword1">new</span> \DateTime(), <span class="php-quote">'date'</span>);
</pre> <h4>Parameters</h4>  <dl> <dt> string|integer <code>$column</code> </dt> <dd>name or param position to be bound</dd> <dt> mixed <code>$value</code> </dt> <dd>The value to bind to variable in query</dd> <dt> string <code>$type</code> <span class="label">optional</span> <span class="php-quote">'string'</span> </dt> <dd>name of configured Type class</dd> </dl>  <h4>Implementation of</h4> <code><a href="../class-cake.database.statementinterface/#_bindValue">Cake\Database\StatementInterface::bindValue()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_closeCursor"> <span class="name">closeCursor</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.StatementDecorator.html#108-118" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">closeCursor( )</pre>  <p>Closes a cursor in the database, freeing up any resources and memory allocated to it. In most cases you don't need to call this method, as it is automatically called after fetching all results from the result set.</p> <h4>Implementation of</h4> <code><a href="../class-cake.database.statementinterface/#_closeCursor">Cake\Database\StatementInterface::closeCursor()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_columnCount"> <span class="name">columnCount</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.StatementDecorator.html#120-136" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">columnCount( )</pre>  <p>Returns the number of columns this statement's results will contain.</p> <h2>Example:</h2> <pre>
<span class="php-var">$statement</span> = <span class="php-var">$connection</span>-&gt;prepare(<span class="php-quote">'SELECT id, title from articles'</span>);
<span class="php-var">$statement</span>-&gt;execute();
<span class="php-keyword1">echo</span> <span class="php-var">$statement</span>-&gt;columnCount(); <span class="php-comment">// outputs 2</span>
</pre> <h4>Returns</h4>  <code>integer</code><br>int<br>  <h4>Implementation of</h4> <code><a href="../class-cake.database.statementinterface/#_columnCount">Cake\Database\StatementInterface::columnCount()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_count"> <span class="name">count</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.StatementDecorator.html#256-265" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">count( )</pre>  <p>Statements can be passed as argument for count() to return the number for affected rows from last execution.</p> <h4>Returns</h4>  <code>integer</code><br>int<br>  <h4>Implementation of</h4> <code><a href="../class-cake.database.statementinterface/#_count">Cake\Database\StatementInterface::count()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_errorCode"> <span class="name">errorCode</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.StatementDecorator.html#138-146" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">errorCode( )</pre>  <p>Returns the error code for the last error that occurred when executing this statement.</p> <h4>Returns</h4>  <code>integer|string</code><br>int|string<br>  <h4>Implementation of</h4> <code><a href="../class-cake.database.statementinterface/#_errorCode">Cake\Database\StatementInterface::errorCode()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_errorInfo"> <span class="name">errorInfo</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.StatementDecorator.html#148-157" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">errorInfo( )</pre>  <p>Returns the error information for the last error that occurred when executing this statement.</p> <h4>Returns</h4>  <code>array</code><br>array<br>  <h4>Implementation of</h4> <code><a href="../class-cake.database.statementinterface/#_errorInfo">Cake\Database\StatementInterface::errorInfo()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_execute"> <span class="name">execute</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.StatementDecorator.html#159-172" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">execute( array|null $params null )</pre>  <p>Executes the statement by sending the SQL query to the database. It can optionally take an array or arguments to be bound to the query variables. Please note that binding parameters from this method will not perform any custom type conversion as it would normally happen when calling <code>bindValue</code>.</p> <h4>Parameters</h4>  <dl> <dt> array|null <code>$params</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>list of values to be bound to query</dd> </dl>  <h4>Returns</h4>  <code>boolean</code><br>true on success, false otherwise<br>  <h4>Implementation of</h4> <code><a href="../class-cake.database.statementinterface/#_execute">Cake\Database\StatementInterface::execute()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_getInnerStatement"> <span class="name">getInnerStatement</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.StatementDecorator.html#313-321" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">getInnerStatement( )</pre>  <p>Returns the statement object that was decorated by this class.</p> <h4>Returns</h4>  <code><a href="../class-cake.database.statementinterface/">Cake\Database\StatementInterface</a></code><br>\Cake\Database\StatementInterface<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_getIterator"> <span class="name">getIterator</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.StatementDecorator.html#233-254" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">getIterator( )</pre>  <p>Statements are iterable as arrays, this method will return the iterator object for traversing all items in the result.</p> <h2>Example:</h2> <pre>
<span class="php-var">$statement</span> = <span class="php-var">$connection</span>-&gt;prepare(<span class="php-quote">'SELECT id, title from articles'</span>);
<span class="php-keyword1">foreach</span> (<span class="php-var">$statement</span> <span class="php-keyword1">as</span> <span class="php-var">$row</span>) {
  <span class="php-comment">//do stuff</span>
}
</pre> <h4>Returns</h4>  <code>Iterator</code><br>\Iterator<br>  <h4>Implementation of</h4> <code>IteratorAggregate::getIterator()</code>  </div> <div class="method-detail">   <h3 class="method-name" id="_lastInsertId"> <span class="name">lastInsertId</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.StatementDecorator.html#294-311" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">lastInsertId( string|null $table null , string|null $column null )</pre>  <p>Returns the latest primary inserted using this statement.</p> <h4>Parameters</h4>  <dl> <dt> string|null <code>$table</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>table name or sequence to get last insert value from</dd> <dt> string|null <code>$column</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>the name of the column representing the primary key</dd> </dl>  <h4>Returns</h4>  <code>string</code><br>string<br>  <h4>Implementation of</h4> <code><a href="../class-cake.database.statementinterface/#_lastInsertId">Cake\Database\StatementInterface::lastInsertId()</a></code>  </div> <div class="method-detail">   <h3 class="method-name" id="_rowCount"> <span class="name">rowCount</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.StatementDecorator.html#215-231" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">rowCount( )</pre>  <p>Returns the number of rows affected by this SQL statement.</p> <h2>Example:</h2> <pre>
<span class="php-var">$statement</span> = <span class="php-var">$connection</span>-&gt;prepare(<span class="php-quote">'SELECT id, title from articles'</span>);
<span class="php-var">$statement</span>-&gt;execute();
<span class="php-keyword2">print_r</span>(<span class="php-var">$statement</span>-&gt;rowCount()); <span class="php-comment">// will show 1</span>
</pre> <h4>Returns</h4>  <code>integer</code><br>int<br>  <h4>Implementation of</h4> <code><a href="../class-cake.database.statementinterface/#_rowCount">Cake\Database\StatementInterface::rowCount()</a></code>  </div>   <h2>Methods used from <a href="../class-cake.database.typeconvertertrait/#methods">Cake\Database\TypeConverterTrait</a>
</h2> <div class="method-detail">   <h3 class="method-name" id="_cast"> <span class="name">cast</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.StatementDecorator.html#23-41" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">cast( mixed $value , Cake\Database\Type|string $type )</pre>  <p>Converts a give value to a suitable database value based on type and return relevant internal statement type</p> <h4>Parameters</h4>  <dl> <dt> mixed <code>$value</code> </dt> <dd>The value to cast</dd> <dt> <code><a href="../class-cake.database.type/">Cake\Database\Type</a></code>|string <code>$type</code> </dt> <dd>The type name or type instance to use.</dd> </dl>  <h4>Returns</h4>  <code>array</code><br>list containing converted value and internal type<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_matchTypes"> <span class="name">matchTypes</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.StatementDecorator.html#43-61" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span>  </h3> <pre class="method-signature" data-language="php">matchTypes( array $columns , array $types )</pre>  <p>Matches columns to corresponding types</p> <p>Both $columns and $types should either be numeric based or string key based at the same time.</p> <h4>Parameters</h4>  <dl> <dt> array <code>$columns</code> </dt> <dd>list or associative array of columns and parameters to be bound with types</dd> <dt> array <code>$types</code> </dt> <dd>list or associative array of types</dd> </dl>  <h4>Returns</h4>  <code>array</code><br>array<br>   </div>   <h2>Properties summary</h2> <table class="summary properties" id="properties"> <div class="property-detail"> <h3 class="property-name" id="$_callback"> <span class="name">$_callback</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.CallbackStatement.html#26-31" title="Go to source code" class="source" target="_blank">source</a>  </h3> <p class="attributes"> <span class="label">protected</span> callable </p>  <p>A callback function to be applied to results.</p>  </div> </table>   <h2>Properties inherited from <a href="../class-cake.database.statement.statementdecorator/#properties">Cake\Database\Statement\StatementDecorator</a>
</h2> <div class="summary properties inherited"> <div class="property-detail"> <h3 class="property-name" id="$_driver"> <span class="name">$_driver</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.StatementDecorator.html#44-49" title="Go to source code" class="source" target="_blank">source</a>  </h3> <p class="attributes"> <span class="label">protected</span> <code><a href="../class-cake.database.driver/">Cake\Database\Driver</a></code> </p>  <p>Reference to the driver object associated to this statement.</p>  </div> <div class="property-detail"> <h3 class="property-name" id="$_hasExecuted"> <span class="name">$_hasExecuted</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.StatementDecorator.html#51-56" title="Go to source code" class="source" target="_blank">source</a>  </h3> <p class="attributes"> <span class="label">protected</span> boolean </p>  <p>Whether or not this statement has already been executed</p> <div class="default-value"> <pre><span class="php-keyword1">false</span></pre> </div>  </div> <div class="property-detail"> <h3 class="property-name" id="$_statement"> <span class="name">$_statement</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Database.Statement.StatementDecorator.html#36-42" title="Go to source code" class="source" target="_blank">source</a>  </h3> <p class="attributes"> <span class="label">protected</span> mixed </p>  <p>Statement instance implementation, such as PDOStatement or any other custom implementation.</p>  </div> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2016 The Cake Software Foundation, Inc.<br>Licensed under the MIT License.<br>CakePHP is a registered trademark of Cake Software Foundation, Inc.<br>We are not endorsed by or affiliated with CakePHP.<br>
    <a href="http://api.cakephp.org/3.1/class-Cake.Database.Statement.CallbackStatement.html" class="_attribution-link" target="_blank">http://api.cakephp.org/3.1/class-Cake.Database.Statement.CallbackStatement.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
