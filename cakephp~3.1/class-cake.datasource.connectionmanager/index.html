
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>ConnectionManager (Class) - CakePHP 3.1 - W3cubDocs</title>
  
  <meta name="description" content=" Manages and loads instances of Connection ">
  <meta name="keywords" content="class, connectionmanager, -, cakephp, cakephp~3.1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/cakephp~3.1/class-cake.datasource.connectionmanager/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/cakephp~3.1.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cakephp~3.1/" class="_nav-link" title="" style="margin-left:0;">CakePHP 3.1</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _cakephp">
				
<h1>Class ConnectionManager</h1>  <p>Manages and loads instances of Connection</p> <p>Provides an interface to loading and creating connection objects. Acts as a registry for the connections defined in an application.</p> <p>Provides an interface for loading and enumerating connections defined in config/app.php</p>  <dl class="tree"> <dd style="padding-left:0px"> <b><span>Cake\Datasource\ConnectionManager</span></b> uses <a href="../class-cake.core.staticconfigtrait/"><span>Cake\Core\StaticConfigTrait</span></a> </dd> </dl> <div class="info"> <b>Namespace:</b> <a href="../namespace-cake/">Cake</a>\<a href="../namespace-cake.datasource/">Datasource</a><br> <b>Located at</b> <a href="http://api.cakephp.org/3.1/source-class-Cake.Datasource.ConnectionManager.html#20-197" title="Go to source code" target="_blank">Datasource/ConnectionManager.php</a><br> </div>  <h2>Method Detail</h2> <div class="method-detail">   <h3 class="method-name" id="_alias"> <span class="name">alias</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Datasource.ConnectionManager.html#124-151" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span> <span class="label">static</span>  </h3> <pre class="method-signature" data-language="php">alias( string $from , string $to )</pre>  <p>Set one or more connection aliases.</p> <p>Connection aliases allow you to rename active connections without overwriting the aliased connection. This is most useful in the test-suite for replacing connections with their test variant.</p> <p>Defined aliases will take precedence over normal connection names. For example, if you alias 'default' to 'test', fetching 'default' will always return the 'test' connection as long as the alias is defined.</p> <p>You can remove aliases with ConnectionManager::dropAlias().</p> <h4>Parameters</h4>  <dl> <dt> string <code>$from</code> </dt> <dd>The connection to add an alias to.</dd> <dt> string <code>$to</code> </dt> <dd>The alias to create. $from should return when loaded with get().</dd> </dl>  <h4>Throws</h4>  <code><a href="../class-cake.datasource.exception.missingdatasourceconfigexception/">Cake\Datasource\Exception\MissingDatasourceConfigException</a></code><br>When aliasing a connection that does not exist.<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_config"> <span class="name">config</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Datasource.ConnectionManager.html#63-80" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span> <span class="label">static</span>  </h3> <pre class="method-signature" data-language="php">config( string|array $key , array $config null )</pre>  <p>Configure a new connection object.</p> <p>The connection will not be constructed until it is first used.</p> <h4>Parameters</h4>  <dl> <dt> string|array <code>$key</code> </dt> <dd>The name of the connection config, or an array of multiple configs.</dd> <dt> array <code>$config</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>An array of name =&gt; config data for adapter.</dd> </dl>  <h4>Returns</h4>  <code>array|null</code><br>Null when adding configuration and an array of configuration data when reading.<br>  <h4>Throws</h4>  <code><a href="../class-cake.core.exception.exception/">Cake\Core\Exception\Exception</a></code><br>When trying to modify an existing config.<br>  <h4>See</h4>  <code><a href="../class-cake.core.staticconfigtrait/#_config">Cake\Core\StaticConfigTrait::config()</a></code><br>   </div> <div class="method-detail">   <h3 class="method-name" id="_dropAlias"> <span class="name">dropAlias</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Datasource.ConnectionManager.html#153-165" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span> <span class="label">static</span>  </h3> <pre class="method-signature" data-language="php">dropAlias( string $name )</pre>  <p>Drop an alias.</p> <p>Removes an alias from ConnectionManager. Fetching the aliased connection may fail if there is no other connection with that name.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$name</code> </dt> <dd>The connection name to remove aliases for.</dd> </dl>   </div> <div class="method-detail">   <h3 class="method-name" id="_get"> <span class="name">get</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Datasource.ConnectionManager.html#167-196" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span> <span class="label">static</span>  </h3> <pre class="method-signature" data-language="php">get( string $name , boolean $useAliases true )</pre>  <p>Get a connection.</p> <p>If the connection has not been constructed an instance will be added to the registry. This method will use any aliases that have been defined. If you want the original unaliased connections pass <code>false</code> as second parameter.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$name</code> </dt> <dd>The connection name.</dd> <dt> boolean <code>$useAliases</code> <span class="label">optional</span> <span class="php-keyword1">true</span> </dt> <dd>Set to false to not use aliased connections.</dd> </dl>  <h4>Returns</h4>  <code><a href="../class-cake.datasource.connectioninterface/">Cake\Datasource\ConnectionInterface</a></code><br>A connection object.<br>  <h4>Throws</h4>  <code><a href="../class-cake.datasource.exception.missingdatasourceconfigexception/">Cake\Datasource\Exception\MissingDatasourceConfigException</a></code><br>When config data is missing.<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_parseDsn"> <span class="name">parseDsn</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Datasource.ConnectionManager.html#82-122" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span> <span class="label">static</span>  </h3> <pre class="method-signature" data-language="php">parseDsn( string|null $config null )</pre>  <p>Parses a DSN into a valid connection configuration</p> <p>This method allows setting a DSN using formatting similar to that used by PEAR::DB. The following is an example of its usage:</p> <pre>
<span class="php-var">$dsn</span> = <span class="php-quote">'mysql://user:pass@localhost/database'</span>;
<span class="php-var">$config</span> = ConnectionManager::parseDsn(<span class="php-var">$dsn</span>);

<span class="php-var">$dsn</span> = <span class="php-quote">'Cake\Database\Driver\Mysql://localhost:3306/database?className=Cake\Database\Connection'</span>;
<span class="php-var">$config</span> = ConnectionManager::parseDsn(<span class="php-var">$dsn</span>);

<span class="php-var">$dsn</span> = <span class="php-quote">'Cake\Database\Connection://localhost:3306/database?driver=Cake\Database\Driver\Mysql'</span>;
<span class="php-var">$config</span> = ConnectionManager::parseDsn(<span class="php-var">$dsn</span>);
</pre> <p>For all classes, the value of <code>scheme</code> is set as the value of both the <code>className</code> and <code>driver</code> unless they have been otherwise specified.</p> <p>Note that query-string arguments are also parsed and set as values in the returned configuration.</p> <h4>Parameters</h4>  <dl> <dt> string|null <code>$config</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>The DSN string to convert to a configuration array</dd> </dl>  <h4>Returns</h4>  <code>array</code><br>The configuration array to be stored after parsing the DSN<br>   </div>   <h2>Methods used from <a href="../class-cake.core.staticconfigtrait/#methods">Cake\Core\StaticConfigTrait</a>
</h2> <div class="method-detail">   <h3 class="method-name" id="__config"> <span class="name">_config</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Datasource.ConnectionManager.html#37-115" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> protected </span> <span class="label">static</span>  </h3> <pre class="method-signature" data-language="php">_config( string|array $key , array $config null )</pre>  <p>This method can be used to define configuration adapters for an application or read existing configuration.</p> <p>To change an adapter's configuration at runtime, first drop the adapter and then reconfigure it.</p> <p>Adapters will not be constructed until the first operation is done.</p> <h2>Usage</h2> <p>Assuming that the class' name is <code>Cache</code> the following scenarios are supported:</p> <p>Reading config data back:</p> <pre>
Cache::config(<span class="php-quote">'default'</span>);
</pre> <p>Setting a cache engine up.</p> <pre>
Cache::config(<span class="php-quote">'default'</span>, <span class="php-var">$settings</span>);
</pre> <p>Injecting a constructed adapter in:</p> <pre>
Cache::config(<span class="php-quote">'default'</span>, <span class="php-var">$instance</span>);
</pre> <p>Configure multiple adapters at once:</p> <pre>
Cache::config(<span class="php-var">$arrayOfConfig</span>);
</pre> <h4>Parameters</h4>  <dl> <dt> string|array <code>$key</code> </dt> <dd>The name of the configuration, or an array of multiple configs.</dd> <dt> array <code>$config</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>An array of name =&gt; configuration data for adapter.</dd> </dl>  <h4>Returns</h4>  <code>array|null</code><br>Null when adding configuration or an array of configuration data when reading.<br>  <h4>Throws</h4>  <code>BadMethodCallException</code><br>When trying to modify an existing config.<br>   </div> <div class="method-detail">   <h3 class="method-name" id="__parseDsn"> <span class="name">_parseDsn</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Datasource.ConnectionManager.html#151-245" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> protected </span> <span class="label">static</span>  </h3> <pre class="method-signature" data-language="php">_parseDsn( string $dsn )</pre>  <p>Parses a DSN into a valid connection configuration</p> <p>This method allows setting a DSN using formatting similar to that used by PEAR::DB. The following is an example of its usage:</p> <pre>
<span class="php-var">$dsn</span> = <span class="php-quote">'mysql://user:pass@localhost/database?'</span>;
<span class="php-var">$config</span> = ConnectionManager::parseDsn(<span class="php-var">$dsn</span>);

<span class="php-var">$dsn</span> = <span class="php-quote">'Cake\Log\Engine\FileLog://?types=notice,info,debug&amp;file=debug&amp;path=LOGS'</span>;
<span class="php-var">$config</span> = <span class="php-keyword2">Log</span>::parseDsn(<span class="php-var">$dsn</span>);

<span class="php-var">$dsn</span> = <span class="php-quote">'smtp://user:secret@localhost:25?timeout=30&amp;client=null&amp;tls=null'</span>;
<span class="php-var">$config</span> = Email::parseDsn(<span class="php-var">$dsn</span>);

<span class="php-var">$dsn</span> = <span class="php-quote">'file:///?className=\My\Cache\Engine\FileEngine'</span>;
<span class="php-var">$config</span> = Cache::parseDsn(<span class="php-var">$dsn</span>);

<span class="php-var">$dsn</span> = <span class="php-quote">'File://?prefix=myapp_cake_core_&amp;serialize=true&amp;duration=+2 minutes&amp;path=/tmp/persistent/'</span>;
<span class="php-var">$config</span> = Cache::parseDsn(<span class="php-var">$dsn</span>);
</pre> <p>For all classes, the value of <code>scheme</code> is set as the value of both the <code>className</code> unless they have been otherwise specified.</p> <p>Note that querystring arguments are also parsed and set as values in the returned configuration.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$dsn</code> </dt> <dd>The DSN string to convert to a configuration array</dd> </dl>  <h4>Returns</h4>  <code>array</code><br>The configuration array to be stored after parsing the DSN<br>  <h4>Throws</h4>  <code>InvalidArgumentException</code><br>If not passed a string<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_configured"> <span class="name">configured</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Datasource.ConnectionManager.html#141-149" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span> <span class="label">static</span>  </h3> <pre class="method-signature" data-language="php">configured( )</pre>  <p>Returns an array containing the named configurations</p> <h4>Returns</h4>  <code>array</code><br>Array of configurations.<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_drop"> <span class="name">drop</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Datasource.ConnectionManager.html#117-139" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span> <span class="label">static</span>  </h3> <pre class="method-signature" data-language="php">drop( string $config )</pre>  <p>Drops a constructed adapter.</p> <p>If you wish to modify an existing configuration, you should drop it, change configuration and then re-add it.</p> <p>If the implementing objects supports a <code>$_registry</code> object the named configuration will also be unloaded from the registry.</p> <h4>Parameters</h4>  <dl> <dt> string <code>$config</code> </dt> <dd>An existing configuration you wish to remove.</dd> </dl>  <h4>Returns</h4>  <code>boolean</code><br>Success of the removal, returns false when the config does not exist.<br>   </div> <div class="method-detail">   <h3 class="method-name" id="_dsnClassMap"> <span class="name">dsnClassMap</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Datasource.ConnectionManager.html#247-259" title="Go to source code" class="source" target="_blank">source</a> <span class="label"> public </span> <span class="label">static</span>  </h3> <pre class="method-signature" data-language="php">dsnClassMap( array $map null )</pre>  <p>Returns or updates the DSN class map for this class</p> <h4>Parameters</h4>  <dl> <dt> array <code>$map</code> <span class="label">optional</span> <span class="php-keyword1">null</span> </dt> <dd>Additions/edits to the class map to apply</dd> </dl>  <h4>Returns</h4>  <code>array</code><br>array<br>   </div>   <h2>Properties summary</h2> <table class="summary properties" id="properties"> <div class="property-detail"> <h3 class="property-name" id="$_aliasMap"> <span class="name">$_aliasMap</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Datasource.ConnectionManager.html#37-42" title="Go to source code" class="source" target="_blank">source</a>  </h3> <p class="attributes"> <span class="label">protected</span> <span class="label">static</span> array </p>  <p>A map of connection aliases.</p> <div class="default-value"> <pre>[]</pre> </div>  </div> <div class="property-detail"> <h3 class="property-name" id="$_dsnClassMap"> <span class="name">$_dsnClassMap</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Datasource.ConnectionManager.html#44-54" title="Go to source code" class="source" target="_blank">source</a>  </h3> <p class="attributes"> <span class="label">protected</span> <span class="label">static</span> array </p>  <p>An array mapping url schemes to fully qualified driver class names</p> <h4>Return</h4>  <code>array</code><br>array<br>  <div class="default-value"> <pre>[
    <span class="php-quote">'mysql'</span> =&gt; <span class="php-quote">'Cake\Database\Driver\Mysql'</span>,
    <span class="php-quote">'postgres'</span> =&gt; <span class="php-quote">'Cake\Database\Driver\Postgres'</span>,
    <span class="php-quote">'sqlite'</span> =&gt; <span class="php-quote">'Cake\Database\Driver\Sqlite'</span>,
    <span class="php-quote">'sqlserver'</span> =&gt; <span class="php-quote">'Cake\Database\Driver\Sqlserver'</span>,
]</pre> </div>  </div> <div class="property-detail"> <h3 class="property-name" id="$_registry"> <span class="name">$_registry</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Datasource.ConnectionManager.html#56-61" title="Go to source code" class="source" target="_blank">source</a>  </h3> <p class="attributes"> <span class="label">protected</span> <span class="label">static</span> <code><a href="../class-cake.datasource.connectionregistry/">Cake\Datasource\ConnectionRegistry</a></code> </p>  <p>The ConnectionRegistry used by the manager.</p> <div class="default-value"> <pre><span class="php-keyword1">null</span></pre> </div>  </div> </table>   <h2>Properties used from <a href="../class-cake.core.staticconfigtrait/#properties">Cake\Core\StaticConfigTrait</a>
</h2> <div class="properties summary used"> <div class="property-detail"> <h3 class="property-name" id="$_config"> <span class="name">$_config</span><a href="http://api.cakephp.org/3.1/source-class-Cake.Core.StaticConfigTrait.html#30-35" title="Go to source code" class="source" target="_blank">source</a>  </h3> <p class="attributes"> <span class="label">protected</span> <span class="label">static</span> array </p>  <p>Configuration sets.</p> <div class="default-value"> <pre>[]</pre> </div>  </div> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2016 The Cake Software Foundation, Inc.<br>Licensed under the MIT License.<br>CakePHP is a registered trademark of Cake Software Foundation, Inc.<br>We are not endorsed by or affiliated with CakePHP.<br>
    <a href="http://api.cakephp.org/3.1/class-Cake.Datasource.ConnectionManager.html" class="_attribution-link" target="_blank">http://api.cakephp.org/3.1/class-Cake.Datasource.ConnectionManager.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
