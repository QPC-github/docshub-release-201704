
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>ActionDispatch&#58;&#58;Http&#58;&#58;FilterParameters - Ruby on Rails 4.1 - W3cubDocs</title>
  
  <meta name="description" content="Allows you to specify sensitive parameters which will be replaced from the request log by looking in the query string of the request and all &hellip;">
  <meta name="keywords" content="module, actiondispatch, http, filterparameters, -, ruby, on, rails, rails~4.1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/rails~4.1/actiondispatch/http/filterparameters/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/rails~4.1.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/rails~4.1/" class="_nav-link" title="" style="margin-left:0;">Ruby on Rails 4.1</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _rdoc">
				
<h1 id="module-ActionDispatch::Http::FilterParameters" class="module"> module ActionDispatch::Http::FilterParameters </h1> <section class="description"> <p>Allows you to specify sensitive parameters which will be replaced from the request log by looking in the query string of the request and all subhashes of the params hash to filter. If a block is given, each key and value of the params hash and all subhashes is passed to it, the value or key can be replaced using String#replace or similar method.</p> <pre>env["action_dispatch.parameter_filter"] = [:password]
=&gt; replaces the value to all keys matching /password/i with "[FILTERED]"

env["action_dispatch.parameter_filter"] = [:foo, "bar"]
=&gt; replaces the value to all keys matching /foo|bar/i with "[FILTERED]"

env["action_dispatch.parameter_filter"] = lambda do |k,v|
  v.reverse! if k =~ /secret/i
end
=&gt; reverses the value to all keys matching /secret/i</pre> </section> <section id="5Buntitled-5D" class="documentation-section"> <section class="constants-list"> <header> <h3>Constants</h3> </header> <dl> <dt id="KV_RE">KV_RE </dt>

<dt id="PAIR_RE">PAIR_RE </dt>

</dl> </section> <section id="public-class-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-c-new"> <span class="method-name">new</span><span class="method-args">(env)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <div class="method-calls-super"> Calls superclass method </div> <div class="method-source-code" id="new-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/filter_parameters.rb, line 28
def initialize(env)
  super
  @filtered_parameters = nil
  @filtered_env        = nil
  @filtered_path       = nil
end</pre> </div> </div> </div> </section> <section id="public-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-i-filtered_env"> <span class="method-name">filtered_env</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Return a hash of request.env with all sensitive data replaced.</p> <div class="method-source-code" id="filtered_env-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/filter_parameters.rb, line 41
def filtered_env
  @filtered_env ||= env_filter.filter(@env)
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-filtered_parameters"> <span class="method-name">filtered_parameters</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Return a hash of parameters with all sensitive data replaced.</p> <div class="method-source-code" id="filtered_parameters-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/filter_parameters.rb, line 36
def filtered_parameters
  @filtered_parameters ||= parameter_filter.filter(parameters)
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-filtered_path"> <span class="method-name">filtered_path</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Reconstructed a path with all sensitive GET parameters replaced.</p> <div class="method-source-code" id="filtered_path-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/filter_parameters.rb, line 46
def filtered_path
  @filtered_path ||= query_string.empty? ? path : "#{path}?#{filtered_query_string}"
end</pre> </div> </div> </div> </section> <section id="protected-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Protected Instance Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-i-env_filter"> <span class="method-name">env_filter</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <div class="method-source-code" id="env_filter-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/filter_parameters.rb, line 58
def env_filter
  user_key = @env.fetch("action_dispatch.parameter_filter") {
    return NULL_ENV_FILTER
  }
  parameter_filter_for(Array(user_key) + ENV_MATCH)
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-filtered_query_string"> <span class="method-name">filtered_query_string</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <div class="method-source-code" id="filtered_query_string-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/filter_parameters.rb, line 71
def filtered_query_string
  query_string.gsub(PAIR_RE) do |_|
    parameter_filter.filter([[$1, $2]]).first.join("=")
  end
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-parameter_filter"> <span class="method-name">parameter_filter</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <div class="method-source-code" id="parameter_filter-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/filter_parameters.rb, line 52
def parameter_filter
  parameter_filter_for @env.fetch("action_dispatch.parameter_filter") {
    return NULL_PARAM_FILTER
  }
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-parameter_filter_for"> <span class="method-name">parameter_filter_for</span><span class="method-args">(filters)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <div class="method-source-code" id="parameter_filter_for-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_dispatch/http/filter_parameters.rb, line 65
def parameter_filter_for(filters)
  ParameterFilter.new(filters)
end</pre> </div> </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    © 2004–2016 David Heinemeier Hansson<br>Licensed under the MIT License.<br>
    
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
