
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Running Flow on Existing Code - Flow - W3cubDocs</title>
  
  <meta name="description" content="Making previously-untyped code typecheck with Flow may take some time and work - and sometimes it may not be worth the effort in the short term. &hellip;">
  <meta name="keywords" content="running, flow, on, existing, code, -">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/flow/existing/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/flow.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/flow/" class="_nav-link" title="" style="margin-left:0;">Flow</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _react">
				
<h1>Running Flow on existing code</h1>  <h2 id="a-word-of-warning">A word of warning
</h2> <p>Making previously-untyped code typecheck with Flow may take some time and work - and sometimes it may not be worth the effort in the short term. Flow supports <em>interface files</em> so you can use libraries in a typed way without having to run Flow on them at all. If your project just depends on third party libraries, check out our <a href="../third-party/">guide</a> on using Flow with external dependencies and consider using an interface file for the libraries.</p> <p>Why is typechecking existing code so hard? Libraries not written with types in mind often contain complex, highly dynamic code that confuses analyzers such as Flow. The code may also have been written in a style that Flow deliberately chooses not to support in order to give the programmer more help. Some typical examples are:</p> <ul> <li>Operations on primitive values: While JavaScript allows operations such as <code class="highlighter-rouge">true + 3</code>, Flow considers it a type error. This is by design, and is done to provide the programmer with more safety. While that’s easily avoided for new code, it can sometimes be a lot of effort to eliminate such patterns from existing code.</li> <li>Nullability: Flow protects you against accessing properties on <code class="highlighter-rouge">null</code> by tracking null or undefined values throughout the program. In large existing codebases, though, this can require inserting some extra null checks in places where a value appears like it may be null, but actually isn’t at runtime.</li> </ul> <p>It is typically a much larger effort, and requires much more programmer annotation, to get such code to typecheck. On the other hand, if you own a library and would like to benefit from Flow typechecking within the library itself, this guide is for you.</p> <h2 id="dealing-with-a-large-number-of-type-errors">Dealing with a large number of type errors
</h2> <p>If you encounter too many type errors after running Flow and don’t know how to proceed, you could quickly cut down the number of type errors by adding the <a href="../quick-reference/#any"><code class="highlighter-rouge">any</code></a> type to parameters and returns of selected functions in your code. This will have the effect of isolating type errors to smaller regions of code - for example, within function bodies but not across function calls - and making them more manageable and easier to fix.</p> <p>This strategy should give you some benefit straight away without too much work. The typical errors you are likely to run into are:</p> <ul> <li>Potentially <code class="highlighter-rouge">null</code> or <code class="highlighter-rouge">undefined</code> values, easily fixed by adding conditional checks.</li> <li>Primitive type issues, like <code class="highlighter-rouge">true + 3</code>. Fixing these requires more knowledge of the code but is usually a small, local fix.</li> <li>In cases where Flow just doesn’t understand the code as written, <a href="https://flowtype.org/blog/2015/02/18/Typecasts.html" target="_blank">explicitly annotating values with <code class="highlighter-rouge">any</code></a> can help the typechecker.</li> </ul> <h2 id="next-steps">Next steps
</h2> <p>Once your code typechecks after sufficient fixes and uses of the <code class="highlighter-rouge">any</code> type, you can start replacing <code class="highlighter-rouge">any</code> with better type annotations incrementally. Each type annotation you add will allow Flow to validate more code, and you can gradually increase Flow’s coverage of your code.</p>   <div class="_attribution">
  <p class="_attribution-p">
    © 2013–present Facebook Inc.<br>Licensed under the BSD License.<br>
    <a href="https://flowtype.org/docs/existing.html" class="_attribution-link" target="_blank">https://flowtype.org/docs/existing.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
