
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>DS.Store - Ember.js - W3cubDocs</title>
  
  <meta name="description" content=" Extends&#58; Ember.Service ">
  <meta name="keywords" content="ds, store, class, -, ember, js">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/ember/data/classes/ds.store/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/ember.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ember/" class="_nav-link" title="" style="margin-left:0;">Ember.js</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _ember">
				
<h1 class="api-header"> DS.Store Class  </h1>  <blockquote class="class-info"> <p>Extends: Ember.Service</p> <p>Defined in: <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L129" target="_blank">addon/-private/system/store.js:129</a></p> <p>Module: <a href="../../modules/ember-data/">ember-data</a></p> </blockquote> <div class="description"> <p>The store contains all of the data for records loaded from the server. It is also responsible for creating instances of <code>DS.Model</code> that wrap the individual data for a record, so that they can be bound to in your Handlebars templates.</p> <p>Define your application's store like this:</p> <div class="pre-title"><code>app/services/store.js</code></div>
<pre class="highlight javascript " data-language="javascript">import DS from 'ember-data';

export default DS.Store.extend({
});
</pre> <p>Most Ember.js applications will only have a single <code>DS.Store</code> that is automatically created by their <code>Ember.Application</code>.</p> <p>You can retrieve models from the store in several ways. To retrieve a record for a specific id, use <code>DS.Store</code>'s <code>findRecord()</code> method:</p> <pre class="highlight javascript " data-language="javascript">store.findRecord('person', 123).then(function (person) {
});
</pre> <p>By default, the store will talk to your backend using a standard REST mechanism. You can customize how the store talks to your backend by specifying a custom adapter:</p> <div class="pre-title"><code>app/adapters/application.js</code></div>
<pre class="highlight javascript " data-language="javascript">import DS from 'ember-data';

export default DS.Adapter.extend({
});
</pre> <p>You can learn more about writing a custom adapter by reading the <code>DS.Adapter</code> documentation.</p> <h3 class="anchorable-toc" id="toc_store-createrecord-vs-push-vs-pushpayload">Store createRecord() vs. push() vs. pushPayload()</h3> <p>The store provides multiple ways to create new record objects. They have some subtle differences in their use which are detailed below:</p> <p><a href="#method_createRecord">createRecord</a> is used for creating new records on the client side. This will return a new record in the <code>created.uncommitted</code> state. In order to persist this record to the backend you will need to call <code>record.save()</code>.</p> <p><a href="#method_push">push</a> is used to notify Ember Data's store of new or updated records that exist in the backend. This will return a record in the <code>loaded.saved</code> state. The primary use-case for <code>store#push</code> is to notify Ember Data about record updates (full or partial) that happen outside of the normal adapter methods (for example <a href="http://dev.w3.org/html5/eventsource/" target="_blank">SSE</a> or <a href="http://www.w3.org/TR/2009/WD-websockets-20091222/" target="_blank">Web Sockets</a>).</p> <p><a href="#method_pushPayload">pushPayload</a> is a convenience wrapper for <code>store#push</code> that will deserialize payloads if the Serializer implements a <code>pushPayload</code> method.</p> <p>Note: When creating a new record using any of the above methods Ember Data will update <code>DS.RecordArray</code>s such as those returned by <code>store#peekAll()</code>, <code>store#findAll()</code> or <code>store#filter()</code>. This means any data bindings or computed properties that depend on the RecordArray will automatically be synced to include the new or updated record values.</p> </div>    <h2 id="method__classKeyFor">_classKeyFor<span class="args"> (modelName) </span><code class="type">String</code><span class="flag private">private</span>
</h2>    <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1962" target="_blank">addon/-private/system/store.js:1962</a> </p> <div class="description"> <p>Returns the normalized (dasherized) modelName. This method should be used whenever receiving a modelName in a public method.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">String</code> </dt>
 </dl> </div>   <h2 id="method__dataWasUpdated">_dataWasUpdated<span class="args"> (internalModel) </span><span class="flag private">private</span>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1796" target="_blank">addon/-private/system/store.js:1796</a> </p> <div class="description"> <p>If the adapter updates attributes the record will notify the store to update its membership in any filters. To avoid thrashing, this method is invoked only once per run loop per record.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>internalModel</strong> <code class="type">InternalModel</code>
</dt>  </dl> </div>   <h2 id="method__dematerializeRecord">_dematerializeRecord<span class="args"> (internalModel) </span><span class="flag private">private</span>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L2562" target="_blank">addon/-private/system/store.js:2562</a> </p> <div class="description"> <p>When a record is destroyed, this un-indexes it and removes it from any record arrays so it can be GCed.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>internalModel</strong> <code class="type">InternalModel</code>
</dt>  </dl> </div>   <h2 id="method__fetchAll">_fetchAll<span class="args"> (modelClass, array) </span><code class="type">Promise</code><span class="flag private">private</span>
</h2>    <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1573" target="_blank">addon/-private/system/store.js:1573</a> </p>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelClass</strong> <code class="type"><a href="../ds.model/">DS.Model</a></code>
</dt>  <dt>
<strong>array</strong> <code class="type"><a href="../ds.recordarray/">DS.RecordArray</a></code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">Promise</code> </dt>
<dd> promise</dd> </dl> </div>   <h2 id="method__fetchRecord">_fetchRecord<span class="args"> (internalModel) </span><code class="type">Promise</code><span class="flag private">private</span>
</h2>    <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L767" target="_blank">addon/-private/system/store.js:767</a> </p> <div class="description"> <p>This method is called by <code>findRecord</code> if it discovers that a particular type/id pair hasn't been loaded yet to kick off a request to the adapter.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>internalModel</strong> <code class="type">InternalModel</code>
</dt> <dd> model </dd> </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">Promise</code> </dt>
<dd> promise</dd> </dl> </div>   <h2 id="method__generateId">_generateId<span class="args"> (modelName, properties) </span><code class="type">String</code><span class="flag private">private</span>
</h2>    <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L379" target="_blank">addon/-private/system/store.js:379</a> </p> <div class="description"> <p>If possible, this method asks the adapter to generate an ID for a newly created record.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  <dt>
<strong>properties</strong> <code class="type">Object</code>
</dt> <dd> from the new record </dd> </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">String</code> </dt>
<dd> if the adapter can generate one, an ID</dd> </dl> </div>   <h2 id="method__load">_load<span class="args"> (data) </span><span class="flag private">private</span>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1993" target="_blank">addon/-private/system/store.js:1993</a> </p> <div class="description"> <p>This internal method is used by <code>push</code>.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>data</strong> <code class="type">Object</code>
</dt>  </dl> </div>   <h2 id="method__recordMapFor">_recordMapFor<span class="args"> (modelName) </span><code class="type">Object</code><span class="flag private">private</span>
</h2>    <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1976" target="_blank">addon/-private/system/store.js:1976</a> </p> <div class="description"> <p>Returns a map of IDs to client IDs for a given modelName.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">Object</code> </dt>
<dd> recordMap</dd> </dl> </div>   <h2 id="method_adapterFor">adapterFor<span class="args"> (modelName) </span><span class="flag public">public</span>
</h2>    <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L2583" target="_blank">addon/-private/system/store.js:2583</a> </p> <div class="description"> <p>Returns an instance of the adapter for a given type. For example, <code>adapterFor('person')</code> will return an instance of <code>App.PersonAdapter</code>.</p> <p>If no <code>App.PersonAdapter</code> is found, this method will look for an <code>App.ApplicationAdapter</code> (the default adapter for your entire application).</p> <p>If no <code>App.ApplicationAdapter</code> is found, it will return the value of the <code>defaultAdapter</code>.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> 
<dd> DS.Adapter</dd> </dl> </div>   <h2 id="method_buildRecord">buildRecord<span class="args"> (modelName, id, data) </span><code class="type">InternalModel</code><span class="flag private">private</span>
</h2>    <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L2524" target="_blank">addon/-private/system/store.js:2524</a> </p> <div class="description"> <p>Build a brand new record for a given type, ID, and initial data.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  <dt>
<strong>id</strong> <code class="type">String</code>
</dt>  <dt>
<strong>data</strong> <code class="type">Object</code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">InternalModel</code> </dt>
<dd> internal model</dd> </dl> </div>   <h2 id="method_createRecord">createRecord<span class="args"> (modelName, inputProperties) </span><code class="type"><a href="../ds.model/">DS.Model</a></code>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L313" target="_blank">addon/-private/system/store.js:313</a> </p> <div class="description"> <p>Create a new record in the current store. The properties passed to this method are set on the newly created record.</p> <p>To create a new instance of a <code>Post</code>:</p> <pre class="highlight js " data-language="js">store.createRecord('post', {
  title: "Rails is omakase"
});
</pre> <p>To create a new instance of a <code>Post</code> that has a relationship with a <code>User</code> record:</p> <pre class="highlight js " data-language="js">let user = this.store.peekRecord('user', 1);
store.createRecord('post', {
  title: "Rails is omakase",
  user: user
});
</pre> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  <dt>
<strong>inputProperties</strong> <code class="type">Object</code>
</dt> <dd> a hash of properties to set on the newly created record. </dd> </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type"><a href="../ds.model/">DS.Model</a></code> </dt>
<dd> record</dd> </dl> </div>   <h2 id="method_deleteRecord">deleteRecord<span class="args"> (record) </span>
</h2>  <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L404" target="_blank">addon/-private/system/store.js:404</a> </p> <div class="description"> <p>For symmetry, a record can be deleted via the store.</p> <p>Example</p> <pre class="highlight javascript " data-language="javascript">let post = store.createRecord('post', {
  title: "Rails is omakase"
});

store.deleteRecord(post);
</pre> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>record</strong> <code class="type"><a href="../ds.model/">DS.Model</a></code>
</dt>  </dl> </div>   <h2 id="method_didSaveRecord">didSaveRecord<span class="args"> (internalModel, data) </span><span class="flag private">private</span>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1871" target="_blank">addon/-private/system/store.js:1871</a> </p> <div class="description"> <p>This method is called once the promise returned by an adapter's <code>createRecord</code>, <code>updateRecord</code> or <code>deleteRecord</code> is resolved.</p> <p>If the data provides a server-generated ID, it will update the record and the store's indexes.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>internalModel</strong> <code class="type">InternalModel</code>
</dt> <dd> the in-flight internal model </dd> <dt>
<strong>data</strong> <code class="type">Object</code>
</dt> <dd> optional data (see above) </dd> </dl> </div>   <h2 id="method_didUpdateAll">didUpdateAll<span class="args"> (modelName) </span><span class="flag private">private</span>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1614" target="_blank">addon/-private/system/store.js:1614</a> </p>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  </dl> </div>   <h2 id="method_filter">filter<span class="args"> (modelName, query, filter) </span><code class="type"><a href="../ds.promisearray/">DS.PromiseArray</a></code><span class="flag deprecated">deprecated</span><span class="flag private">private</span>
</h2>     <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1687" target="_blank">addon/-private/system/store.js:1687</a> </p> <div class="description"> <p>Takes a type and filter function, and returns a live RecordArray that remains up to date as new records are loaded into the store or created locally.</p> <p>The filter function takes a materialized record, and returns true if the record should be included in the filter and false if it should not.</p> <p>Example</p> <pre class="highlight javascript " data-language="javascript">store.filter('post', function(post) {
  return post.get('unread');
});
</pre> <p>The filter function is called once on all records for the type when it is created, and then once on each newly loaded or created record.</p> <p>If any of a record's properties change, or if it changes state, the filter function will be invoked again to determine whether it should still be in the array.</p> <p>Optionally you can pass a query, which is the equivalent of calling <a href="#method_query">query</a> with that same query, to fetch additional records from the server. The results returned by the server could then appear in the filter if they match the filter function.</p> <p>The query itself is not used to filter records, it's only sent to your server for you to be able to do server-side filtering. The filter function will be applied on the returned results regardless.</p> <p>Example</p> <pre class="highlight javascript " data-language="javascript">store.filter('post', { unread: true }, function(post) {
  return post.get('unread');
}).then(function(unreadPosts) {
  unreadPosts.get('length'); // 5
  let unreadPost = unreadPosts.objectAt(0);
  unreadPost.set('unread', false);
  unreadPosts.get('length'); // 4
});
</pre> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  <dt>
<strong>query</strong> <code class="type">Object</code>
</dt> <dd> optional query </dd> <dt>
<strong>filter</strong> <code class="type">Function</code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type"><a href="../ds.promisearray/">DS.PromiseArray</a></code> </dt>
 </dl> </div>   <h2 id="method_find">find<span class="args"> (modelName, id, options) </span><code class="type">Promise</code><span class="flag private">private</span>
</h2>    <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L447" target="_blank">addon/-private/system/store.js:447</a> </p>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  <dt>
<strong>id</strong> <code class="type">String|Integer</code>
</dt>  <dt>
<strong>options</strong> <code class="type">Object</code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">Promise</code> </dt>
<dd> promise</dd> </dl> </div>   <h2 id="method_findAll">findAll<span class="args"> (modelName, options) </span><code class="type">Promise</code>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1370" target="_blank">addon/-private/system/store.js:1370</a> <br>Available since 1.13.0 </p> <div class="description"> <p><code>findAll</code> asks the adapter's <code>findAll</code> method to find the records for the given type, and returns a promise which will resolve with all records of this type present in the store, even if the adapter only returns a subset of them.</p> <div class="pre-title"><code>app/routes/authors.js</code></div>
<pre class="highlight javascript " data-language="javascript">import Ember from 'ember';

export default Ember.Route.extend({
  model: function(params) {
    return this.store.findAll('author');
  }
});
</pre> <p><em>When</em> the returned promise resolves depends on the reload behavior, configured via the passed <code>options</code> hash and the result of the adapter's <code>shouldReloadAll</code> method.</p> <h3 class="anchorable-toc" id="toc_reloading">Reloading</h3> <p>If <code>{ reload: true }</code> is passed or <code>adapter.shouldReloadAll</code> evaluates to <code>true</code>, then the returned promise resolves once the adapter returns data, regardless if there are already records in the store:</p> <pre class="highlight js " data-language="js">store.push({
  data: {
    id: 'first',
    type: 'author'
  }
});

// adapter#findAll resolves with
// [
//   {
//     id: 'second',
//     type: 'author'
//   }
// ]
store.findAll('author', { reload: true }).then(function(authors) {
  authors.getEach("id"); // ['first', 'second']
});
</pre> <p>If no reload is indicated via the abovementioned ways, then the promise immediately resolves with all the records currently loaded in the store.</p> <h3 class="anchorable-toc" id="toc_background-reloading">Background Reloading</h3> <p>Optionally, if <code>adapter.shouldBackgroundReloadAll</code> evaluates to <code>true</code>, then a background reload is started. Once this resolves, the array with which the promise resolves, is updated automatically so it contains all the records in the store:</p> <pre class="highlight js " data-language="js">// app/adapters/application.js
export default DS.Adapter.extend({
  shouldReloadAll(store, snapshotsArray) {
    return false;
  },

  shouldBackgroundReloadAll(store, snapshotsArray) {
    return true;
  }
});

// ...

store.push({
  data: {
    id: 'first',
    type: 'author'
  }
});

let allAuthors;
store.findAll('author').then(function(authors) {
  authors.getEach('id'); // ['first']

  allAuthors = authors;
});

// later, once adapter#findAll resolved with
// [
//   {
//     id: 'second',
//     type: 'author'
//   }
// ]

allAuthors.getEach('id'); // ['first', 'second']
</pre> <p>If you would like to force or prevent background reloading, you can set a boolean value for <code>backgroundReload</code> in the options object for <code>findAll</code>.</p> <div class="pre-title"><code>app/routes/post/edit.js</code></div>
<pre class="highlight javascript " data-language="javascript">import Ember from 'ember';

export default Ember.Route.extend({
  model: function() {
    return this.store.findAll('post', { backgroundReload: false });
  }
});
</pre> <p>If you pass an object on the <code>adapterOptions</code> property of the options argument it will be passed to you adapter via the <code>snapshotRecordArray</code></p> <div class="pre-title"><code>app/routes/posts.js</code></div>
<pre class="highlight javascript " data-language="javascript">import Ember from 'ember';

export default Ember.Route.extend({
  model: function(params) {
    return this.store.findAll('post', {
      adapterOptions: { subscribe: false }
    });
  }
});
</pre>
<div class="pre-title"><code>app/adapters/post.js</code></div>
<pre class="highlight javascript " data-language="javascript">import MyCustomAdapter from './custom-adapter';

export default MyCustomAdapter.extend({
  findAll: function(store, type, sinceToken, snapshotRecordArray) {
    if (snapshotRecordArray.adapterOptions.subscribe) {
      // ...
    }
    // ...
  }
});
</pre> <p>See <a href="#method_peekAll">peekAll</a> to get an array of current records in the store, without waiting until a reload is finished.</p> <h3 class="anchorable-toc" id="toc_retrieving-related-model-records">Retrieving Related Model Records</h3> <p>If you use an adapter such as Ember's default <a href="../ds.jsonapiadapter/"><code>JSONAPIAdapter</code></a> that supports the <a href="http://jsonapi.org/" target="_blank">JSON API specification</a> and if your server endpoint supports the use of an <a href="http://jsonapi.org/format/#fetching-includes" target="_blank">'include' query parameter</a>, you can use <code>findAll()</code> to automatically retrieve additional records related to those requested by supplying an <code>include</code> parameter in the <code>options</code> object.</p> <p>For example, given a <code>post</code> model that has a <code>hasMany</code> relationship with a <code>comment</code> model, when we retrieve all of the post records we can have the server also return all of the posts' comments in the same request:</p> <div class="pre-title"><code>app/routes/posts.js</code></div>
<pre class="highlight javascript " data-language="javascript">import Ember from 'ember';

export default Ember.Route.extend({
  model: function() {
   return this.store.findAll('post', {include: 'comments'});
  }
});

</pre> <p>Multiple relationships can be requested using an <code>include</code> parameter consisting of a comma-separated list (without white-space) while nested relationships can be specified using a dot-separated sequence of relationship names. So to request both the posts' comments and the authors of those comments the request would look like this:</p> <div class="pre-title"><code>app/routes/posts.js</code></div>
<pre class="highlight javascript " data-language="javascript">import Ember from 'ember';

export default Ember.Route.extend({
  model: function() {
   return this.store.findAll('post', {include: 'comments,comments.author'});
  }
});

</pre> <p>See <a href="#method_query">query</a> to only get a subset of records from the server.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  <dt>
<strong>options</strong> <code class="type">Object</code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">Promise</code> </dt>
<dd> promise</dd> </dl> </div>   <h2 id="method_findBelongsTo">findBelongsTo<span class="args"> (owner, link, relationship) </span><code class="type">Promise</code><span class="flag private">private</span>
</h2>    <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1152" target="_blank">addon/-private/system/store.js:1152</a> </p>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>owner</strong> <code class="type"><a href="../ds.model/">DS.Model</a></code>
</dt>  <dt>
<strong>link</strong> <code class="type">Any</code>
</dt>  <dt>
<strong>relationship</strong> <code class="type">Relationship</code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">Promise</code> </dt>
<dd> promise</dd> </dl> </div>   <h2 id="method_findByIds">findByIds<span class="args"> (modelName, ids) </span><code class="type">Promise</code><span class="flag private">private</span>
</h2>    <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L743" target="_blank">addon/-private/system/store.js:743</a> </p> <div class="description"> <p>This method makes a series of requests to the adapter's <code>find</code> method and returns a promise that resolves once they are all loaded.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  <dt>
<strong>ids</strong> <code class="type">Array</code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">Promise</code> </dt>
<dd> promise</dd> </dl> </div>   <h2 id="method_findHasMany">findHasMany<span class="args"> (owner, link, relationship) </span><code class="type">Promise</code><span class="flag private">private</span>
</h2>    <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1125" target="_blank">addon/-private/system/store.js:1125</a> </p> <div class="description"> <p>If a relationship was originally populated by the adapter as a link (as opposed to a list of IDs), this method is called when the relationship is fetched.</p> <p>The link (which is usually a URL) is passed through unchanged, so the adapter can make whatever request it wants.</p> <p>The usual use-case is for the server to register a URL as a link, and then use that URL in the future to make a request for the relationship.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>owner</strong> <code class="type"><a href="../ds.model/">DS.Model</a></code>
</dt>  <dt>
<strong>link</strong> <code class="type">Any</code>
</dt>  <dt>
<strong>relationship</strong> <code class="type">(Relationship)</code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">Promise</code> </dt>
<dd> promise</dd> </dl> </div>   <h2 id="method_findMany">findMany<span class="args"> (internalModels) </span><code class="type">Promise</code><span class="flag private">private</span>
</h2>    <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1108" target="_blank">addon/-private/system/store.js:1108</a> </p>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>internalModels</strong> <code class="type">Array</code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">Promise</code> </dt>
<dd> promise</dd> </dl> </div>   <h2 id="method_findRecord">findRecord<span class="args"> (modelName, id, options) </span><code class="type">Promise</code>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L471" target="_blank">addon/-private/system/store.js:471</a> <br>Available since 1.13.0 </p> <div class="description"> <p>This method returns a record for a given type and id combination.</p> <p>The <code>findRecord</code> method will always resolve its promise with the same object for a given type and <code>id</code>.</p> <p>The <code>findRecord</code> method will always return a <strong>promise</strong> that will be resolved with the record.</p> <p>Example</p> <div class="pre-title"><code>app/routes/post.js</code></div>
<pre class="highlight javascript " data-language="javascript">import Ember from 'ember';

export default Ember.Route.extend({
  model: function(params) {
    return this.store.findRecord('post', params.post_id);
  }
});
</pre> <p>If the record is not yet available, the store will ask the adapter's <code>find</code> method to find the necessary data. If the record is already present in the store, it depends on the reload behavior <em>when</em> the returned promise resolves.</p> <h3 class="anchorable-toc" id="toc_reloading">Reloading</h3> <p>The reload behavior is configured either via the passed <code>options</code> hash or the result of the adapter's <code>shouldReloadRecord</code>.</p> <p>If <code>{ reload: true }</code> is passed or <code>adapter.shouldReloadRecord</code> evaluates to <code>true</code>, then the returned promise resolves once the adapter returns data, regardless if the requested record is already in the store:</p> <pre class="highlight js " data-language="js">store.push({
  data: {
    id: 1,
    type: 'post',
    revision: 1
  }
});

// adapter#findRecord resolves with
// [
//   {
//     id: 1,
//     type: 'post',
//     revision: 2
//   }
// ]
store.findRecord('post', 1, { reload: true }).then(function(post) {
  post.get("revision"); // 2
});
</pre> <p>If no reload is indicated via the abovementioned ways, then the promise immediately resolves with the cached version in the store.</p> <h3 class="anchorable-toc" id="toc_background-reloading">Background Reloading</h3> <p>Optionally, if <code>adapter.shouldBackgroundReloadRecord</code> evaluates to <code>true</code>, then a background reload is started, which updates the records' data, once it is available:</p> <pre class="highlight js " data-language="js">// app/adapters/post.js
import ApplicationAdapter from "./application";

export default ApplicationAdapter.extend({
  shouldReloadRecord(store, snapshot) {
    return false;
  },

  shouldBackgroundReloadRecord(store, snapshot) {
    return true;
  }
});

// ...

store.push({
  data: {
    id: 1,
    type: 'post',
    revision: 1
  }
});

let blogPost = store.findRecord('post', 1).then(function(post) {
  post.get('revision'); // 1
});

// later, once adapter#findRecord resolved with
// [
//   {
//     id: 1,
//     type: 'post',
//     revision: 2
//   }
// ]

blogPost.get('revision'); // 2
</pre> <p>If you would like to force or prevent background reloading, you can set a boolean value for <code>backgroundReload</code> in the options object for <code>findRecord</code>.</p> <div class="pre-title"><code>app/routes/post/edit.js</code></div>
<pre class="highlight javascript " data-language="javascript">import Ember from 'ember';

export default Ember.Route.extend({
  model: function(params) {
    return this.store.findRecord('post', params.post_id, { backgroundReload: false });
  }
});
</pre> <p>If you pass an object on the <code>adapterOptions</code> property of the options argument it will be passed to you adapter via the snapshot</p> <div class="pre-title"><code>app/routes/post/edit.js</code></div>
<pre class="highlight javascript " data-language="javascript">import Ember from 'ember';

export default Ember.Route.extend({
  model: function(params) {
    return this.store.findRecord('post', params.post_id, {
      adapterOptions: { subscribe: false }
    });
  }
});
</pre>
<div class="pre-title"><code>app/adapters/post.js</code></div>
<pre class="highlight javascript " data-language="javascript">import MyCustomAdapter from './custom-adapter';

export default MyCustomAdapter.extend({
  findRecord: function(store, type, id, snapshot) {
    if (snapshot.adapterOptions.subscribe) {
      // ...
    }
    // ...
  }
});
</pre> <p>See <a href="#method_peekRecord">peekRecord</a> to get the cached version of a record.</p> <h3 class="anchorable-toc" id="toc_retrieving-related-model-records">Retrieving Related Model Records</h3> <p>If you use an adapter such as Ember's default <a href="../ds.jsonapiadapter/"><code>JSONAPIAdapter</code></a> that supports the <a href="http://jsonapi.org/" target="_blank">JSON API specification</a> and if your server endpoint supports the use of an <a href="http://jsonapi.org/format/#fetching-includes" target="_blank">'include' query parameter</a>, you can use <code>findRecord()</code> to automatically retrieve additional records related to the one you request by supplying an <code>include</code> parameter in the <code>options</code> object.</p> <p>For example, given a <code>post</code> model that has a <code>hasMany</code> relationship with a <code>comment</code> model, when we retrieve a specific post we can have the server also return that post's comments in the same request:</p> <div class="pre-title"><code>app/routes/post.js</code></div>
<pre class="highlight javascript " data-language="javascript">import Ember from 'ember';

export default Ember.Route.extend({
  model: function(params) {
   return this.store.findRecord('post', params.post_id, {include: 'comments'});
  }
});

</pre> <p>In this case, the post's comments would then be available in your template as <code>model.comments</code>.</p> <p>Multiple relationships can be requested using an <code>include</code> parameter consisting of a comma-separated list (without white-space) while nested relationships can be specified using a dot-separated sequence of relationship names. So to request both the post's comments and the authors of those comments the request would look like this:</p> <div class="pre-title"><code>app/routes/post.js</code></div>
<pre class="highlight javascript " data-language="javascript">import Ember from 'ember';

export default Ember.Route.extend({
  model: function(params) {
   return this.store.findRecord('post', params.post_id, {include: 'comments,comments.author'});
  }
});

</pre> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  <dt>
<strong>id</strong> <code class="type">(String|Integer)</code>
</dt>  <dt>
<strong>options</strong> <code class="type">Object</code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">Promise</code> </dt>
<dd> promise</dd> </dl> </div>   <h2 id="method_flushPendingSave">flushPendingSave<span class="flag private">private</span>
</h2>  <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1837" target="_blank">addon/-private/system/store.js:1837</a> </p> <div class="description"> <p>This method is called at the end of the run loop, and flushes any records passed into <code>scheduleSave</code></p> </div>    <h2 id="method_getReference">getReference<span class="args"> (modelName, id) </span><code class="type">RecordReference</code>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L947" target="_blank">addon/-private/system/store.js:947</a> <br>Available since 2.5.0 </p> <div class="description"> <p>Get the reference for the specified record.</p> <p>Example</p> <pre class="highlight javascript " data-language="javascript">let userRef = store.getReference('user', 1);

// check if the user is loaded
let isLoaded = userRef.value() !== null;

// get the record of the reference (null if not yet available)
let user = userRef.value();

// get the identifier of the reference
if (userRef.remoteType() === "id") {
let id = userRef.id();
}

// load user (via store.find)
userRef.load().then(...)

// or trigger a reload
userRef.reload().then(...)

// provide data for reference
userRef.push({ id: 1, username: "@user" }).then(function(user) {
userRef.value() === user;
});
</pre> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  <dt>
<strong>id</strong> <code class="type">String|Integer</code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">RecordReference</code> </dt>
 </dl> </div>   <h2 id="method_hasRecordForId">hasRecordForId<span class="args"> (modelName, id) </span><code class="type">Boolean</code>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1048" target="_blank">addon/-private/system/store.js:1048</a> </p> <div class="description"> <p>This method returns true if a record for a given modelName and id is already loaded in the store. Use this function to know beforehand if a findRecord() will result in a request or that it will be a cache hit.</p> <p>Example</p> <pre class="highlight javascript " data-language="javascript">store.hasRecordForId('post', 1); // false
store.findRecord('post', 1).then(function() {
   store.hasRecordForId('post', 1); // true
 });
</pre> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  <dt>
<strong>id</strong> <code class="type">(String|Integer)</code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">Boolean</code> </dt>
 </dl> </div>   <h2 id="method_init">init<span class="flag private">private</span>
</h2>  <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L204" target="_blank">addon/-private/system/store.js:204</a> </p>    <h2 id="method_modelFor">modelFor<span class="args"> (modelName) </span><code class="type"><a href="../ds.model/">DS.Model</a></code>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L2059" target="_blank">addon/-private/system/store.js:2059</a> </p> <div class="description"> <p>Returns the model class for the particular <code>modelName</code>.</p> <p>The class of a model might be useful if you want to get a list of all the relationship names of the model, see <a href="../ds.model/#property_relationshipNames"><code>relationshipNames</code></a> for example.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type"><a href="../ds.model/">DS.Model</a></code> </dt>
 </dl> </div>   <h2 id="method_normalize">normalize<span class="args"> (modelName, payload) </span><code class="type">Object</code>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L2495" target="_blank">addon/-private/system/store.js:2495</a> </p> <div class="description"> <p><code>normalize</code> converts a json payload into the normalized form that <a href="#method_push">push</a> expects.</p> <p>Example</p> <pre class="highlight js " data-language="js">socket.on('message', function(message) {
  let modelName = message.model;
  let data = message.data;
  store.push(store.normalize(modelName, data));
});
</pre> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt> <dd> The name of the model type for this payload </dd> <dt>
<strong>payload</strong> <code class="type">Object</code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">Object</code> </dt>
<dd> The normalized payload</dd> </dl> </div>   <h2 id="method_peekAll">peekAll<span class="args"> (modelName) </span><code class="type"><a href="../ds.recordarray/">DS.RecordArray</a></code>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1626" target="_blank">addon/-private/system/store.js:1626</a> <br>Available since 1.13.0 </p> <div class="description"> <p>This method returns a filtered array that contains all of the known records for a given type in the store.</p> <p>Note that because it's just a filter, the result will contain any locally created records of the type, however, it will not make a request to the backend to retrieve additional records. If you would like to request all the records from the backend please use <a href="#method_findAll">store.findAll</a>.</p> <p>Also note that multiple calls to <code>peekAll</code> for a given type will always return the same <code>RecordArray</code>.</p> <p>Example</p> <pre class="highlight javascript " data-language="javascript">let localPosts = store.peekAll('post');
</pre> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type"><a href="../ds.recordarray/">DS.RecordArray</a></code> </dt>
 </dl> </div>   <h2 id="method_peekRecord">peekRecord<span class="args"> (modelName, id) </span><code class="type">DS.Model|null</code>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L990" target="_blank">addon/-private/system/store.js:990</a> <br>Available since 1.13.0 </p> <div class="description"> <p>Get a record by a given type and ID without triggering a fetch.</p> <p>This method will synchronously return the record if it is available in the store, otherwise it will return <code>null</code>. A record is available if it has been fetched earlier, or pushed manually into the store.</p> <p><em>Note: This is an synchronous method and does not return a promise.</em></p> <pre class="highlight js " data-language="js">let post = store.peekRecord('post', 1);

post.get('id'); // 1
</pre> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  <dt>
<strong>id</strong> <code class="type">String|Integer</code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">DS.Model|null</code> </dt>
<dd> record</dd> </dl> </div>   <h2 id="method_push">push<span class="args"> (data) </span><code class="type">DS.Model|Array</code>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L2135" target="_blank">addon/-private/system/store.js:2135</a> </p> <div class="description"> <p>Push some data for a given type into the store.</p> <p>This method expects normalized <a href="http://jsonapi.org/" target="_blank">JSON API</a> document. This means you have to follow <a href="http://jsonapi.org/format/" target="_blank">JSON API specification</a> with few minor adjustments: - record's <code>type</code> should always be in singular, dasherized form - members (properties) should be camelCased</p> <p><a href="http://jsonapi.org/format/#document-top-level" target="_blank">Your primary data should be wrapped inside <code>data</code> property</a>:</p> <pre class="highlight js " data-language="js">store.push({
  data: {
    // primary data for single record of type `Person`
    id: '1',
    type: 'person',
    attributes: {
      firstName: 'Daniel',
      lastName: 'Kmak'
    }
  }
});
</pre> <p><a href="http://ember-twiddle.com/fb99f18cd3b4d3e2a4c7" target="_blank">Demo.</a></p> <p><code>data</code> property can also hold an array (of records):</p> <pre class="highlight js " data-language="js">store.push({
  data: [
    // an array of records
    {
      id: '1',
      type: 'person',
      attributes: {
        firstName: 'Daniel',
        lastName: 'Kmak'
      }
    },
    {
      id: '2',
      type: 'person',
      attributes: {
        firstName: 'Tom',
        lastName: 'Dale'
      }
    }
  ]
});
</pre> <p><a href="http://ember-twiddle.com/69cdbeaa3702159dc355" target="_blank">Demo.</a></p> <p>There are some typical properties for <code>JSONAPI</code> payload: * <code>id</code> - mandatory, unique record's key * <code>type</code> - mandatory string which matches <code>model</code>'s dasherized name in singular form * <code>attributes</code> - object which holds data for record attributes - <code>DS.attr</code>'s declared in model * <code>relationships</code> - object which must contain any of the following properties under each relationships' respective key (example path is <code>relationships.achievements.data</code>): - <a href="http://jsonapi.org/format/#document-links" target="_blank"><code>links</code></a> - <a href="http://jsonapi.org/format/#document-resource-object-linkage" target="_blank"><code>data</code></a> - place for primary data - <a href="http://jsonapi.org/format/#document-meta" target="_blank"><code>meta</code></a> - object which contains meta-information about relationship</p> <p>For this model:</p> <div class="pre-title"><code>app/models/person.js</code></div>
<pre class="highlight javascript " data-language="javascript">import DS from 'ember-data';

export default DS.Model.extend({
  firstName: DS.attr('string'),
  lastName: DS.attr('string'),

  children: DS.hasMany('person')
});
</pre> <p>To represent the children as IDs:</p> <pre class="highlight js " data-language="js">{
  data: {
    id: '1',
    type: 'person',
    attributes: {
      firstName: 'Tom',
      lastName: 'Dale'
    },
    relationships: {
      children: {
        data: [
          {
            id: '2',
            type: 'person'
          },
          {
            id: '3',
            type: 'person'
          },
          {
            id: '4',
            type: 'person'
          }
        ]
      }
    }
  }
}
</pre> <p><a href="http://ember-twiddle.com/343e1735e034091f5bde" target="_blank">Demo.</a></p> <p>To represent the children relationship as a URL:</p> <pre class="highlight js " data-language="js">{
  data: {
    id: '1',
    type: 'person',
    attributes: {
      firstName: 'Tom',
      lastName: 'Dale'
    },
    relationships: {
      children: {
        links: {
          related: '/people/1/children'
        }
      }
    }
  }
}
</pre> <p>If you're streaming data or implementing an adapter, make sure that you have converted the incoming data into this form. The store's <a href="#method_normalize">normalize</a> method is a convenience helper for converting a json payload into the form Ember Data expects.</p> <pre class="highlight js " data-language="js">store.push(store.normalize('person', data));
</pre> <p>This method can be used both to push in brand new records, as well as to update existing records.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>data</strong> <code class="type">Object</code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">DS.Model|Array</code> </dt>
<dd> the record(s) that was created or updated.</dd> </dl> </div>   <h2 id="method_pushPayload">pushPayload<span class="args"> (modelName, inputPayload) </span>
</h2>  <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L2420" target="_blank">addon/-private/system/store.js:2420</a> </p> <div class="description"> <p>Push some raw data into the store.</p> <p>This method can be used both to push in brand new records, as well as to update existing records. You can push in more than one type of object at once. All objects should be in the format expected by the serializer.</p> <div class="pre-title"><code>app/serializers/application.js</code></div>
<pre class="highlight javascript " data-language="javascript">import DS from 'ember-data';

export default DS.ActiveModelSerializer;
</pre>
<pre class="highlight js " data-language="js">let pushData = {
  posts: [
    { id: 1, post_title: "Great post", comment_ids: [2] }
  ],
  comments: [
    { id: 2, comment_body: "Insightful comment" }
  ]
}

store.pushPayload(pushData);
</pre> <p>By default, the data will be deserialized using a default serializer (the application serializer if it exists).</p> <p>Alternatively, <code>pushPayload</code> will accept a model type which will determine which serializer will process the payload.</p> <div class="pre-title"><code>app/serializers/application.js</code></div>
<pre class="highlight javascript " data-language="javascript">import DS from 'ember-data';

export default DS.ActiveModelSerializer;
</pre>
<div class="pre-title"><code>app/serializers/post.js</code></div>
<pre class="highlight javascript " data-language="javascript">import DS from 'ember-data';

export default DS.JSONSerializer;
</pre>
<pre class="highlight js " data-language="js">store.pushPayload('comment', pushData); // Will use the application serializer
store.pushPayload('post', pushData); // Will use the post serializer
</pre> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt> <dd> Optionally, a model type used to determine which serializer will be used </dd> <dt>
<strong>inputPayload</strong> <code class="type">Object</code>
</dt>  </dl> </div>   <h2 id="method_query">query<span class="args"> (modelName, query) </span><code class="type">Promise</code>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1169" target="_blank">addon/-private/system/store.js:1169</a> <br>Available since 1.13.0 </p> <div class="description"> <p>This method delegates a query to the adapter. This is the one place where adapter-level semantics are exposed to the application.</p> <p>Exposing queries this way seems preferable to creating an abstract query language for all server-side queries, and then require all adapters to implement them.</p>  <p>If you do something like this:</p> <pre class="highlight javascript " data-language="javascript">store.query('person', { page: 1 });
</pre> <p>The call made to the server, using a Rails backend, will look something like this:</p> <pre class="highlight text " data-language="">Started GET "/api/v1/person?page=1"
Processing by Api::V1::PersonsController#index as HTML
Parameters: { "page"=&gt;"1" }
</pre>  <p>If you do something like this:</p> <pre class="highlight javascript " data-language="javascript">store.query('person', { ids: [1, 2, 3] });
</pre> <p>The call to the server, using a Rails backend, will look something like this:</p> <pre class="highlight text " data-language="">Started GET "/api/v1/person?ids%5B%5D=1&amp;ids%5B%5D=2&amp;ids%5B%5D=3"
Processing by Api::V1::PersonsController#index as HTML
Parameters: { "ids" =&gt; ["1", "2", "3"] }
</pre> <p>This method returns a promise, which is resolved with an <a href="../ds.adapterpopulatedrecordarray/"><code>AdapterPopulatedRecordArray</code></a> once the server returns.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  <dt>
<strong>query</strong> <code class="type">Any</code>
</dt> <dd> an opaque query to be used by the adapter </dd> </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">Promise</code> </dt>
<dd> promise</dd> </dl> </div>   <h2 id="method_queryRecord">queryRecord<span class="args"> (modelName, query) </span><code class="type">Promise</code>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1254" target="_blank">addon/-private/system/store.js:1254</a> <br>Available since 1.13.0 </p> <div class="description"> <p>This method makes a request for one record, where the <code>id</code> is not known beforehand (if the <code>id</code> is known, use <a href="#method_findRecord"><code>findRecord</code></a> instead).</p> <p>This method can be used when it is certain that the server will return a single object for the primary data.</p> <p>Let's assume our API provides an endpoint for the currently logged in user via:</p> <pre class="highlight text " data-language="">// GET /api/current_user
{
  user: {
    id: 1234,
    username: 'admin'
  }
}
</pre> <p>Since the specific <code>id</code> of the <code>user</code> is not known beforehand, we can use <code>queryRecord</code> to get the user:</p> <pre class="highlight javascript " data-language="javascript">store.queryRecord('user', {}).then(function(user) {
  let username = user.get('username');
  console.log(`Currently logged in as ${username}`);
});
</pre> <p>The request is made through the adapters' <code>queryRecord</code>:</p> <div class="pre-title"><code>app/adapters/user.js</code></div>
<pre class="highlight javascript " data-language="javascript">import DS from "ember-data";

export default DS.Adapter.extend({
  queryRecord(modelName, query) {
    return Ember.$.getJSON("/api/current_user");
  }
});
</pre> <p>Note: the primary use case for <code>store.queryRecord</code> is when a single record is queried and the <code>id</code> is not known beforehand. In all other cases <code>store.query</code> and using the first item of the array is likely the preferred way:</p> <pre class="highlight text " data-language="">// GET /users?username=unique
{
  data: [{
    id: 1234,
    type: 'user',
    attributes: {
      username: "unique"
    }
  }]
}
</pre>
<pre class="highlight javascript " data-language="javascript">store.query('user', { username: 'unique' }).then(function(users) {
  return users.get('firstObject');
}).then(function(user) {
  let id = user.get('id');
});
</pre> <p>This method returns a promise, which resolves with the found record.</p> <p>If the adapter returns no data for the primary data of the payload, then <code>queryRecord</code> resolves with <code>null</code>:</p> <pre class="highlight text " data-language="">// GET /users?username=unique
{
  data: null
}
</pre>
<pre class="highlight javascript " data-language="javascript">store.queryRecord('user', { username: 'unique' }).then(function(user) {
  console.log(user); // null
});
</pre> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  <dt>
<strong>query</strong> <code class="type">Any</code>
</dt> <dd> an opaque query to be used by the adapter </dd> </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">Promise</code> </dt>
<dd> promise which resolves with the found record or `null`</dd> </dl> </div>   <h2 id="method_recordForId">recordForId<span class="args"> (modelName, id) </span><code class="type"><a href="../ds.model/">DS.Model</a></code><span class="flag private">private</span>
</h2>    <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1078" target="_blank">addon/-private/system/store.js:1078</a> </p> <div class="description"> <p>Returns id record for a given type and ID. If one isn't already loaded, it builds a new record and leaves it in the <code>empty</code> state.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  <dt>
<strong>id</strong> <code class="type">(String|Integer)</code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type"><a href="../ds.model/">DS.Model</a></code> </dt>
<dd> record</dd> </dl> </div>   <h2 id="method_recordIsLoaded">recordIsLoaded<span class="args"> (modelName, id) </span><code class="type">Boolean</code><span class="flag deprecated">deprecated</span>
</h2>    <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1774" target="_blank">addon/-private/system/store.js:1774</a> </p> <div class="description"> <p>This method has been deprecated and is an alias for store.hasRecordForId, which should be used instead.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  <dt>
<strong>id</strong> <code class="type">String</code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">Boolean</code> </dt>
 </dl> </div>   <h2 id="method_recordWasError">recordWasError<span class="args"> (internalModel, error) </span><span class="flag private">private</span>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1916" target="_blank">addon/-private/system/store.js:1916</a> </p> <div class="description"> <p>This method is called once the promise returned by an adapter's <code>createRecord</code>, <code>updateRecord</code> or <code>deleteRecord</code> is rejected (with anything other than a <code>DS.InvalidError</code>).</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>internalModel</strong> <code class="type">InternalModel</code>
</dt>  <dt>
<strong>error</strong> <code class="type">Error</code>
</dt>  </dl> </div>   <h2 id="method_recordWasInvalid">recordWasInvalid<span class="args"> (internalModel, errors) </span><span class="flag private">private</span>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1902" target="_blank">addon/-private/system/store.js:1902</a> </p> <div class="description"> <p>This method is called once the promise returned by an adapter's <code>createRecord</code>, <code>updateRecord</code> or <code>deleteRecord</code> is rejected with a <code>DS.InvalidError</code>.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>internalModel</strong> <code class="type">InternalModel</code>
</dt>  <dt>
<strong>errors</strong> <code class="type">Object</code>
</dt>  </dl> </div>   <h2 id="method_reloadRecord">reloadRecord<span class="args"> (internalModel) </span><code class="type">Promise</code><span class="flag private">private</span>
</h2>    <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1024" target="_blank">addon/-private/system/store.js:1024</a> </p> <div class="description"> <p>This method is called by the record's <code>reload</code> method.</p> <p>This method calls the adapter's <code>find</code> method, which returns a promise. When <strong>that</strong> promise resolves, <code>reloadRecord</code> will resolve the promise returned by the record's <code>reload</code>.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>internalModel</strong> <code class="type"><a href="../ds.model/">DS.Model</a></code>
</dt>  </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type">Promise</code> </dt>
<dd> promise</dd> </dl> </div>   <h2 id="method_scheduleSave">scheduleSave<span class="args"> (internalModel, resolver, options) </span><span class="flag private">private</span>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1814" target="_blank">addon/-private/system/store.js:1814</a> </p> <div class="description"> <p>This method is called by <code>record.save</code>, and gets passed a resolver for the promise that <code>record.save</code> returns.</p> <p>It schedules saving to happen at the end of the run loop.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>internalModel</strong> <code class="type">InternalModel</code>
</dt>  <dt>
<strong>resolver</strong> <code class="type">Resolver</code>
</dt>  <dt>
<strong>options</strong> <code class="type">Object</code>
</dt>  </dl> </div>   <h2 id="method_serialize">serialize<span class="args"> (record, options) </span><span class="flag deprecated">deprecated</span><span class="flag private">private</span>
</h2>    <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L260" target="_blank">addon/-private/system/store.js:260</a> </p> <div class="description"> <p>Returns a JSON representation of the record using a custom type-specific serializer, if one exists.</p> <p>The available options are:</p> <ul> <li>
<code>includeId</code>: <code>true</code> if the record's ID should be included in the JSON representation</li> </ul> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>record</strong> <code class="type"><a href="../ds.model/">DS.Model</a></code>
</dt> <dd> the record to serialize </dd> <dt>
<strong>options</strong> <code class="type">Object</code>
</dt> <dd> an options hash </dd> </dl> </div>   <h2 id="method_serializerFor">serializerFor<span class="args"> (modelName) </span><code class="type"><a href="../ds.serializer/">DS.Serializer</a></code><span class="flag public">public</span>
</h2>    <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L2613" target="_blank">addon/-private/system/store.js:2613</a> </p> <div class="description"> <p>Returns an instance of the serializer for a given type. For example, <code>serializerFor('person')</code> will return an instance of <code>App.PersonSerializer</code>.</p> <p>If no <code>App.PersonSerializer</code> is found, this method will look for an <code>App.ApplicationSerializer</code> (the default serializer for your entire application).</p> <p>if no <code>App.ApplicationSerializer</code> is found, it will attempt to get the <code>defaultSerializer</code> from the <code>PersonAdapter</code> (<code>adapterFor('person')</code>).</p> <p>If a serializer cannot be found on the adapter, it will fall back to an instance of <code>DS.JSONSerializer</code>.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt> <dd> the record to serialize </dd> </dl> </div> <div class="return"> <h3>Returns:</h3> <dl> <dt>
<code class="type"><a href="../ds.serializer/">DS.Serializer</a></code> </dt>
 </dl> </div>   <h2 id="method_unloadAll">unloadAll<span class="args"> (modelName) </span>
</h2>  <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1662" target="_blank">addon/-private/system/store.js:1662</a> </p> <div class="description"> <p>This method unloads all records in the store. It schedules unloading to happen during the next run loop.</p> <p>Optionally you can pass a type which unload all records for a given type.</p> <pre class="highlight javascript " data-language="javascript">store.unloadAll();
store.unloadAll('post');
</pre> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>modelName</strong> <code class="type">String</code>
</dt>  </dl> </div>   <h2 id="method_unloadRecord">unloadRecord<span class="args"> (record) </span>
</h2>  <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L424" target="_blank">addon/-private/system/store.js:424</a> </p> <div class="description"> <p>For symmetry, a record can be unloaded via the store. Only non-dirty records can be unloaded.</p> <p>Example</p> <pre class="highlight javascript " data-language="javascript">store.findRecord('post', 1).then(function(post) {
  store.unloadRecord(post);
});
</pre> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>record</strong> <code class="type"><a href="../ds.model/">DS.Model</a></code>
</dt>  </dl> </div>   <h2 id="method_updateId">updateId<span class="args"> (internalModel, data) </span><span class="flag private">private</span>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L1930" target="_blank">addon/-private/system/store.js:1930</a> </p> <div class="description"> <p>When an adapter's <code>createRecord</code>, <code>updateRecord</code> or <code>deleteRecord</code> resolves with data, this method extracts the ID from the supplied data.</p> </div>  <div class="params"> <h3>Parameters:</h3> <dl> <dt>
<strong>internalModel</strong> <code class="type">InternalModel</code>
</dt>  <dt>
<strong>data</strong> <code class="type">Object</code>
</dt>  </dl> </div>     <h2 id="property_adapter">adapter<code class="type">{String}</code>
</h2>  <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L239" target="_blank">addon/-private/system/store.js:239</a> </p> <div class="description"> <p>The default adapter to use to communicate to a backend server or other persistence layer. This will be overridden by an application adapter if present.</p> <p>If you want to specify <code>app/adapters/custom.js</code> as a string, do:</p> <pre class="highlight js " data-language="js">import DS from 'ember-data';

export default DS.Store.extend({
  adapter: 'custom',
});
</pre> </div> <p> <strong>Default:</strong> <code>'-json-api'</code> </p>   <h2 id="property_defaultAdapter">defaultAdapter<span class="flag private">private</span>
</h2>   <p class="meta"> Defined in <a class="api-file-link" href="https://github.com/emberjs/data/tree/v2.12.0/addon/-private/system/store.js#L286" target="_blank">addon/-private/system/store.js:286</a> </p> <div class="description"> <p>This property returns the adapter, after resolving a possible string key.</p> <p>If the supplied <code>adapter</code> was a class, or a String property path resolved to a class, this property will instantiate the class.</p> <p>This property is cacheable, so the same instance of a specified adapter class should be used for the lifetime of the store.</p> </div>  <div class="return"> <h3>Returns:</h3> <dl> 
<dd> DS.Adapter</dd> </dl> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2017 Yehuda Katz, Tom Dale and Ember.js contributors<br>Licensed under the MIT License.<br>
    <a href="http://emberjs.com/api/data/classes/DS.Store.html" class="_attribution-link" target="_blank">http://emberjs.com/api/data/classes/DS.Store.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
