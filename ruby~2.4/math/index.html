
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Math - Ruby 2.4 - W3cubDocs</title>
  
  <meta name="description" content=" When mathn is required, the Math module changes as follows&#58; ">
  <meta name="keywords" content="module, math, -, ruby, ruby~2.4">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/ruby~2.4/math/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/ruby~2.4.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ruby~2.4/" class="_nav-link" title="" style="margin-left:0;">Ruby 2.4</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _rdoc">
				
<h1 id="module-Math" class="module"> module Math </h1> <section class="description"> <p>When mathn is required, the <a href="../math/">Math</a> module changes as follows:</p> <p>Standard <a href="../math/">Math</a> module behaviour:</p> <pre class="ruby" data-language="ruby">Math.sqrt(4/9)     # =&gt; 0.0
Math.sqrt(4.0/9.0) # =&gt; 0.666666666666667
Math.sqrt(- 4/9)   # =&gt; Errno::EDOM: Numerical argument out of domain - sqrt
</pre> <p>After require 'mathn', this is changed to:</p> <pre class="ruby" data-language="ruby">require 'mathn'
Math.sqrt(4/9)      # =&gt; 2/3
Math.sqrt(4.0/9.0)  # =&gt; 0.666666666666667
Math.sqrt(- 4/9)    # =&gt; Complex(0, 2/3)
</pre> <p>The <a href="../math/">Math</a> module contains module functions for basic trigonometric and transcendental functions. See class <a href="../float/">Float</a> for a list of constants that define Ruby's floating point accuracy.</p> <p>Domains and codomains are given only for real (not complex) numbers.</p> </section> <section id="5Buntitled-5D" class="documentation-section"> <section class="constants-list"> <header> <h3>Constants</h3> </header> <dl> <dt id="E">E </dt>
<dd>
<p>Definition of the mathematical constant <a href="../math/#E">E</a> (e) as a <a href="../float/">Float</a> number.</p> </dd>
<dt id="PI">PI </dt>
<dd>
<p>Definition of the mathematical constant <a href="../math/#PI">PI</a> as a <a href="../float/">Float</a> number.</p> </dd>
</dl> </section> <section id="public-class-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-c-acos"> <span class="method-callseq"> acos(x) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Computes the arc cosine of <code>x</code>. Returns 0..PI.</p> <p>Domain: [-1, 1]</p> <p>Codomain: [0, PI]</p> <pre class="ruby" data-language="ruby">Math.acos(0) == Math::PI/2  #=&gt; true
</pre> <div class="method-source-code" id="acos-source"> <pre class="c" data-language="c">static VALUE
math_acos(VALUE unused_obj, VALUE x)
{
    double d;

    d = Get_Double(x);
    /* check for domain error */
    if (d &lt; -1.0 || 1.0 &lt; d) domain_error("acos");
    return DBL2NUM(acos(d));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-acosh"> <span class="method-callseq"> acosh(x) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Computes the inverse hyperbolic cosine of <code>x</code>.</p> <p>Domain: [1, INFINITY)</p> <p>Codomain: [0, INFINITY)</p> <pre class="ruby" data-language="ruby">Math.acosh(1) #=&gt; 0.0
</pre> <div class="method-source-code" id="acosh-source"> <pre class="c" data-language="c">static VALUE
math_acosh(VALUE unused_obj, VALUE x)
{
    double d;

    d = Get_Double(x);
    /* check for domain error */
    if (d &lt; 1.0) domain_error("acosh");
    return DBL2NUM(acosh(d));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-asin"> <span class="method-callseq"> asin(x) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Computes the arc sine of <code>x</code>. Returns -PI/2..PI/2.</p> <p>Domain: [-1, -1]</p> <p>Codomain: [-PI/2, PI/2]</p> <pre class="ruby" data-language="ruby">Math.asin(1) == Math::PI/2  #=&gt; true
</pre> <div class="method-source-code" id="asin-source"> <pre class="c" data-language="c">static VALUE
math_asin(VALUE unused_obj, VALUE x)
{
    double d;

    d = Get_Double(x);
    /* check for domain error */
    if (d &lt; -1.0 || 1.0 &lt; d) domain_error("asin");
    return DBL2NUM(asin(d));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-asinh"> <span class="method-callseq"> asinh(x) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Computes the inverse hyperbolic sine of <code>x</code>.</p> <p>Domain: (-INFINITY, INFINITY)</p> <p>Codomain: (-INFINITY, INFINITY)</p> <pre class="ruby" data-language="ruby">Math.asinh(1) #=&gt; 0.881373587019543
</pre> <div class="method-source-code" id="asinh-source"> <pre class="c" data-language="c">static VALUE
math_asinh(VALUE unused_obj, VALUE x)
{
    return DBL2NUM(asinh(Get_Double(x)));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-atan"> <span class="method-callseq"> atan(x) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Computes the arc tangent of <code>x</code>. Returns -PI/2..PI/2.</p> <p>Domain: (-INFINITY, INFINITY)</p> <p>Codomain: (-PI/2, PI/2)</p> <pre class="ruby" data-language="ruby">Math.atan(0) #=&gt; 0.0
</pre> <div class="method-source-code" id="atan-source"> <pre class="c" data-language="c">static VALUE
math_atan(VALUE unused_obj, VALUE x)
{
    return DBL2NUM(atan(Get_Double(x)));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-atan2"> <span class="method-callseq"> atan2(y, x) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Computes the arc tangent given <code>y</code> and <code>x</code>. Returns a <a href="../float/">Float</a> in the range -PI..PI. Return value is a angle in radians between the positive x-axis of cartesian plane and the point given by the coordinates (<code>x</code>, <code>y</code>) on it.</p> <p>Domain: (-INFINITY, INFINITY)</p> <p>Codomain: [-PI, PI]</p> <pre class="ruby" data-language="ruby">Math.atan2(-0.0, -1.0) #=&gt; -3.141592653589793
Math.atan2(-1.0, -1.0) #=&gt; -2.356194490192345
Math.atan2(-1.0, 0.0)  #=&gt; -1.5707963267948966
Math.atan2(-1.0, 1.0)  #=&gt; -0.7853981633974483
Math.atan2(-0.0, 1.0)  #=&gt; -0.0
Math.atan2(0.0, 1.0)   #=&gt; 0.0
Math.atan2(1.0, 1.0)   #=&gt; 0.7853981633974483
Math.atan2(1.0, 0.0)   #=&gt; 1.5707963267948966
Math.atan2(1.0, -1.0)  #=&gt; 2.356194490192345
Math.atan2(0.0, -1.0)  #=&gt; 3.141592653589793
Math.atan2(INFINITY, INFINITY)   #=&gt; 0.7853981633974483
Math.atan2(INFINITY, -INFINITY)  #=&gt; 2.356194490192345
Math.atan2(-INFINITY, INFINITY)  #=&gt; -0.7853981633974483
Math.atan2(-INFINITY, -INFINITY) #=&gt; -2.356194490192345
</pre> <div class="method-source-code" id="atan2-source"> <pre class="c" data-language="c">static VALUE
math_atan2(VALUE unused_obj, VALUE y, VALUE x)
{
    double dx, dy;
    dx = Get_Double(x);
    dy = Get_Double(y);
    if (dx == 0.0 &amp;&amp; dy == 0.0) {
        if (!signbit(dx))
            return DBL2NUM(dy);
        if (!signbit(dy))
            return DBL2NUM(M_PI);
        return DBL2NUM(-M_PI);
    }
#ifndef ATAN2_INF_C99
    if (isinf(dx) &amp;&amp; isinf(dy)) {
        /* optimization for FLONUM */
        if (dx &lt; 0.0) {
            const double dz = (3.0 * M_PI / 4.0);
            return (dy &lt; 0.0) ? DBL2NUM(-dz) : DBL2NUM(dz);
        }
        else {
            const double dz = (M_PI / 4.0);
            return (dy &lt; 0.0) ? DBL2NUM(-dz) : DBL2NUM(dz);
        }
    }
#endif
    return DBL2NUM(atan2(dy, dx));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-atanh"> <span class="method-callseq"> atanh(x) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Computes the inverse hyperbolic tangent of <code>x</code>.</p> <p>Domain: (-1, 1)</p> <p>Codomain: (-INFINITY, INFINITY)</p> <pre class="ruby" data-language="ruby">Math.atanh(1) #=&gt; Infinity
</pre> <div class="method-source-code" id="atanh-source"> <pre class="c" data-language="c">static VALUE
math_atanh(VALUE unused_obj, VALUE x)
{
    double d;

    d = Get_Double(x);
    /* check for domain error */
    if (d &lt;  -1.0 || +1.0 &lt;  d) domain_error("atanh");
    /* check for pole error */
    if (d == -1.0) return DBL2NUM(-INFINITY);
    if (d == +1.0) return DBL2NUM(+INFINITY);
    return DBL2NUM(atanh(d));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-cbrt"> <span class="method-callseq"> cbrt(x) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns the cube root of <code>x</code>.</p> <p>Domain: (-INFINITY, INFINITY)</p> <p>Codomain: (-INFINITY, INFINITY)</p> <pre class="ruby" data-language="ruby">-9.upto(9) {|x|
  p [x, Math.cbrt(x), Math.cbrt(x)**3]
}
#=&gt; [-9, -2.0800838230519, -9.0]
#   [-8, -2.0, -8.0]
#   [-7, -1.91293118277239, -7.0]
#   [-6, -1.81712059283214, -6.0]
#   [-5, -1.7099759466767, -5.0]
#   [-4, -1.5874010519682, -4.0]
#   [-3, -1.44224957030741, -3.0]
#   [-2, -1.25992104989487, -2.0]
#   [-1, -1.0, -1.0]
#   [0, 0.0, 0.0]
#   [1, 1.0, 1.0]
#   [2, 1.25992104989487, 2.0]
#   [3, 1.44224957030741, 3.0]
#   [4, 1.5874010519682, 4.0]
#   [5, 1.7099759466767, 5.0]
#   [6, 1.81712059283214, 6.0]
#   [7, 1.91293118277239, 7.0]
#   [8, 2.0, 8.0]
#   [9, 2.0800838230519, 9.0]
</pre> <div class="method-source-code" id="cbrt-source"> <pre class="c" data-language="c">static VALUE
math_cbrt(VALUE unused_obj, VALUE x)
{
    return DBL2NUM(cbrt(Get_Double(x)));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-cos"> <span class="method-callseq"> cos(x) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Computes the cosine of <code>x</code> (expressed in radians). Returns a <a href="../float/">Float</a> in the range -1.0..1.0.</p> <p>Domain: (-INFINITY, INFINITY)</p> <p>Codomain: [-1, 1]</p> <pre class="ruby" data-language="ruby">Math.cos(Math::PI) #=&gt; -1.0
</pre> <div class="method-source-code" id="cos-source"> <pre class="c" data-language="c">static VALUE
math_cos(VALUE unused_obj, VALUE x)
{
    return DBL2NUM(cos(Get_Double(x)));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-cosh"> <span class="method-callseq"> cosh(x) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Computes the hyperbolic cosine of <code>x</code> (expressed in radians).</p> <p>Domain: (-INFINITY, INFINITY)</p> <p>Codomain: [1, INFINITY)</p> <pre class="ruby" data-language="ruby">Math.cosh(0) #=&gt; 1.0
</pre> <div class="method-source-code" id="cosh-source"> <pre class="c" data-language="c">static VALUE
math_cosh(VALUE unused_obj, VALUE x)
{
    return DBL2NUM(cosh(Get_Double(x)));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-erf"> <span class="method-callseq"> erf(x) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Calculates the error function of <code>x</code>.</p> <p>Domain: (-INFINITY, INFINITY)</p> <p>Codomain: (-1, 1)</p> <pre class="ruby" data-language="ruby">Math.erf(0) #=&gt; 0.0
</pre> <div class="method-source-code" id="erf-source"> <pre class="c" data-language="c">static VALUE
math_erf(VALUE unused_obj, VALUE x)
{
    return DBL2NUM(erf(Get_Double(x)));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-erfc"> <span class="method-callseq"> erfc(x) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Calculates the complementary error function of x.</p> <p>Domain: (-INFINITY, INFINITY)</p> <p>Codomain: (0, 2)</p> <pre class="ruby" data-language="ruby">Math.erfc(0) #=&gt; 1.0
</pre> <div class="method-source-code" id="erfc-source"> <pre class="c" data-language="c">static VALUE
math_erfc(VALUE unused_obj, VALUE x)
{
    return DBL2NUM(erfc(Get_Double(x)));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-exp"> <span class="method-callseq"> exp(x) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns e**x.</p> <p>Domain: (-INFINITY, INFINITY)</p> <p>Codomain: (0, INFINITY)</p> <pre class="ruby" data-language="ruby">Math.exp(0)       #=&gt; 1.0
Math.exp(1)       #=&gt; 2.718281828459045
Math.exp(1.5)     #=&gt; 4.4816890703380645
</pre> <div class="method-source-code" id="exp-source"> <pre class="c" data-language="c">static VALUE
math_exp(VALUE unused_obj, VALUE x)
{
    return DBL2NUM(exp(Get_Double(x)));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-frexp"> <span class="method-callseq"> frexp(x) → [fraction, exponent] </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns a two-element array containing the normalized fraction (a <a href="../float/">Float</a>) and exponent (an <a href="../integer/">Integer</a>) of <code>x</code>.</p> <pre class="ruby" data-language="ruby">fraction, exponent = Math.frexp(1234)   #=&gt; [0.6025390625, 11]
fraction * 2**exponent                  #=&gt; 1234.0
</pre> <div class="method-source-code" id="frexp-source"> <pre class="c" data-language="c">static VALUE
math_frexp(VALUE unused_obj, VALUE x)
{
    double d;
    int exp;

    d = frexp(Get_Double(x), &amp;exp);
    return rb_assoc_new(DBL2NUM(d), INT2NUM(exp));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-gamma"> <span class="method-callseq"> gamma(x) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Calculates the gamma function of x.</p> <p>Note that gamma(n) is same as fact(n-1) for integer n &gt; 0. However gamma(n) returns float and can be an approximation.</p> <pre class="ruby" data-language="ruby">def fact(n) (1..n).inject(1) {|r,i| r*i } end
1.upto(26) {|i| p [i, Math.gamma(i), fact(i-1)] }
#=&gt; [1, 1.0, 1]
#   [2, 1.0, 1]
#   [3, 2.0, 2]
#   [4, 6.0, 6]
#   [5, 24.0, 24]
#   [6, 120.0, 120]
#   [7, 720.0, 720]
#   [8, 5040.0, 5040]
#   [9, 40320.0, 40320]
#   [10, 362880.0, 362880]
#   [11, 3628800.0, 3628800]
#   [12, 39916800.0, 39916800]
#   [13, 479001600.0, 479001600]
#   [14, 6227020800.0, 6227020800]
#   [15, 87178291200.0, 87178291200]
#   [16, 1307674368000.0, 1307674368000]
#   [17, 20922789888000.0, 20922789888000]
#   [18, 355687428096000.0, 355687428096000]
#   [19, 6.402373705728e+15, 6402373705728000]
#   [20, 1.21645100408832e+17, 121645100408832000]
#   [21, 2.43290200817664e+18, 2432902008176640000]
#   [22, 5.109094217170944e+19, 51090942171709440000]
#   [23, 1.1240007277776077e+21, 1124000727777607680000]
#   [24, 2.5852016738885062e+22, 25852016738884976640000]
#   [25, 6.204484017332391e+23, 620448401733239439360000]
#   [26, 1.5511210043330954e+25, 15511210043330985984000000]
</pre> <div class="method-source-code" id="gamma-source"> <pre class="c" data-language="c">static VALUE
math_gamma(VALUE unused_obj, VALUE x)
{
    static const double fact_table[] = {
        /* fact(0) */ 1.0,
        /* fact(1) */ 1.0,
        /* fact(2) */ 2.0,
        /* fact(3) */ 6.0,
        /* fact(4) */ 24.0,
        /* fact(5) */ 120.0,
        /* fact(6) */ 720.0,
        /* fact(7) */ 5040.0,
        /* fact(8) */ 40320.0,
        /* fact(9) */ 362880.0,
        /* fact(10) */ 3628800.0,
        /* fact(11) */ 39916800.0,
        /* fact(12) */ 479001600.0,
        /* fact(13) */ 6227020800.0,
        /* fact(14) */ 87178291200.0,
        /* fact(15) */ 1307674368000.0,
        /* fact(16) */ 20922789888000.0,
        /* fact(17) */ 355687428096000.0,
        /* fact(18) */ 6402373705728000.0,
        /* fact(19) */ 121645100408832000.0,
        /* fact(20) */ 2432902008176640000.0,
        /* fact(21) */ 51090942171709440000.0,
        /* fact(22) */ 1124000727777607680000.0,
        /* fact(23)=25852016738884976640000 needs 56bit mantissa which is
         * impossible to represent exactly in IEEE 754 double which have
         * 53bit mantissa. */
    };
    enum {NFACT_TABLE = numberof(fact_table)};
    double d;
    d = Get_Double(x);
    /* check for domain error */
    if (isinf(d) &amp;&amp; signbit(d)) domain_error("gamma");
    if (d == floor(d)) {
        if (d &lt; 0.0) domain_error("gamma");
        if (1.0 &lt;= d &amp;&amp; d &lt;= (double)NFACT_TABLE) {
            return DBL2NUM(fact_table[(int)d - 1]);
        }
    }
    return DBL2NUM(tgamma(d));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-hypot"> <span class="method-callseq"> hypot(x, y) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns sqrt(x**2 + y**2), the hypotenuse of a right-angled triangle with sides <code>x</code> and <code>y</code>.</p> <pre class="ruby" data-language="ruby">Math.hypot(3, 4)   #=&gt; 5.0
</pre> <div class="method-source-code" id="hypot-source"> <pre class="c" data-language="c">static VALUE
math_hypot(VALUE unused_obj, VALUE x, VALUE y)
{
    return DBL2NUM(hypot(Get_Double(x), Get_Double(y)));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-ldexp"> <span class="method-callseq"> ldexp(fraction, exponent) → float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns the value of <code>fraction</code>*(2**<code>exponent</code>).</p> <pre class="ruby" data-language="ruby">fraction, exponent = Math.frexp(1234)
Math.ldexp(fraction, exponent)   #=&gt; 1234.0
</pre> <div class="method-source-code" id="ldexp-source"> <pre class="c" data-language="c">static VALUE
math_ldexp(VALUE unused_obj, VALUE x, VALUE n)
{
    return DBL2NUM(ldexp(Get_Double(x), NUM2INT(n)));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-lgamma"> <span class="method-callseq"> lgamma(x) → [float, -1 or 1] </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Calculates the logarithmic gamma of <code>x</code> and the sign of gamma of <code>x</code>.</p> <p><a href="../math/#method-c-lgamma">::lgamma</a> is same as</p> <pre class="ruby" data-language="ruby">[Math.log(Math.gamma(x).abs), Math.gamma(x) &lt; 0 ? -1 : 1]
</pre> <p>but avoid overflow by <a href="../math/#method-c-gamma">::gamma</a> for large x.</p> <pre class="ruby" data-language="ruby">Math.lgamma(0) #=&gt; [Infinity, 1]
</pre> <div class="method-source-code" id="lgamma-source"> <pre class="c" data-language="c">static VALUE
math_lgamma(VALUE unused_obj, VALUE x)
{
    double d;
    int sign=1;
    VALUE v;
    d = Get_Double(x);
    /* check for domain error */
    if (isinf(d)) {
        if (signbit(d)) domain_error("lgamma");
        return rb_assoc_new(DBL2NUM(INFINITY), INT2FIX(1));
    }
    v = DBL2NUM(lgamma_r(d, &amp;sign));
    return rb_assoc_new(v, INT2FIX(sign));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-log"> <span class="method-callseq"> log(x) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> log(x, base) → Float </span> </div> <div class="method-description"> <p>Returns the logarithm of <code>x</code>. If additional second argument is given, it will be the base of logarithm. Otherwise it is <code>e</code> (for the natural logarithm).</p> <p>Domain: (0, INFINITY)</p> <p>Codomain: (-INFINITY, INFINITY)</p> <pre class="ruby" data-language="ruby">Math.log(0)          #=&gt; -Infinity
Math.log(1)          #=&gt; 0.0
Math.log(Math::E)    #=&gt; 1.0
Math.log(Math::E**3) #=&gt; 3.0
Math.log(12, 3)      #=&gt; 2.2618595071429146
</pre> <div class="method-source-code" id="log-source"> <pre class="c" data-language="c">static VALUE
math_log(int argc, const VALUE *argv, VALUE unused_obj)
{
    VALUE x, base;
    double d;

    rb_scan_args(argc, argv, "11", &amp;x, &amp;base);
    d = math_log1(x);
    if (argc == 2) {
        d /= math_log1(base);
    }
    return DBL2NUM(d);
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-log10"> <span class="method-callseq"> log10(x) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns the base 10 logarithm of <code>x</code>.</p> <p>Domain: (0, INFINITY)</p> <p>Codomain: (-INFINITY, INFINITY)</p> <pre class="ruby" data-language="ruby">Math.log10(1)       #=&gt; 0.0
Math.log10(10)      #=&gt; 1.0
Math.log10(10**100) #=&gt; 100.0
</pre> <div class="method-source-code" id="log10-source"> <pre class="c" data-language="c">static VALUE
math_log10(VALUE unused_obj, VALUE x)
{
    size_t numbits;
    double d = get_double_rshift(x, &amp;numbits);

    /* check for domain error */
    if (d &lt; 0.0) domain_error("log10");
    /* check for pole error */
    if (d == 0.0) return DBL2NUM(-INFINITY);

    return DBL2NUM(log10(d) + numbits * M_LN2/M_LN10); /* log10(d * 2 ** numbits) */
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-log2"> <span class="method-callseq"> log2(x) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns the base 2 logarithm of <code>x</code>.</p> <p>Domain: (0, INFINITY)</p> <p>Codomain: (-INFINITY, INFINITY)</p> <pre class="ruby" data-language="ruby">Math.log2(1)      #=&gt; 0.0
Math.log2(2)      #=&gt; 1.0
Math.log2(32768)  #=&gt; 15.0
Math.log2(65536)  #=&gt; 16.0
</pre> <div class="method-source-code" id="log2-source"> <pre class="c" data-language="c">static VALUE
math_log2(VALUE unused_obj, VALUE x)
{
    size_t numbits;
    double d = get_double_rshift(x, &amp;numbits);

    /* check for domain error */
    if (d &lt; 0.0) domain_error("log2");
    /* check for pole error */
    if (d == 0.0) return DBL2NUM(-INFINITY);

    return DBL2NUM(log2(d) + numbits); /* log2(d * 2 ** numbits) */
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-rsqrt"> <span class="method-name">rsqrt</span><span class="method-args">(a)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Compute square root of a non negative number. This method is internally used by <code>Math.sqrt</code>.</p> <div class="method-source-code" id="rsqrt-source"> <pre class="ruby" data-language="ruby"># File lib/mathn.rb, line 119
def rsqrt(a)
  if a.kind_of?(Float)
    sqrt!(a)
  elsif a.kind_of?(Rational)
    rsqrt(a.numerator)/rsqrt(a.denominator)
  else
    src = a
    max = 2 ** 32
    byte_a = [src &amp; 0xffffffff]
    # ruby's bug
    while (src &gt;= max) and (src &gt;&gt;= 32)
      byte_a.unshift src &amp; 0xffffffff
    end

    answer = 0
    main = 0
    side = 0
    for elm in byte_a
      main = (main &lt;&lt; 32) + elm
      side &lt;&lt;= 16
      if answer != 0
        if main * 4  &lt; side * side
          applo = main.div(side)
        else
          applo = ((sqrt!(side * side + 4 * main) - side)/2.0).to_i + 1
        end
      else
        applo = sqrt!(main).to_i + 1
      end

      while (x = (side + applo) * applo) &gt; main
        applo -= 1
      end
      main -= x
      answer = (answer &lt;&lt; 16) + applo
      side += applo * 2
    end
    if main == 0
      answer
    else
      sqrt!(a)
    end
  end
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-sin"> <span class="method-callseq"> sin(x) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Computes the sine of <code>x</code> (expressed in radians). Returns a <a href="../float/">Float</a> in the range -1.0..1.0.</p> <p>Domain: (-INFINITY, INFINITY)</p> <p>Codomain: [-1, 1]</p> <pre class="ruby" data-language="ruby">Math.sin(Math::PI/2) #=&gt; 1.0
</pre> <div class="method-source-code" id="sin-source"> <pre class="c" data-language="c">static VALUE
math_sin(VALUE unused_obj, VALUE x)
{
    return DBL2NUM(sin(Get_Double(x)));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-sinh"> <span class="method-callseq"> sinh(x) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Computes the hyperbolic sine of <code>x</code> (expressed in radians).</p> <p>Domain: (-INFINITY, INFINITY)</p> <p>Codomain: (-INFINITY, INFINITY)</p> <pre class="ruby" data-language="ruby">Math.sinh(0) #=&gt; 0.0
</pre> <div class="method-source-code" id="sinh-source"> <pre class="c" data-language="c">static VALUE
math_sinh(VALUE unused_obj, VALUE x)
{
    return DBL2NUM(sinh(Get_Double(x)));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-sqrt"> <span class="method-name">sqrt</span><span class="method-args">(a)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Computes the square root of <code>a</code>. It makes use of <a href="../complex/">Complex</a> and <a href="../rational/">Rational</a> to have no rounding errors if possible.</p> <pre class="ruby" data-language="ruby">Math.sqrt(4/9)      # =&gt; 2/3
Math.sqrt(- 4/9)    # =&gt; Complex(0, 2/3)
Math.sqrt(4.0/9.0)  # =&gt; 0.666666666666667
</pre> <div class="method-source-code" id="sqrt-source"> <pre class="ruby" data-language="ruby"># File lib/mathn.rb, line 103
def sqrt(a)
  if a.kind_of?(Complex)
    sqrt!(a)
  elsif a.respond_to?(:nan?) and a.nan?
    a
  elsif a &gt;= 0
    rsqrt(a)
  else
    Complex(0,rsqrt(-a))
  end
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-tan"> <span class="method-callseq"> tan(x) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Computes the tangent of <code>x</code> (expressed in radians).</p> <p>Domain: (-INFINITY, INFINITY)</p> <p>Codomain: (-INFINITY, INFINITY)</p> <pre class="ruby" data-language="ruby">Math.tan(0) #=&gt; 0.0
</pre> <div class="method-source-code" id="tan-source"> <pre class="c" data-language="c">static VALUE
math_tan(VALUE unused_obj, VALUE x)
{
    return DBL2NUM(tan(Get_Double(x)));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-tanh"> <span class="method-callseq"> tanh(x) → Float </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Computes the hyperbolic tangent of <code>x</code> (expressed in radians).</p> <p>Domain: (-INFINITY, INFINITY)</p> <p>Codomain: (-1, 1)</p> <pre class="ruby" data-language="ruby">Math.tanh(0) #=&gt; 0.0
</pre> <div class="method-source-code" id="tanh-source"> <pre class="c" data-language="c">static VALUE
math_tanh(VALUE unused_obj, VALUE x)
{
    return DBL2NUM(tanh(Get_Double(x)));
}</pre> </div> </div> </div> </section> <section id="private-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Private Instance Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-i-rsqrt"> <span class="method-name">rsqrt</span><span class="method-args">(a)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Compute square root of a non negative number. This method is internally used by <code>Math.sqrt</code>.</p> <div class="method-source-code" id="rsqrt-source"> <pre class="ruby" data-language="ruby"># File lib/mathn.rb, line 119
def rsqrt(a)
  if a.kind_of?(Float)
    sqrt!(a)
  elsif a.kind_of?(Rational)
    rsqrt(a.numerator)/rsqrt(a.denominator)
  else
    src = a
    max = 2 ** 32
    byte_a = [src &amp; 0xffffffff]
    # ruby's bug
    while (src &gt;= max) and (src &gt;&gt;= 32)
      byte_a.unshift src &amp; 0xffffffff
    end

    answer = 0
    main = 0
    side = 0
    for elm in byte_a
      main = (main &lt;&lt; 32) + elm
      side &lt;&lt;= 16
      if answer != 0
        if main * 4  &lt; side * side
          applo = main.div(side)
        else
          applo = ((sqrt!(side * side + 4 * main) - side)/2.0).to_i + 1
        end
      else
        applo = sqrt!(main).to_i + 1
      end

      while (x = (side + applo) * applo) &gt; main
        applo -= 1
      end
      main -= x
      answer = (answer &lt;&lt; 16) + applo
      side += applo * 2
    end
    if main == 0
      answer
    else
      sqrt!(a)
    end
  end
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-sqrt"> <span class="method-name">sqrt</span><span class="method-args">(a)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Computes the square root of <code>a</code>. It makes use of <a href="../complex/">Complex</a> and <a href="../rational/">Rational</a> to have no rounding errors if possible.</p> <pre class="ruby" data-language="ruby">Math.sqrt(4/9)      # =&gt; 2/3
Math.sqrt(- 4/9)    # =&gt; Complex(0, 2/3)
Math.sqrt(4.0/9.0)  # =&gt; 0.666666666666667
</pre> <div class="method-source-code" id="sqrt-source"> <pre class="ruby" data-language="ruby"># File lib/mathn.rb, line 103
def sqrt(a)
  if a.kind_of?(Complex)
    sqrt!(a)
  elsif a.respond_to?(:nan?) and a.nan?
    a
  elsif a &gt;= 0
    rsqrt(a)
  else
    Complex(0,rsqrt(-a))
  end
end</pre> </div> </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    Ruby Core © 1993–2016 Yukihiro Matsumoto<br>Licensed under the Ruby License.<br>Ruby Standard Library © contributors<br>Licensed under their own licenses.<br>
    
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
