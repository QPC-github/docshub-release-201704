
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>ActionController&#58;&#58;Parameters - Ruby on Rails 5.0 - W3cubDocs</title>
  
  <meta name="description" content="Allows you to choose which attributes should be whitelisted for mass updating and thus prevent accidentally exposing that which shouldn&#39;t be &hellip;">
  <meta name="keywords" content="class, actioncontroller, parameters, -, ruby, on, rails, rails~5.0">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/rails~5.0/actioncontroller/parameters/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/rails~5.0.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/rails~5.0/" class="_nav-link" title="" style="margin-left:0;">Ruby on Rails 5.0</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _rdoc">
				
<h1 id="class-ActionController::Parameters" class="class"> class ActionController::Parameters </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent"><a href="../../object/">Object</a></dd>
</dl> <section class="description"> <h2 id="class-ActionController::Parameters-label-Action+Controller+Parameters">Action Controller Parameters</h2> <p>Allows you to choose which attributes should be whitelisted for mass updating and thus prevent accidentally exposing that which shouldn't be exposed. Provides two methods for this purpose: <a href="../parameters/#method-i-require">require</a> and <a href="../parameters/#method-i-permit">permit</a>. The former is used to mark parameters as required. The latter is used to set the parameter as permitted and limit which attributes should be allowed for mass updating.</p> <pre class="ruby" data-language="ruby">params = ActionController::Parameters.new({
  person: {
    name: 'Francesco',
    age:  22,
    role: 'admin'
  }
})

permitted = params.require(:person).permit(:name, :age)
permitted            # =&gt; &lt;ActionController::Parameters {"name"=&gt;"Francesco", "age"=&gt;22} permitted: true&gt;
permitted.permitted? # =&gt; true

Person.first.update!(permitted)
# =&gt; #&lt;Person id: 1, name: "Francesco", age: 22, role: "user"&gt;
</pre> <p>It provides two options that controls the top-level behavior of new instances:</p> <ul>
<li> <p><code>permit_all_parameters</code> - If it's <code>true</code>, all the parameters will be permitted by default. The default is <code>false</code>.</p> </li>
<li> <p><code>action_on_unpermitted_parameters</code> - Allow to control the behavior when parameters that are not explicitly permitted are found. The values can be <code>:log</code> to write a message on the logger or <code>:raise</code> to raise <a href="../unpermittedparameters/">ActionController::UnpermittedParameters</a> exception. The default value is <code>:log</code> in test and development environments, <code>false</code> otherwise.</p> </li>
</ul> <p>Examples:</p> <pre class="ruby" data-language="ruby">params = ActionController::Parameters.new
params.permitted? # =&gt; false

ActionController::Parameters.permit_all_parameters = true

params = ActionController::Parameters.new
params.permitted? # =&gt; true

params = ActionController::Parameters.new(a: "123", b: "456")
params.permit(:c)
# =&gt; &lt;ActionController::Parameters {} permitted: true&gt;

ActionController::Parameters.action_on_unpermitted_parameters = :raise

params = ActionController::Parameters.new(a: "123", b: "456")
params.permit(:c)
# =&gt; ActionController::UnpermittedParameters: found unpermitted keys: a, b
</pre> <p>Please note that these options *are not thread-safe*. In a multi-threaded environment they should only be set once at boot-time and never mutated at runtime.</p> <p>You can fetch values of <code>ActionController::Parameters</code> using either <code>:key</code> or <code>"key"</code>.</p> <pre class="ruby" data-language="ruby">params = ActionController::Parameters.new(key: 'value')
params[:key]  # =&gt; "value"
params["key"] # =&gt; "value"
</pre> </section> <section id="5Buntitled-5D" class="documentation-section"> <section class="constants-list"> <header> <h3>Constants</h3> </header> <dl> <dt id="EMPTY_ARRAY">EMPTY_ARRAY </dt>

<dt id="PERMITTED_SCALAR_TYPES">PERMITTED_SCALAR_TYPES </dt>
<dd>
<p>This is a white list of permitted scalar types that includes the ones supported in XML and JSON requests.</p> <p>This list is in particular used to filter ordinary requests, <a href="../../string/">String</a> goes as first element to quickly short-circuit the common case.</p> <p>If you modify this collection please update the <a href="../api/">API</a> of <code>permit</code> above.</p> </dd>
</dl> </section> <section class="attribute-method-details"> <header> <h3>Attributes</h3> </header> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-i-parameters"> <span class="method-name">parameters</span><span class="attribute-access-type">[R]</span> </div>  </div> </section> <section id="public-class-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-c-new"> <span class="method-name">new</span><span class="method-args">(parameters = {})</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns a new instance of <code>ActionController::Parameters</code>. Also, sets the <code>permitted</code> attribute to the default value of <code>ActionController::Parameters.permit_all_parameters</code>.</p> <pre class="ruby" data-language="ruby">class Person &lt; ActiveRecord::Base
end

params = ActionController::Parameters.new(name: 'Francesco')
params.permitted?  # =&gt; false
Person.new(params) # =&gt; ActiveModel::ForbiddenAttributesError

ActionController::Parameters.permit_all_parameters = true

params = ActionController::Parameters.new(name: 'Francesco')
params.permitted?  # =&gt; true
Person.new(params) # =&gt; #&lt;Person id: nil, name: "Francesco"&gt;
</pre> <div class="method-source-code" id="new-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 142
def initialize(parameters = {})
  @parameters = parameters.with_indifferent_access
  @permitted = self.class.permit_all_parameters
end</pre> </div> </div> </div> </section> <section id="public-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-i-3D-3D"> <span class="method-name">==</span><span class="method-args">(other)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns true if another <code>Parameters</code> object contains the same content and permitted flag.</p> <div class="method-source-code" id="3D-3D-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 149
    def ==(other)
      if other.respond_to?(:permitted?)
        self.permitted? == other.permitted? &amp;&amp; self.parameters == other.parameters
      elsif other.is_a?(Hash)
        ActiveSupport::Deprecation.warn "          Comparing equality between `ActionController::Parameters` and a
          `Hash` is deprecated and will be removed in Rails 5.1. Please only do
          comparisons between instances of `ActionController::Parameters`. If
          you need to compare to a hash, first convert it using
          `ActionController::Parameters#new`.
".squish
        @parameters == other.with_indifferent_access
      else
        @parameters == other
      end
    end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-5B-5D"> <span class="method-name">[]</span><span class="method-args">(key)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns a parameter for the given <code>key</code>. If not found, returns <code>nil</code>.</p> <pre class="ruby" data-language="ruby">params = ActionController::Parameters.new(person: { name: 'Francesco' })
params[:person] # =&gt; &lt;ActionController::Parameters {"name"=&gt;"Francesco"} permitted: false&gt;
params[:none]   # =&gt; nil
</pre> <div class="method-source-code" id="5B-5D-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 408
def [](key)
  convert_hashes_to_parameters(key, @parameters[key])
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-5B-5D-3D"> <span class="method-name">[]=</span><span class="method-args">(key, value)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Assigns a value to a given <code>key</code>. The given key may still get filtered out when <code>permit</code> is called.</p> <div class="method-source-code" id="5B-5D-3D-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 414
def []=(key, value)
  @parameters[key] = value
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-converted_arrays"> <span class="method-name">converted_arrays</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Attribute that keeps track of converted arrays, if any, to avoid double looping in the common use case permit + mass-assignment. Defined in a method to instantiate it only if needed.</p> <p><span>Testing</span> membership still loops, but it's going to be faster than our own loop that converts values. Also, we are not going to build a new array object per fetch.</p> <div class="method-source-code" id="converted_arrays-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 216
def converted_arrays
  @converted_arrays ||= Set.new
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-deep_dup"> <span class="method-name">deep_dup</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns duplicate of object including all parameters</p> <div class="method-source-code" id="deep_dup-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 651
def deep_dup
  self.class.new(@parameters.deep_dup).tap do |duplicate|
    duplicate.permitted = @permitted
  end
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-delete"> <span class="method-name">delete</span><span class="method-args">(key)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Deletes and returns a key-value pair from <code>Parameters</code> whose key is equal to key. If the key is not found, returns the default value. If the optional code block is given and the key is not found, pass in the key and return the result of block.</p> <div class="method-source-code" id="delete-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 539
def delete(key)
  convert_value_to_parameters(@parameters.delete(key))
end</pre> </div> </div> </div> <div class="method-detail method-alias"> <div class="method-heading" id="method-i-delete_if"> <span class="method-name">delete_if</span><span class="method-args">(&amp;block)</span> </div>  <div class="aliases"> Alias for: <a href="../parameters/#method-i-reject-21">reject!</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-dig"> <span class="method-name">dig</span><span class="method-args">(*keys)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Extracts the nested parameter from the given <code>keys</code> by calling <code>dig</code> at each step. Returns <code>nil</code> if any intermediate step is <code>nil</code>.</p> <p>params = <a href="../parameters/#method-c-new">::new</a>(foo: { bar: { baz: 1 } }) params.dig(:foo, :bar, :baz) # =&gt; 1 params.dig(:foo, :zot, :xyz) # =&gt; nil</p> <p>params2 = <a href="../parameters/#method-c-new">::new</a>(foo: [10, 11, 12]) params2.dig(:foo, 1) # =&gt; 11</p> <div class="method-source-code" id="dig-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 451
def dig(*keys)
  convert_value_to_parameters(@parameters.dig(*keys))
end</pre> </div> </div> </div> <div class="method-detail method-alias"> <div class="method-heading" id="method-i-each"> <span class="method-name">each</span><span class="method-args">(&amp;block)</span> </div>  <div class="aliases"> Alias for: <a href="../parameters/#method-i-each_pair">each_pair</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-each_pair"> <span class="method-name">each_pair</span><span class="method-args">() { |key, convert_hashes_to_parameters(key, value)| ... }</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Convert all hashes in values into parameters, then yield each pair in the same way as <code>Hash#each_pair</code></p> <div class="method-source-code" id="each_pair-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 202
def each_pair(&amp;block)
  @parameters.each_pair do |key, value|
    yield key, convert_hashes_to_parameters(key, value)
  end
end</pre> </div> </div> <div class="aliases"> Also aliased as: <a href="../parameters/#method-i-each">each</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-except"> <span class="method-name">except</span><span class="method-args">(*keys)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns a new <code>ActionController::Parameters</code> instance that filters out the given <code>keys</code>.</p> <pre class="ruby" data-language="ruby">params = ActionController::Parameters.new(a: 1, b: 2, c: 3)
params.except(:a, :b) # =&gt; &lt;ActionController::Parameters {"c"=&gt;3} permitted: false&gt;
params.except(:d)     # =&gt; &lt;ActionController::Parameters {"a"=&gt;1, "b"=&gt;2, "c"=&gt;3} permitted: false&gt;
</pre> <div class="method-source-code" id="except-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 480
def except(*keys)
  new_instance_with_inherited_permitted_status(@parameters.except(*keys))
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-extract-21"> <span class="method-name">extract!</span><span class="method-args">(*keys)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Removes and returns the key/value pairs matching the given keys.</p> <pre class="ruby" data-language="ruby">params = ActionController::Parameters.new(a: 1, b: 2, c: 3)
params.extract!(:a, :b) # =&gt; &lt;ActionController::Parameters {"a"=&gt;1, "b"=&gt;2} permitted: false&gt;
params                  # =&gt; &lt;ActionController::Parameters {"c"=&gt;3} permitted: false&gt;
</pre> <div class="method-source-code" id="extract-21-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 489
def extract!(*keys)
  new_instance_with_inherited_permitted_status(@parameters.extract!(*keys))
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-fetch"> <span class="method-name">fetch</span><span class="method-args">(key, *args) { || ... }</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns a parameter for the given <code>key</code>. If the <code>key</code> can't be found, there are several options: With no other arguments, it will raise an <code>ActionController::ParameterMissing</code> error; if more arguments are given, then that will be returned; if a block is given, then that will be run and its result returned.</p> <pre class="ruby" data-language="ruby">params = ActionController::Parameters.new(person: { name: 'Francesco' })
params.fetch(:person)               # =&gt; &lt;ActionController::Parameters {"name"=&gt;"Francesco"} permitted: false&gt;
params.fetch(:none)                 # =&gt; ActionController::ParameterMissing: param is missing or the value is empty: none
params.fetch(:none, 'Francesco')    # =&gt; "Francesco"
params.fetch(:none) { 'Francesco' } # =&gt; "Francesco"
</pre> <div class="method-source-code" id="fetch-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 429
def fetch(key, *args)
  convert_value_to_parameters(
    @parameters.fetch(key) {
      if block_given?
        yield
      else
        args.fetch(0) { raise ActionController::ParameterMissing.new(key) }
      end
    }
  )
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-inspect"> <span class="method-name">inspect</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <div class="method-source-code" id="inspect-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 597
def inspect
  "&lt;#{self.class} #{@parameters} permitted: #{@permitted}&gt;"
end</pre> </div> </div> </div> <div class="method-detail method-alias"> <div class="method-heading" id="method-i-keep_if"> <span class="method-name">keep_if</span><span class="method-args">(&amp;block)</span> </div>  <div class="aliases"> Alias for: <a href="../parameters/#method-i-select-21">select!</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-merge"> <span class="method-name">merge</span><span class="method-args">(other_hash)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns a new <code>ActionController::Parameters</code> with all keys from <code>other_hash</code> merges into current hash.</p> <div class="method-source-code" id="merge-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 577
def merge(other_hash)
  new_instance_with_inherited_permitted_status(
    @parameters.merge(other_hash.to_h)
  )
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-merge-21"> <span class="method-name">merge!</span><span class="method-args">(other_hash)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns current <code>ActionController::Parameters</code> instance which <code>other_hash</code> merges into current hash.</p> <div class="method-source-code" id="merge-21-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 585
def merge!(other_hash)
  @parameters.merge!(other_hash.to_h)
  self
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-method_missing"> <span class="method-name">method_missing</span><span class="method-args">(method_sym, *args, &amp;block)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <div class="method-calls-super"> Calls superclass method </div> <div class="method-source-code" id="method_missing-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 632
    def method_missing(method_sym, *args, &amp;block)
      if @parameters.respond_to?(method_sym)
        message = "          Method #{method_sym} is deprecated and will be removed in Rails 5.1,
          as `ActionController::Parameters` no longer inherits from
          hash. Using this deprecated behavior exposes potential security
          problems. If you continue to use this method you may be creating
          a security vulnerability in your app that can be exploited. Instead,
          consider using one of these documented methods which are not
          deprecated: http://api.rubyonrails.org/v#{ActionPack.version}/classes/ActionController/Parameters.html
".squish
        ActiveSupport::Deprecation.warn(message)
        @parameters.public_send(method_sym, *args, &amp;block)
      else
        super
      end
    end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-permit"> <span class="method-name">permit</span><span class="method-args">(*filters)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns a new <code>ActionController::Parameters</code> instance that includes only the given <code>filters</code> and sets the <code>permitted</code> attribute for the object to <code>true</code>. This is useful for limiting which attributes should be allowed for mass updating.</p> <pre class="ruby" data-language="ruby">params = ActionController::Parameters.new(user: { name: 'Francesco', age: 22, role: 'admin' })
permitted = params.require(:user).permit(:name, :age)
permitted.permitted?      # =&gt; true
permitted.has_key?(:name) # =&gt; true
permitted.has_key?(:age)  # =&gt; true
permitted.has_key?(:role) # =&gt; false
</pre> <p>Only permitted scalars pass the filter. For example, given</p> <pre class="ruby" data-language="ruby">params.permit(:name)
</pre> <p><code>:name</code> passes if it is a key of <code>params</code> whose associated value is of type <code>String</code>, <code>Symbol</code>, <code>NilClass</code>, <code>Numeric</code>, <code>TrueClass</code>, <code>FalseClass</code>, <code>Date</code>, <code>Time</code>, <code>DateTime</code>, <code>StringIO</code>, <code>IO</code>, <code>ActionDispatch::Http::UploadedFile</code> or <code>Rack::Test::UploadedFile</code>. Otherwise, the key <code>:name</code> is filtered out.</p> <p>You may declare that the parameter should be an array of permitted scalars by mapping it to an empty array:</p> <pre class="ruby" data-language="ruby">params = ActionController::Parameters.new(tags: ['rails', 'parameters'])
params.permit(tags: [])
</pre> <p>You can also use <code>permit</code> on nested parameters, like:</p> <pre class="ruby" data-language="ruby">params = ActionController::Parameters.new({
  person: {
    name: 'Francesco',
    age:  22,
    pets: [{
      name: 'Purplish',
      category: 'dogs'
    }]
  }
})

permitted = params.permit(person: [ :name, { pets: :name } ])
permitted.permitted?                    # =&gt; true
permitted[:person][:name]               # =&gt; "Francesco"
permitted[:person][:age]                # =&gt; nil
permitted[:person][:pets][0][:name]     # =&gt; "Purplish"
permitted[:person][:pets][0][:category] # =&gt; nil
</pre> <p>Note that if you use <code>permit</code> in a key that points to a hash, it won't allow all the hash. You also need to specify which attributes inside the hash should be whitelisted.</p> <pre class="ruby" data-language="ruby">params = ActionController::Parameters.new({
  person: {
    contact: {
      email: 'none@test.com',
      phone: '555-1234'
    }
  }
})

params.require(:person).permit(:contact)
# =&gt; &lt;ActionController::Parameters {} permitted: true&gt;

params.require(:person).permit(contact: :phone)
# =&gt; &lt;ActionController::Parameters {"contact"=&gt;&lt;ActionController::Parameters {"phone"=&gt;"555-1234"} permitted: true&gt;} permitted: true&gt;

params.require(:person).permit(contact: [ :email, :phone ])
# =&gt; &lt;ActionController::Parameters {"contact"=&gt;&lt;ActionController::Parameters {"email"=&gt;"none@test.com", "phone"=&gt;"555-1234"} permitted: true&gt;} permitted: true&gt;
</pre> <div class="method-source-code" id="permit-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 385
def permit(*filters)
  params = self.class.new

  filters.flatten.each do |filter|
    case filter
    when Symbol, String
      permitted_scalar_filter(params, filter)
    when Hash then
      hash_filter(params, filter)
    end
  end

  unpermitted_parameters!(params) if self.class.action_on_unpermitted_parameters

  params.permit!
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-permit-21"> <span class="method-name">permit!</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Sets the <code>permitted</code> attribute to <code>true</code>. This can be used to pass mass assignment. Returns <code>self</code>.</p> <pre class="ruby" data-language="ruby">class Person &lt; ActiveRecord::Base
end

params = ActionController::Parameters.new(name: 'Francesco')
params.permitted?  # =&gt; false
Person.new(params) # =&gt; ActiveModel::ForbiddenAttributesError
params.permit!
params.permitted?  # =&gt; true
Person.new(params) # =&gt; #&lt;Person id: nil, name: "Francesco"&gt;
</pre> <div class="method-source-code" id="permit-21-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 242
def permit!
  each_pair do |key, value|
    Array.wrap(value).each do |v|
      v.permit! if v.respond_to? :permit!
    end
  end

  @permitted = true
  self
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-permitted-3F"> <span class="method-name">permitted?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns <code>true</code> if the parameter is permitted, <code>false</code> otherwise.</p> <pre class="ruby" data-language="ruby">params = ActionController::Parameters.new
params.permitted? # =&gt; false
params.permit!
params.permitted? # =&gt; true
</pre> <div class="method-source-code" id="permitted-3F-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 226
def permitted?
  @permitted
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-reject"> <span class="method-name">reject</span><span class="method-args">(&amp;block)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns a new instance of <code>ActionController::Parameters</code> with items that the block evaluates to true removed.</p> <div class="method-source-code" id="reject-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 558
def reject(&amp;block)
  new_instance_with_inherited_permitted_status(@parameters.reject(&amp;block))
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-reject-21"> <span class="method-name">reject!</span><span class="method-args">(&amp;block)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Removes items that the block evaluates to true and returns self.</p> <div class="method-source-code" id="reject-21-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 563
def reject!(&amp;block)
  @parameters.reject!(&amp;block)
  self
end</pre> </div> </div> <div class="aliases"> Also aliased as: <a href="../parameters/#method-i-delete_if">delete_if</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-require"> <span class="method-name">require</span><span class="method-args">(key)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>This method accepts both a single key and an array of keys.</p> <p>When passed a single key, if it exists and its associated value is either present or the singleton <code>false</code>, returns said value:</p> <pre class="ruby" data-language="ruby">ActionController::Parameters.new(person: { name: 'Francesco' }).require(:person)
# =&gt; &lt;ActionController::Parameters {"name"=&gt;"Francesco"} permitted: false&gt;
</pre> <p>Otherwise raises <code>ActionController::ParameterMissing</code>:</p> <pre class="ruby" data-language="ruby">ActionController::Parameters.new.require(:person)
# ActionController::ParameterMissing: param is missing or the value is empty: person

ActionController::Parameters.new(person: nil).require(:person)
# ActionController::ParameterMissing: param is missing or the value is empty: person

ActionController::Parameters.new(person: "\t").require(:person)
# ActionController::ParameterMissing: param is missing or the value is empty: person

ActionController::Parameters.new(person: {}).require(:person)
# ActionController::ParameterMissing: param is missing or the value is empty: person
</pre> <p>When given an array of keys, the method tries to require each one of them in order. If it succeeds, an array with the respective return values is returned:</p> <pre>params = ActionController::Parameters.new(user: { ... }, profile: { ... })
user_params, profile_params = params.require([:user, :profile])</pre> <p>Otherwise, the method re-raises the first exception found:</p> <pre class="ruby" data-language="ruby">params = ActionController::Parameters.new(user: {}, profile: {})
user_params, profile_params = params.require([:user, :profile])
# ActionController::ParameterMissing: param is missing or the value is empty: user
</pre> <p>Technically this method can be used to fetch terminal values:</p> <pre class="ruby" data-language="ruby"># CAREFUL
params = ActionController::Parameters.new(person: { name: 'Finn' })
name = params.require(:person).require(:name) # CAREFUL
</pre> <p>but take into account that at some point those ones have to be permitted:</p> <pre class="ruby" data-language="ruby">def person_params
  params.require(:person).permit(:name).tap do |person_params|
    person_params.require(:name) # SAFER
  end
end
</pre> <p>for example.</p> <div class="method-source-code" id="require-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 303
def require(key)
  return key.map { |k| require(k) } if key.is_a?(Array)
  value = self[key]
  if value.present? || value == false
    value
  else
    raise ParameterMissing.new(key)
  end
end</pre> </div> </div> <div class="aliases"> Also aliased as: <a href="../parameters/#method-i-required">required</a> </div> </div> <div class="method-detail method-alias"> <div class="method-heading" id="method-i-required"> <span class="method-name">required</span><span class="method-args">(key)</span> </div> <div class="method-description"> <p>Alias of <a href="../parameters/#method-i-require">require</a>.</p> </div> <div class="aliases"> Alias for: <a href="../parameters/#method-i-require">require</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-select"> <span class="method-name">select</span><span class="method-args">(&amp;block)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns a new instance of <code>ActionController::Parameters</code> with only items that the block evaluates to true.</p> <div class="method-source-code" id="select-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 545
def select(&amp;block)
  new_instance_with_inherited_permitted_status(@parameters.select(&amp;block))
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-select-21"> <span class="method-name">select!</span><span class="method-args">(&amp;block)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Equivalent to Hash#keep_if, but returns nil if no changes were made.</p> <div class="method-source-code" id="select-21-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 550
def select!(&amp;block)
  @parameters.select!(&amp;block)
  self
end</pre> </div> </div> <div class="aliases"> Also aliased as: <a href="../parameters/#method-i-keep_if">keep_if</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-slice"> <span class="method-name">slice</span><span class="method-args">(*keys)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns a new <code>ActionController::Parameters</code> instance that includes only the given <code>keys</code>. If the given <code>keys</code> don't exist, returns an empty hash.</p> <pre class="ruby" data-language="ruby">params = ActionController::Parameters.new(a: 1, b: 2, c: 3)
params.slice(:a, :b) # =&gt; &lt;ActionController::Parameters {"a"=&gt;1, "b"=&gt;2} permitted: false&gt;
params.slice(:d)     # =&gt; &lt;ActionController::Parameters {} permitted: false&gt;
</pre> <div class="method-source-code" id="slice-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 463
def slice(*keys)
  new_instance_with_inherited_permitted_status(@parameters.slice(*keys))
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-slice-21"> <span class="method-name">slice!</span><span class="method-args">(*keys)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns current <code>ActionController::Parameters</code> instance which contains only the given <code>keys</code>.</p> <div class="method-source-code" id="slice-21-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 469
def slice!(*keys)
  @parameters.slice!(*keys)
  self
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-to_h"> <span class="method-name">to_h</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns a safe <code>ActiveSupport::HashWithIndifferentAccess</code> representation of this parameter with all unpermitted keys removed.</p> <pre class="ruby" data-language="ruby">params = ActionController::Parameters.new({
  name: 'Senjougahara Hitagi',
  oddity: 'Heavy stone crab'
})
params.to_h # =&gt; {}

safe_params = params.permit(:name)
safe_params.to_h # =&gt; {"name"=&gt;"Senjougahara Hitagi"}
</pre> <div class="method-source-code" id="to_h-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 177
def to_h
  if permitted?
    convert_parameters_to_hashes(@parameters, :to_h)
  else
    slice(*self.class.always_permitted_parameters).permit!.to_h
  end
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-to_unsafe_h"> <span class="method-name">to_unsafe_h</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns an unsafe, unfiltered <code>ActiveSupport::HashWithIndifferentAccess</code> representation of this parameter.</p> <pre class="ruby" data-language="ruby">params = ActionController::Parameters.new({
  name: 'Senjougahara Hitagi',
  oddity: 'Heavy stone crab'
})
params.to_unsafe_h
# =&gt; {"name"=&gt;"Senjougahara Hitagi", "oddity" =&gt; "Heavy stone crab"}
</pre> <div class="method-source-code" id="to_unsafe_h-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 195
def to_unsafe_h
  convert_parameters_to_hashes(@parameters, :to_unsafe_h)
end</pre> </div> </div> <div class="aliases"> Also aliased as: <a href="../parameters/#method-i-to_unsafe_hash">to_unsafe_hash</a> </div> </div> <div class="method-detail method-alias"> <div class="method-heading" id="method-i-to_unsafe_hash"> <span class="method-name">to_unsafe_hash</span><span class="method-args">()</span> </div>  <div class="aliases"> Alias for: <a href="../parameters/#method-i-to_unsafe_h">to_unsafe_h</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-transform_keys"> <span class="method-name">transform_keys</span><span class="method-args">(&amp;block)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns a new <code>ActionController::Parameters</code> instance with the results of running <code>block</code> once for every key. The values are unchanged.</p> <div class="method-source-code" id="transform_keys-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 518
def transform_keys(&amp;block)
  if block
    new_instance_with_inherited_permitted_status(
      @parameters.transform_keys(&amp;block)
    )
  else
    @parameters.transform_keys
  end
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-transform_keys-21"> <span class="method-name">transform_keys!</span><span class="method-args">(&amp;block)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Performs keys transformation and returns the altered <code>ActionController::Parameters</code> instance.</p> <div class="method-source-code" id="transform_keys-21-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 530
def transform_keys!(&amp;block)
  @parameters.transform_keys!(&amp;block)
  self
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-transform_values"> <span class="method-name">transform_values</span><span class="method-args">(&amp;block)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns a new <code>ActionController::Parameters</code> with the results of running <code>block</code> once for every value. The keys are unchanged.</p> <pre class="ruby" data-language="ruby">params = ActionController::Parameters.new(a: 1, b: 2, c: 3)
params.transform_values { |x| x * 2 }
# =&gt; &lt;ActionController::Parameters {"a"=&gt;2, "b"=&gt;4, "c"=&gt;6} permitted: false&gt;
</pre> <div class="method-source-code" id="transform_values-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 499
def transform_values(&amp;block)
  if block
    new_instance_with_inherited_permitted_status(
      @parameters.transform_values(&amp;block)
    )
  else
    @parameters.transform_values
  end
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-transform_values-21"> <span class="method-name">transform_values!</span><span class="method-args">(&amp;block)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Performs values transformation and returns the altered <code>ActionController::Parameters</code> instance.</p> <div class="method-source-code" id="transform_values-21-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 511
def transform_values!(&amp;block)
  @parameters.transform_values!(&amp;block)
  self
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-values_at"> <span class="method-name">values_at</span><span class="method-args">(*keys)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns values that were assigned to the given <code>keys</code>. Note that all the <code>Hash</code> objects will be converted to <code>ActionController::Parameters</code>.</p> <div class="method-source-code" id="values_at-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 571
def values_at(*keys)
  convert_value_to_parameters(@parameters.values_at(*keys))
end</pre> </div> </div> </div> </section> <section id="protected-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Protected Instance Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-i-fields_for_style-3F"> <span class="method-name">fields_for_style?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <div class="method-source-code" id="fields_for_style-3F-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 664
def fields_for_style?
  @parameters.all? { |k, v| k =~ /\A-?\d+\z/ &amp;&amp; (v.is_a?(Hash) || v.is_a?(Parameters)) }
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-permitted-3D"> <span class="method-name">permitted=</span><span class="method-args">(new_permitted)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <div class="method-source-code" id="permitted-3D-source"> <pre class="ruby" data-language="ruby"># File actionpack/lib/action_controller/metal/strong_parameters.rb, line 660
def permitted=(new_permitted)
  @permitted = new_permitted
end</pre> </div> </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    © 2004–2017 David Heinemeier Hansson<br>Licensed under the MIT License.<br>
    
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
