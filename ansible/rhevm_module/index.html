
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Rhevm - Ansible - W3cubDocs</title>
  
  <meta name="description" content=" New in version 2.2. ">
  <meta name="keywords" content="rhevm, -, rhev, ovirt, automation, ansible">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/ansible/rhevm_module/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/ansible.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible/" class="_nav-link" title="" style="margin-left:0;">Ansible</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _sphinx">
				
<h1 id="rhevm">rhevm - RHEV/oVirt automation</h1> <div class="versionadded" id="rhevm-rhev-ovirt-automation"> <p><span class="versionmodified">New in version 2.2.</span></p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements-on-host-that-executes-module" id="id2">Requirements (on host that executes module)</a></li> <li><a class="reference internal" href="#options" id="id3">Options</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> <li><a class="reference internal" href="#this-is-an-extras-module" id="id6">This is an Extras Module</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <p>Allows you to create/remove/update or powermanage virtual machines on a RHEV/oVirt platform.</p>   <h2 id="requirements-on-host-that-executes-module">Requirements (on host that executes module)</h2>  <ul class="simple"> <li>ovirtsdk</li> </ul>    <h2 id="options">Options</h2> <table> <tr> <th class="head">parameter</th> <th class="head">required</th> <th class="head">default</th> <th class="head">choices</th> <th class="head">comments</th> </tr> <tr> <td>boot_order<br>
</td> <td>no</td> <td>[u'network', u'hd']</td> <td></td> <td><div>This option uses complex arguments and is a list of items that specify the bootorder.</div></td>
</tr> <tr> <td>cd_drive<br>
</td> <td>no</td> <td></td> <td></td> <td><div>The CD you wish to have mounted on the VM when <em>state = 'CD'</em>.</div></td>
</tr> <tr> <td>cluster<br>
</td> <td>no</td> <td></td> <td></td> <td><div>The rhev/ovirt cluster in which you want you VM to start.</div></td>
</tr> <tr> <td>cpu_share<br>
</td> <td>no</td> <td>0</td> <td></td> <td><div>This parameter is used to configure the cpu share.</div></td>
</tr> <tr> <td>datacenter<br>
</td> <td>no</td> <td>Default</td> <td></td> <td><div>The rhev/ovirt datacenter in which you want you VM to start.</div></td>
</tr> <tr> <td>del_prot<br>
</td> <td>no</td> <td>True</td> <td></td> <td><div>This option sets the delete protection checkbox.</div></td>
</tr> <tr> <td>disks<br>
</td> <td>no</td> <td></td> <td></td> <td><div>This option uses complex arguments and is a list of disks with the options name, size and domain.</div></td>
</tr> <tr> <td>ifaces<br>
</td> <td>no</td> <td></td> <td></td> <td>
<div>This option uses complex arguments and is a list of interfaces with the options name and vlan.</div> <div style="font-size: small;">aliases: nics, interfaces
</div>
</td>
</tr> <tr> <td>image<br>
</td> <td>no</td> <td></td> <td></td> <td><div>The template to use for the VM.</div></td>
</tr> <tr> <td>insecure_api<br>
</td> <td>no</td> <td></td> <td></td> <td><div>A boolean switch to make a secure or insecure connection to the server.</div></td>
</tr> <tr> <td>mempol<br>
</td> <td>no</td> <td>1</td> <td></td> <td><div>The minimum amount of memory you wish to reserve for this system.</div></td>
</tr> <tr> <td>name<br>
</td> <td>no</td> <td></td> <td></td> <td><div>The name of the VM.</div></td>
</tr> <tr> <td>osver<br>
</td> <td>no</td> <td>rhel_6x64</td> <td></td> <td><div>The operationsystem option in RHEV/oVirt.</div></td>
</tr> <tr> <td>port<br>
</td> <td>no</td> <td>443</td> <td></td> <td><div>The port on which the API is reacheable.</div></td>
</tr> <tr> <td>server<br>
</td> <td>no</td> <td>127.0.0.1</td> <td></td> <td><div>The name/ip of your RHEV-m/oVirt instance.</div></td>
</tr> <tr> <td>state<br>
</td> <td>no</td> <td>present</td> <td><ul>
<li>ping</li>
<li>present</li>
<li>absent</li>
<li>up</li>
<li>down</li>
<li>restarted</li>
<li>cd</li>
<li>info</li>
</ul></td> <td><div>This serves to create/remove/update or powermanage your VM.</div></td>
</tr> <tr> <td>timeout<br>
</td> <td>no</td> <td></td> <td></td> <td>
<div>The timeout you wish to define for power actions.</div>
<div>When <em>state = 'up'</em>
</div>
<div>When <em>state = 'down'</em>
</div>
<div>When <em>state = 'restarted'</em>
</div>
</td>
</tr> <tr> <td>type<br>
</td> <td>no</td> <td>server</td> <td><ul>
<li>server</li>
<li>desktop</li>
<li>host</li>
</ul></td> <td><div>To define if the VM is a server or desktop.</div></td>
</tr> <tr> <td>user<br>
</td> <td>no</td> <td><a class="__cf_email__" href="https://docs.ansible.com/cdn-cgi/l/email-protection" data-cfemail="bfdedbd2d6d1ffd6d1cbdacdd1ded3" target="_blank">[email protected]</a></td> <td></td> <td><div>The user to authenticate with.</div></td>
</tr> <tr> <td>vm_ha<br>
</td> <td>no</td> <td>True</td> <td></td> <td><div>To make your VM High Available.</div></td>
</tr> <tr> <td>vmcpu<br>
</td> <td>no</td> <td>2</td> <td></td> <td><div>The number of CPUs you want in your VM.</div></td>
</tr> <tr> <td>vmhost<br>
</td> <td>no</td> <td></td> <td></td> <td><div>The host you wish your VM to run on.</div></td>
</tr> <tr> <td>vmmem<br>
</td> <td>no</td> <td>1</td> <td></td> <td><div>The amount of memory you want your VM to use (in GB).</div></td>
</tr> </table>   <h2 id="examples">Examples</h2>  <pre data-language="yaml"># basic get info from VM
  action: rhevm
  args:
      name: "demo"
      user: "{{ rhev.admin.name }}"
      password: "{{ rhev.admin.pass }}"
      server: "rhevm01"
      state: "info"

# basic create example from image
  action: rhevm
  args:
      name: "demo"
      user: "{{ rhev.admin.name }}"
      password: "{{ rhev.admin.pass }}"
      server: "rhevm01"
      state: "present"
      image: "centos7_x64"
      cluster: "centos"

# power management
  action: rhevm
  args:
      name: "uptime_server"
      user: "{{ rhev.admin.name }}"
      password: "{{ rhev.admin.pass }}"
      server: "rhevm01"
      cluster: "RH"
      state: "down"
      image: "centos7_x64"
      cluster: "centos

# multi disk, multi nic create example
  action: rhevm
  args:
      name: "server007"
      user: "{{ rhev.admin.name }}"
      password: "{{ rhev.admin.pass }}"
      server: "rhevm01"
      cluster: "RH"
      state: "present"
      type: "server"
      vmcpu: 4
      vmmem: 2
      ifaces:
        - name: "eth0"
          vlan: "vlan2202"
        - name: "eth1"
          vlan: "vlan36"
        - name: "eth2"
          vlan: "vlan38"
        - name: "eth3"
          vlan: "vlan2202"
      disks:
        - name: "root"
          size: 10
          domain: "ssd-san"
        - name: "swap"
          size: 10
          domain: "15kiscsi-san"
        - name: "opt"
          size: 10
          domain: "15kiscsi-san"
        - name: "var"
          size: 10
          domain: "10kiscsi-san"
        - name: "home"
          size: 10
          domain: "sata-san"
      boot_order:
        - "network"
        - "hd"

# add a CD to the disk cd_drive
  action: rhevm
  args:
    name: 'server007'
    user: "{{ rhev.admin.name }}"
    password: "{{ rhev.admin.pass }}"
    state: 'cd'
    cd_drive: 'rhev-tools-setup.iso'

# new host deployment + host network configuration
  action: rhevm
  args:
    name: "ovirt_node007"
    password: "{{ rhevm.admin.pass }}"
    type: "host"
    state: present
    cluster: "rhevm01"
    ifaces:
        - name: em1
        - name: em2
        - name: p3p1
          ip: '172.31.224.200'
          netmask: '255.255.254.0'
        - name: p3p2
          ip: '172.31.225.200'
          netmask: '255.255.254.0'
        - name: bond0
          bond:
            - em1
            - em2
          network: 'rhevm'
          ip: '172.31.222.200'
          netmask: '255.255.255.0'
          management: True
        - name: bond0.36
          network: 'vlan36'
          ip: '10.2.36.200'
          netmask: '255.255.254.0'
          gateway: '10.2.36.254'
        - name: bond0.2202
          network: 'vlan2202'
        - name: bond0.38
          network: 'vlan38'
</pre>    <h2 id="return-values">Return Values</h2> <p>Common return values are documented here <a class="reference internal" href="../common_return_values/"><span class="doc">Common Return Values</span></a>, the following are the fields unique to this module:</p> <table> <tr> <th class="head">name</th> <th class="head">description</th> <th class="head">returned</th> <th class="head">type</th> <th class="head">sample</th> </tr> <tr> <td> vm </td> <td> Returns all of the VMs variables and execution. </td> <td align="center"> always </td> <td align="center"> dict </td> <td align="center"> { "boot_order": [ "hd", "network" ], "changed": true, "changes": [ "Delete Protection" ], "cluster": "C1", "cpu_share": "0", "created": false, "datacenter": "Default", "del_prot": true, "disks": [ { "domain": "ssd-san", "name": "OS", "size": 40 } ], "eth0": "00:00:5E:00:53:00", "eth1": "00:00:5E:00:53:01", "eth2": "00:00:5E:00:53:02", "exists": true, "failed": false, "ifaces": [ { "name": "eth0", "vlan": "Management" }, { "name": "eth1", "vlan": "Internal" }, { "name": "eth2", "vlan": "External" } ], "image": false, "mempol": "0", "msg": [ "VM exists", "cpu_share was already set to 0", "VM high availability was already set to True", "The boot order has already been set", "VM delete protection has been set to True", "Disk web2_Disk0_OS already exists", "The VM starting host was already set to host416" ], "name": "web2", "type": "server", "uuid": "4ba5a1be-e60b-4368-9533-920f156c817b", "vm_ha": true, "vmcpu": "4", "vmhost": "host416", "vmmem": "16" } </td> </tr> </table>   <h2 id="this-is-an-extras-module">This is an Extras Module</h2> <p>For more information on what this means please read <a class="reference internal" href="../modules_extra/"><span class="doc">Extras Modules</span></a></p> <p>For help in developing on modules, should you be so inclined, please read <a class="reference internal" href="https://docs.ansible.com/ansible/community.html" target="_blank"><span class="doc">Community Information &amp; Contributing</span></a>, <span class="xref doc">developing_test_pr</span> and <a class="reference internal" href="../developing_modules/"><span class="doc">Developing Modules</span></a>.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2016 Michael DeHaan<br>© 2016 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/rhevm_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/rhevm_module.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
