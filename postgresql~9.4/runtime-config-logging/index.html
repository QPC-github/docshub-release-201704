
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Server Configuration&#58; Error Reporting and Logging - PostgreSQL 9.4 - W3cubDocs</title>
  
  <meta name="description" content="PostgreSQL supports several methods for logging server messages, including stderr, csvlog and syslog. On Windows, eventlog is also supported. Set &hellip;">
  <meta name="keywords" content="error, reporting, and, logging, server, configuration, -, postgresql, postgresql~9.4">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/postgresql~9.4/runtime-config-logging/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/postgresql~9.4.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/postgresql~9.4/" class="_nav-link" title="" style="margin-left:0;">PostgreSQL 9.4</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _postgres">
				
<h1 class="SECT1" id="RUNTIME-CONFIG-LOGGING">18.8. Error Reporting and Logging</h1> <div class="SECT2"> <h2 class="SECT2" id="RUNTIME-CONFIG-LOGGING-WHERE">18.8.1. Where To Log</h2> <div class="VARIABLELIST"> <dl> <dt id="GUC-LOG-DESTINATION">
<code class="VARNAME">log_destination</code> (<code class="TYPE">string</code>)</dt> <dd> <p><span class="PRODUCTNAME">PostgreSQL</span> supports several methods for logging server messages, including <span class="SYSTEMITEM">stderr</span>, <span class="SYSTEMITEM">csvlog</span> and <span class="SYSTEMITEM">syslog</span>. On Windows, <span class="SYSTEMITEM">eventlog</span> is also supported. Set this parameter to a list of desired log destinations separated by commas. The default is to log to <span class="SYSTEMITEM">stderr</span> only. This parameter can only be set in the <code class="FILENAME">postgresql.conf</code> file or on the server command line.</p> <p>If <span class="SYSTEMITEM">csvlog</span> is included in <code class="VARNAME">log_destination</code>, log entries are output in <span class="QUOTE">"comma separated value"</span> (<acronym class="ACRONYM">CSV</acronym>) format, which is convenient for loading logs into programs. See <a href="../runtime-config-logging/#RUNTIME-CONFIG-LOGGING-CSVLOG"> Section 18.8.4</a> for details. <a href="../runtime-config-logging/#GUC-LOGGING-COLLECTOR">logging_collector</a> must be enabled to generate CSV-format log output.</p>  <blockquote class="NOTE"> <p><b>Note:</b> On most Unix systems, you will need to alter the configuration of your system's <span class="APPLICATION">syslog</span> daemon in order to make use of the <span class="SYSTEMITEM">syslog</span> option for <code class="VARNAME">log_destination</code>. <span class="PRODUCTNAME">PostgreSQL</span> can log to <span class="APPLICATION">syslog</span> facilities <code class="LITERAL">LOCAL0</code> through <code class="LITERAL">LOCAL7</code> (see <a href="../runtime-config-logging/#GUC-SYSLOG-FACILITY">syslog_facility</a>), but the default <span class="APPLICATION">syslog</span> configuration on most platforms will discard all such messages. You will need to add something like:</p> <pre class="PROGRAMLISTING" data-language="sql">
local0.*    /var/log/postgresql
</pre> <p>to the <span class="APPLICATION">syslog</span> daemon's configuration file to make it work.</p> <p>On Windows, when you use the <code class="LITERAL">eventlog</code> option for <code class="VARNAME">log_destination</code>, you should register an event source and its library with the operating system so that the Windows Event Viewer can display event log messages cleanly. See <a href="../event-log-registration/">Section 17.11</a> for details.</p> </blockquote>  </dd> <dt id="GUC-LOGGING-COLLECTOR">
<code class="VARNAME">logging_collector</code> (<code class="TYPE">boolean</code>)</dt> <dd> <p>This parameter enables the <i class="FIRSTTERM">logging collector</i>, which is a background process that captures log messages sent to <span class="SYSTEMITEM">stderr</span> and redirects them into log files. This approach is often more useful than logging to <span class="APPLICATION">syslog</span>, since some types of messages might not appear in <span class="APPLICATION">syslog</span> output. (One common example is dynamic-linker failure messages; another is error messages produced by scripts such as <code class="VARNAME">archive_command</code>.) This parameter can only be set at server start.</p>  <blockquote class="NOTE"> <p><b>Note:</b> It is possible to log to <span class="SYSTEMITEM">stderr</span> without using the logging collector; the log messages will just go to wherever the server's <span class="SYSTEMITEM">stderr</span> is directed. However, that method is only suitable for low log volumes, since it provides no convenient way to rotate log files. Also, on some platforms not using the logging collector can result in lost or garbled log output, because multiple processes writing concurrently to the same log file can overwrite each other's output.</p> </blockquote>   <blockquote class="NOTE"> <p><b>Note:</b> The logging collector is designed to never lose messages. This means that in case of extremely high load, server processes could be blocked while trying to send additional log messages when the collector has fallen behind. In contrast, <span class="APPLICATION">syslog</span> prefers to drop messages if it cannot write them, which means it may fail to log some messages in such cases but it will not block the rest of the system.</p> </blockquote>  </dd> <dt id="GUC-LOG-DIRECTORY">
<code class="VARNAME">log_directory</code> (<code class="TYPE">string</code>)</dt> <dd> <p>When <code class="VARNAME">logging_collector</code> is enabled, this parameter determines the directory in which log files will be created. It can be specified as an absolute path, or relative to the cluster data directory. This parameter can only be set in the <code class="FILENAME">postgresql.conf</code> file or on the server command line. The default is <code class="LITERAL">pg_log</code>.</p> </dd> <dt id="GUC-LOG-FILENAME">
<code class="VARNAME">log_filename</code> (<code class="TYPE">string</code>)</dt> <dd> <p>When <code class="VARNAME">logging_collector</code> is enabled, this parameter sets the file names of the created log files. The value is treated as a <code class="FUNCTION">strftime</code> pattern, so <code class="LITERAL">%</code>-escapes can be used to specify time-varying file names. (Note that if there are any time-zone-dependent <code class="LITERAL">%</code>-escapes, the computation is done in the zone specified by <a href="../runtime-config-logging/#GUC-LOG-TIMEZONE">log_timezone</a>.) The supported <code class="LITERAL">%</code>-escapes are similar to those listed in the Open Group's <a href="http://pubs.opengroup.org/onlinepubs/009695399/functions/strftime.html" target="_blank">strftime</a> specification. Note that the system's <span class="SYSTEMITEM">strftime</span> is not used directly, so platform-specific (nonstandard) extensions do not work. The default is <code class="LITERAL">postgresql-%Y-%m-%d_%H%M%S.log</code>.</p> <p>If you specify a file name without escapes, you should plan to use a log rotation utility to avoid eventually filling the entire disk. In releases prior to 8.4, if no <code class="LITERAL">%</code> escapes were present, <span class="PRODUCTNAME">PostgreSQL</span> would append the epoch of the new log file's creation time, but this is no longer the case.</p> <p>If CSV-format output is enabled in <code class="VARNAME">log_destination</code>, <code class="LITERAL">.csv</code> will be appended to the timestamped log file name to create the file name for CSV-format output. (If <code class="VARNAME">log_filename</code> ends in <code class="LITERAL">.log</code>, the suffix is replaced instead.)</p> <p>This parameter can only be set in the <code class="FILENAME">postgresql.conf</code> file or on the server command line.</p> </dd> <dt id="GUC-LOG-FILE-MODE">
<code class="VARNAME">log_file_mode</code> (<code class="TYPE">integer</code>)</dt> <dd> <p>On Unix systems this parameter sets the permissions for log files when <code class="VARNAME">logging_collector</code> is enabled. (On Microsoft Windows this parameter is ignored.) The parameter value is expected to be a numeric mode specified in the format accepted by the <code class="FUNCTION">chmod</code> and <code class="FUNCTION">umask</code> system calls. (To use the customary octal format the number must start with a <code class="LITERAL">0</code> (zero).)</p> <p>The default permissions are <code class="LITERAL">0600</code>, meaning only the server owner can read or write the log files. The other commonly useful setting is <code class="LITERAL">0640</code>, allowing members of the owner's group to read the files. Note however that to make use of such a setting, you'll need to alter <a href="../runtime-config-logging/#GUC-LOG-DIRECTORY">log_directory</a> to store the files somewhere outside the cluster data directory. In any case, it's unwise to make the log files world-readable, since they might contain sensitive data.</p> <p>This parameter can only be set in the <code class="FILENAME">postgresql.conf</code> file or on the server command line.</p> </dd> <dt id="GUC-LOG-ROTATION-AGE">
<code class="VARNAME">log_rotation_age</code> (<code class="TYPE">integer</code>)</dt> <dd> <p>When <code class="VARNAME">logging_collector</code> is enabled, this parameter determines the maximum lifetime of an individual log file. After this many minutes have elapsed, a new log file will be created. Set to zero to disable time-based creation of new log files. This parameter can only be set in the <code class="FILENAME">postgresql.conf</code> file or on the server command line.</p> </dd> <dt id="GUC-LOG-ROTATION-SIZE">
<code class="VARNAME">log_rotation_size</code> (<code class="TYPE">integer</code>)</dt> <dd> <p>When <code class="VARNAME">logging_collector</code> is enabled, this parameter determines the maximum size of an individual log file. After this many kilobytes have been emitted into a log file, a new log file will be created. Set to zero to disable size-based creation of new log files. This parameter can only be set in the <code class="FILENAME">postgresql.conf</code> file or on the server command line.</p> </dd> <dt id="GUC-LOG-TRUNCATE-ON-ROTATION">
<code class="VARNAME">log_truncate_on_rotation</code> (<code class="TYPE">boolean</code>)</dt> <dd> <p>When <code class="VARNAME">logging_collector</code> is enabled, this parameter will cause <span class="PRODUCTNAME">PostgreSQL</span> to truncate (overwrite), rather than append to, any existing log file of the same name. However, truncation will occur only when a new file is being opened due to time-based rotation, not during server startup or size-based rotation. When off, pre-existing files will be appended to in all cases. For example, using this setting in combination with a <code class="VARNAME">log_filename</code> like <code class="LITERAL">postgresql-%H.log</code> would result in generating twenty-four hourly log files and then cyclically overwriting them. This parameter can only be set in the <code class="FILENAME">postgresql.conf</code> file or on the server command line.</p> <p>Example: To keep 7 days of logs, one log file per day named <code class="LITERAL">server_log.Mon</code>, <code class="LITERAL">server_log.Tue</code>, etc, and automatically overwrite last week's log with this week's log, set <code class="VARNAME">log_filename</code> to <code class="LITERAL">server_log.%a</code>, <code class="VARNAME">log_truncate_on_rotation</code> to <code class="LITERAL">on</code>, and <code class="VARNAME">log_rotation_age</code> to <code class="LITERAL">1440</code>.</p> <p>Example: To keep 24 hours of logs, one log file per hour, but also rotate sooner if the log file size exceeds 1GB, set <code class="VARNAME">log_filename</code> to <code class="LITERAL">server_log.%H%M</code>, <code class="VARNAME">log_truncate_on_rotation</code> to <code class="LITERAL">on</code>, <code class="VARNAME">log_rotation_age</code> to <code class="LITERAL">60</code>, and <code class="VARNAME">log_rotation_size</code> to <code class="LITERAL">1000000</code>. Including <code class="LITERAL">%M</code> in <code class="VARNAME">log_filename</code> allows any size-driven rotations that might occur to select a file name different from the hour's initial file name.</p> </dd> <dt id="GUC-SYSLOG-FACILITY">
<code class="VARNAME">syslog_facility</code> (<code class="TYPE">enum</code>)</dt> <dd> <p>When logging to <span class="APPLICATION">syslog</span> is enabled, this parameter determines the <span class="APPLICATION">syslog</span> <span class="QUOTE">"facility"</span> to be used. You can choose from <code class="LITERAL">LOCAL0</code>, <code class="LITERAL">LOCAL1</code>, <code class="LITERAL">LOCAL2</code>, <code class="LITERAL">LOCAL3</code>, <code class="LITERAL">LOCAL4</code>, <code class="LITERAL">LOCAL5</code>, <code class="LITERAL">LOCAL6</code>, <code class="LITERAL">LOCAL7</code>; the default is <code class="LITERAL">LOCAL0</code>. See also the documentation of your system's <span class="APPLICATION">syslog</span> daemon. This parameter can only be set in the <code class="FILENAME">postgresql.conf</code> file or on the server command line.</p> </dd> <dt id="GUC-SYSLOG-IDENT">
<code class="VARNAME">syslog_ident</code> (<code class="TYPE">string</code>)</dt> <dd> <p>When logging to <span class="APPLICATION">syslog</span> is enabled, this parameter determines the program name used to identify <span class="PRODUCTNAME">PostgreSQL</span> messages in <span class="APPLICATION">syslog</span> logs. The default is <code class="LITERAL">postgres</code>. This parameter can only be set in the <code class="FILENAME">postgresql.conf</code> file or on the server command line.</p> </dd> <dt id="GUC-EVENT-SOURCE">
<code class="VARNAME">event_source</code> (<code class="TYPE">string</code>)</dt> <dd> <p>When logging to <span class="APPLICATION">event log</span> is enabled, this parameter determines the program name used to identify <span class="PRODUCTNAME">PostgreSQL</span> messages in the log. The default is <code class="LITERAL">PostgreSQL</code>. This parameter can only be set in the <code class="FILENAME">postgresql.conf</code> file or on the server command line.</p> </dd> </dl> </div> </div> <div class="SECT2"> <h2 class="SECT2" id="RUNTIME-CONFIG-LOGGING-WHEN">18.8.2. When To Log</h2> <div class="VARIABLELIST"> <dl> <dt id="GUC-CLIENT-MIN-MESSAGES">
<code class="VARNAME">client_min_messages</code> (<code class="TYPE">enum</code>)</dt> <dd> <p>Controls which message levels are sent to the client. Valid values are <code class="LITERAL">DEBUG5</code>, <code class="LITERAL">DEBUG4</code>, <code class="LITERAL">DEBUG3</code>, <code class="LITERAL">DEBUG2</code>, <code class="LITERAL">DEBUG1</code>, <code class="LITERAL">LOG</code>, <code class="LITERAL">NOTICE</code>, <code class="LITERAL">WARNING</code>, <code class="LITERAL">ERROR</code>, <code class="LITERAL">FATAL</code>, and <code class="LITERAL">PANIC</code>. Each level includes all the levels that follow it. The later the level, the fewer messages are sent. The default is <code class="LITERAL">NOTICE</code>. Note that <code class="LITERAL">LOG</code> has a different rank here than in <code class="VARNAME">log_min_messages</code>.</p> </dd> <dt id="GUC-LOG-MIN-MESSAGES">
<code class="VARNAME">log_min_messages</code> (<code class="TYPE">enum</code>)</dt> <dd> <p>Controls which message levels are written to the server log. Valid values are <code class="LITERAL">DEBUG5</code>, <code class="LITERAL">DEBUG4</code>, <code class="LITERAL">DEBUG3</code>, <code class="LITERAL">DEBUG2</code>, <code class="LITERAL">DEBUG1</code>, <code class="LITERAL">INFO</code>, <code class="LITERAL">NOTICE</code>, <code class="LITERAL">WARNING</code>, <code class="LITERAL">ERROR</code>, <code class="LITERAL">LOG</code>, <code class="LITERAL">FATAL</code>, and <code class="LITERAL">PANIC</code>. Each level includes all the levels that follow it. The later the level, the fewer messages are sent to the log. The default is <code class="LITERAL">WARNING</code>. Note that <code class="LITERAL">LOG</code> has a different rank here than in <code class="VARNAME">client_min_messages</code>. Only superusers can change this setting.</p> </dd> <dt id="GUC-LOG-MIN-ERROR-STATEMENT">
<code class="VARNAME">log_min_error_statement</code> (<code class="TYPE">enum</code>)</dt> <dd> <p>Controls which SQL statements that cause an error condition are recorded in the server log. The current SQL statement is included in the log entry for any message of the specified severity or higher. Valid values are <code class="LITERAL">DEBUG5</code>, <code class="LITERAL">DEBUG4</code>, <code class="LITERAL">DEBUG3</code>, <code class="LITERAL">DEBUG2</code>, <code class="LITERAL">DEBUG1</code>, <code class="LITERAL">INFO</code>, <code class="LITERAL">NOTICE</code>, <code class="LITERAL">WARNING</code>, <code class="LITERAL">ERROR</code>, <code class="LITERAL">LOG</code>, <code class="LITERAL">FATAL</code>, and <code class="LITERAL">PANIC</code>. The default is <code class="LITERAL">ERROR</code>, which means statements causing errors, log messages, fatal errors, or panics will be logged. To effectively turn off logging of failing statements, set this parameter to <code class="LITERAL">PANIC</code>. Only superusers can change this setting.</p> </dd> <dt id="GUC-LOG-MIN-DURATION-STATEMENT">
<code class="VARNAME">log_min_duration_statement</code> (<code class="TYPE">integer</code>)</dt> <dd> <p>Causes the duration of each completed statement to be logged if the statement ran for at least the specified number of milliseconds. Setting this to zero prints all statement durations. Minus-one (the default) disables logging statement durations. For example, if you set it to <code class="LITERAL">250ms</code> then all SQL statements that run 250ms or longer will be logged. Enabling this parameter can be helpful in tracking down unoptimized queries in your applications. Only superusers can change this setting.</p> <p>For clients using extended query protocol, durations of the Parse, Bind, and Execute steps are logged independently.</p>  <blockquote class="NOTE"> <p><b>Note:</b> When using this option together with <a href="../runtime-config-logging/#GUC-LOG-STATEMENT">log_statement</a>, the text of statements that are logged because of <code class="VARNAME">log_statement</code> will not be repeated in the duration log message. If you are not using <span class="APPLICATION">syslog</span>, it is recommended that you log the PID or session ID using <a href="../runtime-config-logging/#GUC-LOG-LINE-PREFIX">log_line_prefix</a> so that you can link the statement message to the later duration message using the process ID or session ID.</p> </blockquote>  </dd> </dl> </div> <p><a href="../runtime-config-logging/#RUNTIME-CONFIG-SEVERITY-LEVELS">Table 18-1</a> explains the message severity levels used by <span class="PRODUCTNAME">PostgreSQL</span>. If logging output is sent to <span class="SYSTEMITEM">syslog</span> or Windows' <span class="SYSTEMITEM">eventlog</span>, the severity levels are translated as shown in the table.</p> <div class="TABLE" id="RUNTIME-CONFIG-SEVERITY-LEVELS">  <p class="c2">Table 18-1. Message Severity Levels</p> <table class="CALSTABLE"> <col> <col> <col> <col> <thead> <tr> <th>Severity</th> <th>Usage</th> <th><span class="SYSTEMITEM">syslog</span></th> <th><span class="SYSTEMITEM">eventlog</span></th> </tr> </thead> <tbody> <tr> <td><code class="LITERAL">DEBUG1..DEBUG5</code></td> <td>Provides successively-more-detailed information for use by developers.</td> <td><code class="LITERAL">DEBUG</code></td> <td><code class="LITERAL">INFORMATION</code></td> </tr> <tr> <td><code class="LITERAL">INFO</code></td> <td>Provides information implicitly requested by the user, e.g., output from <code class="COMMAND">VACUUM VERBOSE</code>.</td> <td><code class="LITERAL">INFO</code></td> <td><code class="LITERAL">INFORMATION</code></td> </tr> <tr> <td><code class="LITERAL">NOTICE</code></td> <td>Provides information that might be helpful to users, e.g., notice of truncation of long identifiers.</td> <td><code class="LITERAL">NOTICE</code></td> <td><code class="LITERAL">INFORMATION</code></td> </tr> <tr> <td><code class="LITERAL">WARNING</code></td> <td>Provides warnings of likely problems, e.g., <code class="COMMAND">COMMIT</code> outside a transaction block.</td> <td><code class="LITERAL">NOTICE</code></td> <td><code class="LITERAL">WARNING</code></td> </tr> <tr> <td><code class="LITERAL">ERROR</code></td> <td>Reports an error that caused the current command to abort.</td> <td><code class="LITERAL">WARNING</code></td> <td><code class="LITERAL">ERROR</code></td> </tr> <tr> <td><code class="LITERAL">LOG</code></td> <td>Reports information of interest to administrators, e.g., checkpoint activity.</td> <td><code class="LITERAL">INFO</code></td> <td><code class="LITERAL">INFORMATION</code></td> </tr> <tr> <td><code class="LITERAL">FATAL</code></td> <td>Reports an error that caused the current session to abort.</td> <td><code class="LITERAL">ERR</code></td> <td><code class="LITERAL">ERROR</code></td> </tr> <tr> <td><code class="LITERAL">PANIC</code></td> <td>Reports an error that caused all database sessions to abort.</td> <td><code class="LITERAL">CRIT</code></td> <td><code class="LITERAL">ERROR</code></td> </tr> </tbody> </table> </div> </div> <div class="SECT2"> <h2 class="SECT2" id="RUNTIME-CONFIG-LOGGING-WHAT">18.8.3. What To Log</h2> <div class="VARIABLELIST"> <dl> <dt id="GUC-APPLICATION-NAME">
<code class="VARNAME">application_name</code> (<code class="TYPE">string</code>)</dt> <dd> <p>The <code class="VARNAME">application_name</code> can be any string of less than <code class="SYMBOL">NAMEDATALEN</code> characters (64 characters in a standard build). It is typically set by an application upon connection to the server. The name will be displayed in the <code class="STRUCTNAME">pg_stat_activity</code> view and included in CSV log entries. It can also be included in regular log entries via the <a href="../runtime-config-logging/#GUC-LOG-LINE-PREFIX">log_line_prefix</a> parameter. Only printable ASCII characters may be used in the <code class="VARNAME">application_name</code> value. Other characters will be replaced with question marks (<code class="LITERAL">?</code>).</p> </dd> <dt>
<code class="VARNAME">debug_print_parse</code> (<code class="TYPE">boolean</code>)<br> <code class="VARNAME">debug_print_rewritten</code> (<code class="TYPE">boolean</code>)<br> <code class="VARNAME">debug_print_plan</code> (<code class="TYPE">boolean</code>)</dt> <dd> <p>These parameters enable various debugging output to be emitted. When set, they print the resulting parse tree, the query rewriter output, or the execution plan for each executed query. These messages are emitted at <code class="LITERAL">LOG</code> message level, so by default they will appear in the server log but will not be sent to the client. You can change that by adjusting <a href="../runtime-config-logging/#GUC-CLIENT-MIN-MESSAGES">client_min_messages</a> and/or <a href="../runtime-config-logging/#GUC-LOG-MIN-MESSAGES">log_min_messages</a>. These parameters are off by default.</p> </dd> <dt>
<code class="VARNAME">debug_pretty_print</code> (<code class="TYPE">boolean</code>)</dt> <dd> <p>When set, <code class="VARNAME">debug_pretty_print</code> indents the messages produced by <code class="VARNAME">debug_print_parse</code>, <code class="VARNAME">debug_print_rewritten</code>, or <code class="VARNAME">debug_print_plan</code>. This results in more readable but much longer output than the <span class="QUOTE">"compact"</span> format used when it is off. It is on by default.</p> </dd> <dt id="GUC-LOG-CHECKPOINTS">
<code class="VARNAME">log_checkpoints</code> (<code class="TYPE">boolean</code>)</dt> <dd> <p>Causes checkpoints and restartpoints to be logged in the server log. Some statistics are included in the log messages, including the number of buffers written and the time spent writing them. This parameter can only be set in the <code class="FILENAME">postgresql.conf</code> file or on the server command line. The default is off.</p> </dd> <dt id="GUC-LOG-CONNECTIONS">
<code class="VARNAME">log_connections</code> (<code class="TYPE">boolean</code>)</dt> <dd> <p>Causes each attempted connection to the server to be logged, as well as successful completion of client authentication. This parameter cannot be changed after session start. The default is off.</p>  <blockquote class="NOTE"> <p><b>Note:</b> Some client programs, like <span class="APPLICATION">psql</span>, attempt to connect twice while determining if a password is required, so duplicate <span class="QUOTE">"connection received"</span> messages do not necessarily indicate a problem.</p> </blockquote>  </dd> <dt id="GUC-LOG-DISCONNECTIONS">
<code class="VARNAME">log_disconnections</code> (<code class="TYPE">boolean</code>)</dt> <dd> <p>This outputs a line in the server log similar to <code class="VARNAME">log_connections</code> but at session termination, and includes the duration of the session. This is off by default. This parameter cannot be changed after session start.</p> </dd> <dt id="GUC-LOG-DURATION">
<code class="VARNAME">log_duration</code> (<code class="TYPE">boolean</code>)</dt> <dd> <p>Causes the duration of every completed statement to be logged. The default is <code class="LITERAL">off</code>. Only superusers can change this setting.</p> <p>For clients using extended query protocol, durations of the Parse, Bind, and Execute steps are logged independently.</p>  <blockquote class="NOTE"> <p><b>Note:</b> The difference between setting this option and setting <a href="../runtime-config-logging/#GUC-LOG-MIN-DURATION-STATEMENT"> log_min_duration_statement</a> to zero is that exceeding <code class="VARNAME">log_min_duration_statement</code> forces the text of the query to be logged, but this option doesn't. Thus, if <code class="VARNAME">log_duration</code> is <code class="LITERAL">on</code> and <code class="VARNAME">log_min_duration_statement</code> has a positive value, all durations are logged but the query text is included only for statements exceeding the threshold. This behavior can be useful for gathering statistics in high-load installations.</p> </blockquote>  </dd> <dt id="GUC-LOG-ERROR-VERBOSITY">
<code class="VARNAME">log_error_verbosity</code> (<code class="TYPE">enum</code>)</dt> <dd> <p>Controls the amount of detail written in the server log for each message that is logged. Valid values are <code class="LITERAL">TERSE</code>, <code class="LITERAL">DEFAULT</code>, and <code class="LITERAL">VERBOSE</code>, each adding more fields to displayed messages. <code class="LITERAL">TERSE</code> excludes the logging of <code class="LITERAL">DETAIL</code>, <code class="LITERAL">HINT</code>, <code class="LITERAL">QUERY</code>, and <code class="LITERAL">CONTEXT</code> error information. <code class="LITERAL">VERBOSE</code> output includes the <code class="SYMBOL">SQLSTATE</code> error code (see also <a href="../errcodes-appendix/">Appendix A</a>) and the source code file name, function name, and line number that generated the error. Only superusers can change this setting.</p> </dd> <dt id="GUC-LOG-HOSTNAME">
<code class="VARNAME">log_hostname</code> (<code class="TYPE">boolean</code>)</dt> <dd> <p>By default, connection log messages only show the IP address of the connecting host. Turning this parameter on causes logging of the host name as well. Note that depending on your host name resolution setup this might impose a non-negligible performance penalty. This parameter can only be set in the <code class="FILENAME">postgresql.conf</code> file or on the server command line.</p> </dd> <dt id="GUC-LOG-LINE-PREFIX">
<code class="VARNAME">log_line_prefix</code> (<code class="TYPE">string</code>)</dt> <dd> <p>This is a <code class="FUNCTION">printf</code>-style string that is output at the beginning of each log line. <code class="LITERAL">%</code> characters begin <span class="QUOTE">"escape sequences"</span> that are replaced with status information as outlined below. Unrecognized escapes are ignored. Other characters are copied straight to the log line. Some escapes are only recognized by session processes, and will be treated as empty by background processes such as the main server process. Status information may be aligned either left or right by specifying a numeric literal after the % and before the option. A negative value will cause the status information to be padded on the right with spaces to give it a minimum width, whereas a positive value will pad on the left. Padding can be useful to aid human readability in log files. This parameter can only be set in the <code class="FILENAME">postgresql.conf</code> file or on the server command line. The default is an empty string.</p> <div class="INFORMALTABLE" id="AEN32065">  <table class="CALSTABLE"> <col> <col> <col> <thead> <tr> <th>Escape</th> <th>Effect</th> <th>Session only</th> </tr> </thead> <tbody> <tr> <td><code class="LITERAL">%a</code></td> <td>Application name</td> <td>yes</td> </tr> <tr> <td><code class="LITERAL">%u</code></td> <td>User name</td> <td>yes</td> </tr> <tr> <td><code class="LITERAL">%d</code></td> <td>Database name</td> <td>yes</td> </tr> <tr> <td><code class="LITERAL">%r</code></td> <td>Remote host name or IP address, and remote port</td> <td>yes</td> </tr> <tr> <td><code class="LITERAL">%h</code></td> <td>Remote host name or IP address</td> <td>yes</td> </tr> <tr> <td><code class="LITERAL">%p</code></td> <td>Process ID</td> <td>no</td> </tr> <tr> <td><code class="LITERAL">%t</code></td> <td>Time stamp without milliseconds</td> <td>no</td> </tr> <tr> <td><code class="LITERAL">%m</code></td> <td>Time stamp with milliseconds</td> <td>no</td> </tr> <tr> <td><code class="LITERAL">%i</code></td> <td>Command tag: type of session's current command</td> <td>yes</td> </tr> <tr> <td><code class="LITERAL">%e</code></td> <td>SQLSTATE error code</td> <td>no</td> </tr> <tr> <td><code class="LITERAL">%c</code></td> <td>Session ID: see below</td> <td>no</td> </tr> <tr> <td><code class="LITERAL">%l</code></td> <td>Number of the log line for each session or process, starting at 1</td> <td>no</td> </tr> <tr> <td><code class="LITERAL">%s</code></td> <td>Process start time stamp</td> <td>no</td> </tr> <tr> <td><code class="LITERAL">%v</code></td> <td>Virtual transaction ID (backendID/localXID)</td> <td>no</td> </tr> <tr> <td><code class="LITERAL">%x</code></td> <td>Transaction ID (0 if none is assigned)</td> <td>no</td> </tr> <tr> <td><code class="LITERAL">%q</code></td> <td>Produces no output, but tells non-session processes to stop at this point in the string; ignored by session processes</td> <td>no</td> </tr> <tr> <td><code class="LITERAL">%%</code></td> <td>Literal <code class="LITERAL">%</code>
</td> <td>no</td> </tr> </tbody> </table> </div>The <code class="LITERAL">%c</code> escape prints a quasi-unique session identifier, consisting of two 4-byte hexadecimal numbers (without leading zeros) separated by a dot. The numbers are the process start time and the process ID, so <code class="LITERAL">%c</code> can also be used as a space saving way of printing those items. For example, to generate the session identifier from <code class="LITERAL">pg_stat_activity</code>, use this query: <pre class="PROGRAMLISTING" data-language="sql">
SELECT to_hex(EXTRACT(EPOCH FROM backend_start)::integer) || '.' ||
       to_hex(pid)
FROM pg_stat_activity;
</pre> <div class="TIP"> <blockquote class="TIP"> <p><b>Tip:</b> If you set a nonempty value for <code class="VARNAME">log_line_prefix</code>, you should usually make its last character be a space, to provide visual separation from the rest of the log line. A punctuation character can be used too.</p> </blockquote> </div> <div class="TIP"> <blockquote class="TIP"> <p><b>Tip:</b> <span class="APPLICATION">Syslog</span> produces its own time stamp and process ID information, so you probably do not want to include those escapes if you are logging to <span class="APPLICATION">syslog</span>.</p> </blockquote> </div> </dd> <dt id="GUC-LOG-LOCK-WAITS">
<code class="VARNAME">log_lock_waits</code> (<code class="TYPE">boolean</code>)</dt> <dd> <p>Controls whether a log message is produced when a session waits longer than <a href="../runtime-config-locks/#GUC-DEADLOCK-TIMEOUT">deadlock_timeout</a> to acquire a lock. This is useful in determining if lock waits are causing poor performance. The default is <code class="LITERAL">off</code>.</p> </dd> <dt id="GUC-LOG-STATEMENT">
<code class="VARNAME">log_statement</code> (<code class="TYPE">enum</code>)</dt> <dd> <p>Controls which SQL statements are logged. Valid values are <code class="LITERAL">none</code> (off), <code class="LITERAL">ddl</code>, <code class="LITERAL">mod</code>, and <code class="LITERAL">all</code> (all statements). <code class="LITERAL">ddl</code> logs all data definition statements, such as <code class="COMMAND">CREATE</code>, <code class="COMMAND">ALTER</code>, and <code class="COMMAND">DROP</code> statements. <code class="LITERAL">mod</code> logs all <code class="LITERAL">ddl</code> statements, plus data-modifying statements such as <code class="COMMAND">INSERT</code>, <code class="COMMAND">UPDATE</code>, <code class="COMMAND">DELETE</code>, <code class="COMMAND">TRUNCATE</code>, and <code class="COMMAND">COPY FROM</code>. <code class="COMMAND">PREPARE</code>, <code class="COMMAND">EXECUTE</code>, and <code class="COMMAND">EXPLAIN ANALYZE</code> statements are also logged if their contained command is of an appropriate type. For clients using extended query protocol, logging occurs when an Execute message is received, and values of the Bind parameters are included (with any embedded single-quote marks doubled).</p> <p>The default is <code class="LITERAL">none</code>. Only superusers can change this setting.</p>  <blockquote class="NOTE"> <p><b>Note:</b> Statements that contain simple syntax errors are not logged even by the <code class="VARNAME">log_statement</code> = <code class="LITERAL">all</code> setting, because the log message is emitted only after basic parsing has been done to determine the statement type. In the case of extended query protocol, this setting likewise does not log statements that fail before the Execute phase (i.e., during parse analysis or planning). Set <code class="VARNAME">log_min_error_statement</code> to <code class="LITERAL">ERROR</code> (or lower) to log such statements.</p> </blockquote>  </dd> <dt id="GUC-LOG-TEMP-FILES">
<code class="VARNAME">log_temp_files</code> (<code class="TYPE">integer</code>)</dt> <dd> <p>Controls logging of temporary file names and sizes. Temporary files can be created for sorts, hashes, and temporary query results. A log entry is made for each temporary file when it is deleted. A value of zero logs all temporary file information, while positive values log only files whose size is greater than or equal to the specified number of kilobytes. The default setting is -1, which disables such logging. Only superusers can change this setting.</p> </dd> <dt id="GUC-LOG-TIMEZONE">
<code class="VARNAME">log_timezone</code> (<code class="TYPE">string</code>)</dt> <dd> <p>Sets the time zone used for timestamps written in the server log. Unlike <a href="../runtime-config-client/#GUC-TIMEZONE">TimeZone</a>, this value is cluster-wide, so that all sessions will report timestamps consistently. The built-in default is <code class="LITERAL">GMT</code>, but that is typically overridden in <code class="FILENAME">postgresql.conf</code>; <span class="APPLICATION">initdb</span> will install a setting there corresponding to its system environment. See <a href="../datatype-datetime/#DATATYPE-TIMEZONES">Section 8.5.3</a> for more information. This parameter can only be set in the <code class="FILENAME">postgresql.conf</code> file or on the server command line.</p> </dd> </dl> </div> </div> <div class="SECT2"> <h2 class="SECT2" id="RUNTIME-CONFIG-LOGGING-CSVLOG">18.8.4. Using CSV-Format Log Output</h2> <p>Including <code class="LITERAL">csvlog</code> in the <code class="VARNAME">log_destination</code> list provides a convenient way to import log files into a database table. This option emits log lines in comma-separated-values (<acronym class="ACRONYM">CSV</acronym>) format, with these columns: time stamp with milliseconds, user name, database name, process ID, client host:port number, session ID, per-session line number, command tag, session start time, virtual transaction ID, regular transaction ID, error severity, SQLSTATE code, error message, error message detail, hint, internal query that led to the error (if any), character count of the error position therein, error context, user query that led to the error (if any and enabled by <code class="VARNAME">log_min_error_statement</code>), character count of the error position therein, location of the error in the PostgreSQL source code (if <code class="VARNAME">log_error_verbosity</code> is set to <code class="LITERAL">verbose</code>), and application name. Here is a sample table definition for storing CSV-format log output:</p> <pre class="PROGRAMLISTING" data-language="sql">
CREATE TABLE postgres_log
(
  log_time timestamp(3) with time zone,
  user_name text,
  database_name text,
  process_id integer,
  connection_from text,
  session_id text,
  session_line_num bigint,
  command_tag text,
  session_start_time timestamp with time zone,
  virtual_transaction_id text,
  transaction_id bigint,
  error_severity text,
  sql_state_code text,
  message text,
  detail text,
  hint text,
  internal_query text,
  internal_query_pos integer,
  context text,
  query text,
  query_pos integer,
  location text,
  application_name text,
  PRIMARY KEY (session_id, session_line_num)
);
</pre> <p>To import a log file into this table, use the <code class="COMMAND">COPY FROM</code> command:</p> <pre class="PROGRAMLISTING" data-language="sql">
COPY postgres_log FROM '/full/path/to/logfile.csv' WITH csv;
</pre> <p>There are a few things you need to do to simplify importing CSV log files:</p> <ol type="1"> <li> <p>Set <code class="VARNAME">log_filename</code> and <code class="VARNAME">log_rotation_age</code> to provide a consistent, predictable naming scheme for your log files. This lets you predict what the file name will be and know when an individual log file is complete and therefore ready to be imported.</p> </li> <li> <p>Set <code class="VARNAME">log_rotation_size</code> to 0 to disable size-based log rotation, as it makes the log file name difficult to predict.</p> </li> <li> <p>Set <code class="VARNAME">log_truncate_on_rotation</code> to <code class="LITERAL">on</code> so that old log data isn't mixed with the new in the same file.</p> </li> <li> <p>The table definition above includes a primary key specification. This is useful to protect against accidentally importing the same information twice. The <code class="COMMAND">COPY</code> command commits all of the data it imports at one time, so any error will cause the entire import to fail. If you import a partial log file and later import the file again when it is complete, the primary key violation will cause the import to fail. Wait until the log is complete and closed before importing. This procedure will also protect against accidentally importing a partial line that hasn't been completely written, which would also cause <code class="COMMAND">COPY</code> to fail.</p> </li> </ol> </div>  <div class="NAVFOOTER">  <table summary="Footer navigation table"> <tr> <td width="33%" align="left"><a href="../runtime-config-query/" accesskey="P">Prev</a></td> <td width="34%" align="center"></td> <td width="33%" align="right"><a href="../runtime-config-statistics/" accesskey="N">Next</a></td> </tr> <tr> <td width="33%" align="left">Query Planning</td> <td width="34%" align="center"><a href="https://www.postgresql.org/docs/9.4/static/runtime-config.html" accesskey="U" target="_blank">Up</a></td> <td width="33%" align="right">Run-time Statistics</td> </tr> </table> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 1996–2017 The PostgreSQL Global Development Group<br>Licensed under the PostgreSQL License.<br>
    <a href="https://www.postgresql.org/docs/9.4/static/runtime-config-logging.html" class="_attribution-link" target="_blank">https://www.postgresql.org/docs/9.4/static/runtime-config-logging.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
