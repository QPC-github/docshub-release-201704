
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Server Configuration&#58; Connections and Authentication - PostgreSQL 9.4 - W3cubDocs</title>
  
  <meta name="description" content="Specifies the TCP&#47;IP address(es) on which the server is to listen for connections from client applications. The value takes the form of a comma- &hellip;">
  <meta name="keywords" content="connections, and, authentication, server, configuration, -, postgresql, postgresql~9.4">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/postgresql~9.4/runtime-config-connection/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/postgresql~9.4.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/postgresql~9.4/" class="_nav-link" title="" style="margin-left:0;">PostgreSQL 9.4</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _postgres">
				
<h1 class="SECT1" id="RUNTIME-CONFIG-CONNECTION">18.3. Connections and Authentication</h1> <div class="SECT2"> <h2 class="SECT2" id="RUNTIME-CONFIG-CONNECTION-SETTINGS">18.3.1. Connection Settings</h2> <div class="VARIABLELIST"> <dl> <dt id="GUC-LISTEN-ADDRESSES">
<code class="VARNAME">listen_addresses</code> (<code class="TYPE">string</code>)</dt> <dd> <p>Specifies the TCP/IP address(es) on which the server is to listen for connections from client applications. The value takes the form of a comma-separated list of host names and/or numeric IP addresses. The special entry <code class="LITERAL">*</code> corresponds to all available IP interfaces. The entry <code class="LITERAL">0.0.0.0</code> allows listening for all IPv4 addresses and <code class="LITERAL">::</code> allows listening for all IPv6 addresses. If the list is empty, the server does not listen on any IP interface at all, in which case only Unix-domain sockets can be used to connect to it. The default value is <span class="SYSTEMITEM">localhost</span>, which allows only local TCP/IP <span class="QUOTE">"loopback"</span> connections to be made. While client authentication (<a href="https://www.postgresql.org/docs/9.4/static/client-authentication.html" target="_blank">Chapter 19</a>) allows fine-grained control over who can access the server, <code class="VARNAME">listen_addresses</code> controls which interfaces accept connection attempts, which can help prevent repeated malicious connection requests on insecure network interfaces. This parameter can only be set at server start.</p> </dd> <dt id="GUC-PORT">
<code class="VARNAME">port</code> (<code class="TYPE">integer</code>)</dt> <dd> <p>The TCP port the server listens on; 5432 by default. Note that the same port number is used for all IP addresses the server listens on. This parameter can only be set at server start.</p> </dd> <dt id="GUC-MAX-CONNECTIONS">
<code class="VARNAME">max_connections</code> (<code class="TYPE">integer</code>)</dt> <dd> <p>Determines the maximum number of concurrent connections to the database server. The default is typically 100 connections, but might be less if your kernel settings will not support it (as determined during <span class="APPLICATION">initdb</span>). This parameter can only be set at server start.</p> <p>When running a standby server, you must set this parameter to the same or higher value than on the master server. Otherwise, queries will not be allowed in the standby server.</p> </dd> <dt id="GUC-SUPERUSER-RESERVED-CONNECTIONS">
<code class="VARNAME">superuser_reserved_connections</code> (<code class="TYPE">integer</code>)</dt> <dd> <p>Determines the number of connection <span class="QUOTE">"slots"</span> that are reserved for connections by <span class="PRODUCTNAME">PostgreSQL</span> superusers. At most <a href="../runtime-config-connection/#GUC-MAX-CONNECTIONS">max_connections</a> connections can ever be active simultaneously. Whenever the number of active concurrent connections is at least <code class="VARNAME">max_connections</code> minus <code class="VARNAME">superuser_reserved_connections</code>, new connections will be accepted only for superusers, and no new replication connections will be accepted.</p> <p>The default value is three connections. The value must be less than the value of <code class="VARNAME">max_connections</code>. This parameter can only be set at server start.</p> </dd> <dt id="GUC-UNIX-SOCKET-DIRECTORIES">
<code class="VARNAME">unix_socket_directories</code> (<code class="TYPE">string</code>)</dt> <dd> <p>Specifies the directory of the Unix-domain socket(s) on which the server is to listen for connections from client applications. Multiple sockets can be created by listing multiple directories separated by commas. Whitespace between entries is ignored; surround a directory name with double quotes if you need to include whitespace or commas in the name. An empty value specifies not listening on any Unix-domain sockets, in which case only TCP/IP sockets can be used to connect to the server. The default value is normally <code class="FILENAME">/tmp</code>, but that can be changed at build time. This parameter can only be set at server start.</p> <p>In addition to the socket file itself, which is named <code class="LITERAL">.s.PGSQL.<code class="REPLACEABLE c2">nnnn</code></code> where <code class="REPLACEABLE c2">nnnn</code> is the server's port number, an ordinary file named <code class="LITERAL">.s.PGSQL.<code class="REPLACEABLE c2">nnnn</code>.lock</code> will be created in each of the <code class="VARNAME">unix_socket_directories</code> directories. Neither file should ever be removed manually.</p> <p>This parameter is irrelevant on Windows, which does not have Unix-domain sockets.</p> </dd> <dt id="GUC-UNIX-SOCKET-GROUP">
<code class="VARNAME">unix_socket_group</code> (<code class="TYPE">string</code>)</dt> <dd> <p>Sets the owning group of the Unix-domain socket(s). (The owning user of the sockets is always the user that starts the server.) In combination with the parameter <code class="VARNAME">unix_socket_permissions</code> this can be used as an additional access control mechanism for Unix-domain connections. By default this is the empty string, which uses the default group of the server user. This parameter can only be set at server start.</p> <p>This parameter is irrelevant on Windows, which does not have Unix-domain sockets.</p> </dd> <dt id="GUC-UNIX-SOCKET-PERMISSIONS">
<code class="VARNAME">unix_socket_permissions</code> (<code class="TYPE">integer</code>)</dt> <dd> <p>Sets the access permissions of the Unix-domain socket(s). Unix-domain sockets use the usual Unix file system permission set. The parameter value is expected to be a numeric mode specified in the format accepted by the <code class="FUNCTION">chmod</code> and <code class="FUNCTION">umask</code> system calls. (To use the customary octal format the number must start with a <code class="LITERAL">0</code> (zero).)</p> <p>The default permissions are <code class="LITERAL">0777</code>, meaning anyone can connect. Reasonable alternatives are <code class="LITERAL">0770</code> (only user and group, see also <code class="VARNAME">unix_socket_group</code>) and <code class="LITERAL">0700</code> (only user). (Note that for a Unix-domain socket, only write permission matters, so there is no point in setting or revoking read or execute permissions.)</p> <p>This access control mechanism is independent of the one described in <a href="https://www.postgresql.org/docs/9.4/static/client-authentication.html" target="_blank">Chapter 19</a>.</p> <p>This parameter can only be set at server start.</p> <p>This parameter is irrelevant on systems, notably Solaris as of Solaris 10, that ignore socket permissions entirely. There, one can achieve a similar effect by pointing <code class="VARNAME">unix_socket_directories</code> to a directory having search permission limited to the desired audience. This parameter is also irrelevant on Windows, which does not have Unix-domain sockets.</p> </dd> <dt id="GUC-BONJOUR">
<code class="VARNAME">bonjour</code> (<code class="TYPE">boolean</code>)</dt> <dd> <p>Enables advertising the server's existence via <span class="PRODUCTNAME">Bonjour</span>. The default is off. This parameter can only be set at server start.</p> </dd> <dt id="GUC-BONJOUR-NAME">
<code class="VARNAME">bonjour_name</code> (<code class="TYPE">string</code>)</dt> <dd> <p>Specifies the <span class="PRODUCTNAME">Bonjour</span> service name. The computer name is used if this parameter is set to the empty string <code class="LITERAL">''</code> (which is the default). This parameter is ignored if the server was not compiled with <span class="PRODUCTNAME">Bonjour</span> support. This parameter can only be set at server start.</p> </dd> <dt id="GUC-TCP-KEEPALIVES-IDLE">
<code class="VARNAME">tcp_keepalives_idle</code> (<code class="TYPE">integer</code>)</dt> <dd> <p>Specifies the number of seconds of inactivity after which TCP should send a keepalive message to the client. A value of 0 uses the system default. This parameter is supported only on systems that support the <code class="SYMBOL">TCP_KEEPIDLE</code> or <code class="SYMBOL">TCP_KEEPALIVE</code> symbols, and on Windows; on other systems, it must be zero. In sessions connected via a Unix-domain socket, this parameter is ignored and always reads as zero.</p>  <blockquote class="NOTE"> <p><b>Note:</b> On Windows, a value of 0 will set this parameter to 2 hours, since Windows does not provide a way to read the system default value.</p> </blockquote>  </dd> <dt id="GUC-TCP-KEEPALIVES-INTERVAL">
<code class="VARNAME">tcp_keepalives_interval</code> (<code class="TYPE">integer</code>)</dt> <dd> <p>Specifies the number of seconds after which a TCP keepalive message that is not acknowledged by the client should be retransmitted. A value of 0 uses the system default. This parameter is supported only on systems that support the <code class="SYMBOL">TCP_KEEPINTVL</code> symbol, and on Windows; on other systems, it must be zero. In sessions connected via a Unix-domain socket, this parameter is ignored and always reads as zero.</p>  <blockquote class="NOTE"> <p><b>Note:</b> On Windows, a value of 0 will set this parameter to 1 second, since Windows does not provide a way to read the system default value.</p> </blockquote>  </dd> <dt id="GUC-TCP-KEEPALIVES-COUNT">
<code class="VARNAME">tcp_keepalives_count</code> (<code class="TYPE">integer</code>)</dt> <dd> <p>Specifies the number of TCP keepalives that can be lost before the server's connection to the client is considered dead. A value of 0 uses the system default. This parameter is supported only on systems that support the <code class="SYMBOL">TCP_KEEPCNT</code> symbol; on other systems, it must be zero. In sessions connected via a Unix-domain socket, this parameter is ignored and always reads as zero.</p>  <blockquote class="NOTE"> <p><b>Note:</b> This parameter is not supported on Windows, and must be zero.</p> </blockquote>  </dd> </dl> </div> </div> <div class="SECT2"> <h2 class="SECT2" id="RUNTIME-CONFIG-CONNECTION-SECURITY">18.3.2. Security and Authentication</h2> <div class="VARIABLELIST"> <dl> <dt id="GUC-AUTHENTICATION-TIMEOUT">
<code class="VARNAME">authentication_timeout</code> (<code class="TYPE">integer</code>)</dt> <dd> <p>Maximum time to complete client authentication, in seconds. If a would-be client has not completed the authentication protocol in this much time, the server closes the connection. This prevents hung clients from occupying a connection indefinitely. The default is one minute (<code class="LITERAL">1m</code>). This parameter can only be set in the <code class="FILENAME">postgresql.conf</code> file or on the server command line.</p> </dd> <dt id="GUC-SSL">
<code class="VARNAME">ssl</code> (<code class="TYPE">boolean</code>)</dt> <dd> <p>Enables <acronym class="ACRONYM">SSL</acronym> connections. Please read <a href="../ssl-tcp/">Section 17.9</a> before using this. The default is <code class="LITERAL">off</code>. This parameter can only be set at server start. <acronym class="ACRONYM">SSL</acronym> communication is only possible with TCP/IP connections.</p> </dd> <dt id="GUC-SSL-CA-FILE">
<code class="VARNAME">ssl_ca_file</code> (<code class="TYPE">string</code>)</dt> <dd> <p>Specifies the name of the file containing the SSL server certificate authority (CA). The default is empty, meaning no CA file is loaded, and client certificate verification is not performed. (In previous releases of PostgreSQL, the name of this file was hard-coded as <code class="FILENAME">root.crt</code>.) Relative paths are relative to the data directory. This parameter can only be set at server start.</p> </dd> <dt id="GUC-SSL-CERT-FILE">
<code class="VARNAME">ssl_cert_file</code> (<code class="TYPE">string</code>)</dt> <dd> <p>Specifies the name of the file containing the SSL server certificate. The default is <code class="FILENAME">server.crt</code>. Relative paths are relative to the data directory. This parameter can only be set at server start.</p> </dd> <dt id="GUC-SSL-CRL-FILE">
<code class="VARNAME">ssl_crl_file</code> (<code class="TYPE">string</code>)</dt> <dd> <p>Specifies the name of the file containing the SSL server certificate revocation list (CRL). The default is empty, meaning no CRL file is loaded. (In previous releases of PostgreSQL, the name of this file was hard-coded as <code class="FILENAME">root.crl</code>.) Relative paths are relative to the data directory. This parameter can only be set at server start.</p> </dd> <dt id="GUC-SSL-KEY-FILE">
<code class="VARNAME">ssl_key_file</code> (<code class="TYPE">string</code>)</dt> <dd> <p>Specifies the name of the file containing the SSL server private key. The default is <code class="FILENAME">server.key</code>. Relative paths are relative to the data directory. This parameter can only be set at server start.</p> </dd> <dt id="GUC-SSL-RENEGOTIATION-LIMIT">
<code class="VARNAME">ssl_renegotiation_limit</code> (<code class="TYPE">integer</code>)</dt> <dd> <p>Specifies how much data can flow over an <acronym class="ACRONYM">SSL</acronym>-encrypted connection before renegotiation of the session keys will take place. Renegotiation decreases an attacker's chances of doing cryptanalysis when large amounts of traffic can be examined, but it also carries a large performance penalty. The sum of sent and received traffic is used to check the limit. If this parameter is set to 0, renegotiation is disabled. The default is <code class="LITERAL">0</code>.</p>  <blockquote class="NOTE"> <p><b>Note:</b> SSL libraries from before November 2009 are insecure when using SSL renegotiation, due to a vulnerability in the SSL protocol. As a stop-gap fix for this vulnerability, some vendors shipped SSL libraries incapable of doing renegotiation. If any such libraries are in use on the client or server, SSL renegotiation should be disabled.</p> </blockquote>  <div class="WARNING"> <table class="WARNING"> <tr> <td class="c3" align="center">Warning</td> </tr> <tr> <td align="left"> <p>Due to bugs in <span class="PRODUCTNAME">OpenSSL</span> enabling ssl renegotiation, by configuring a non-zero <code class="VARNAME">ssl_renegotiation_limit</code>, is likely to lead to problems like long-lived connections breaking.</p> </td> </tr> </table> </div> </dd> <dt id="GUC-SSL-CIPHERS">
<code class="VARNAME">ssl_ciphers</code> (<code class="TYPE">string</code>)</dt> <dd> <p>Specifies a list of <acronym class="ACRONYM">SSL</acronym> cipher suites that are allowed to be used on secure connections. See the <span class="CITEREFENTRY REFENTRYTITLE">ciphers</span> manual page in the <span class="APPLICATION">OpenSSL</span> package for the syntax of this setting and a list of supported values. The default value is <code class="LITERAL">HIGH:MEDIUM:+3DES:!aNULL</code>. It is usually reasonable, unless you have specific security requirements. This parameter can only be set at server start.</p> <p>Explanation of the default value:</p> <div class="VARIABLELIST"> <dl> <dt><code class="LITERAL">HIGH</code></dt> <dd> <p>Cipher suites that use ciphers from <code class="LITERAL">HIGH</code> group (e.g., AES, Camellia, 3DES)</p> </dd> <dt><code class="LITERAL">MEDIUM</code></dt> <dd> <p>Cipher suites that use ciphers from <code class="LITERAL">MEDIUM</code> group (e.g., RC4, SEED)</p> </dd> <dt><code class="LITERAL">+3DES</code></dt> <dd> <p>The OpenSSL default order for <code class="LITERAL">HIGH</code> is problematic because it orders 3DES higher than AES128. This is wrong because 3DES offers less security than AES128, and it is also much slower. <code class="LITERAL">+3DES</code> reorders it after all other <code class="LITERAL">HIGH</code> and <code class="LITERAL">MEDIUM</code> ciphers.</p> </dd> <dt><code class="LITERAL">!aNULL</code></dt> <dd> <p>Disables anonymous cipher suites that do no authentication. Such cipher suites are vulnerable to man-in-the-middle attacks and therefore should not be used.</p> </dd> </dl> </div> <p>Available cipher suite details will vary across OpenSSL versions. Use the command <code class="LITERAL">openssl ciphers -v 'HIGH:MEDIUM:+3DES:!aNULL'</code> to see actual details for the currently installed <span class="APPLICATION">OpenSSL</span> version. Note that this list is filtered at run time based on the server key type.</p> </dd> <dt id="GUC-SSL-PREFER-SERVER-CIPHERS">
<code class="VARNAME">ssl_prefer_server_ciphers</code> (<code class="TYPE">bool</code>)</dt> <dd> <p>Specifies whether to use the server's SSL cipher preferences, rather than the client's. The default is true. This parameter can only be set at server start.</p> <p>Older PostgreSQL versions do not have this setting and always use the client's preferences. This setting is mainly for backward compatibility with those versions. Using the server's preferences is usually better because it is more likely that the server is appropriately configured.</p> </dd> <dt id="GUC-SSL-ECDH-CURVE">
<code class="VARNAME">ssl_ecdh_curve</code> (<code class="TYPE">string</code>)</dt> <dd> <p>Specifies the name of the curve to use in <acronym class="ACRONYM">ECDH</acronym> key exchange. It needs to be supported by all clients that connect. It does not need to be same curve as used by server's Elliptic Curve key. The default is <code class="LITERAL">prime256v1</code>. This parameter can only be set at server start.</p> <p>OpenSSL names for most common curves: <code class="LITERAL">prime256v1</code> (NIST P-256), <code class="LITERAL">secp384r1</code> (NIST P-384), <code class="LITERAL">secp521r1</code> (NIST P-521).</p> <p>The full list of available curves can be shown with the command <code class="COMMAND">openssl ecparam -list_curves</code>. Not all of them are usable in <acronym class="ACRONYM">TLS</acronym> though.</p> </dd> <dt id="GUC-PASSWORD-ENCRYPTION">
<code class="VARNAME">password_encryption</code> (<code class="TYPE">boolean</code>)</dt> <dd> <p>When a password is specified in <a href="../sql-createuser/">CREATE USER</a> or <a href="../sql-alterrole/">ALTER ROLE</a> without writing either <code class="LITERAL">ENCRYPTED</code> or <code class="LITERAL">UNENCRYPTED</code>, this parameter determines whether the password is to be encrypted. The default is <code class="LITERAL">on</code> (encrypt the password).</p> </dd> <dt id="GUC-KRB-SERVER-KEYFILE">
<code class="VARNAME">krb_server_keyfile</code> (<code class="TYPE">string</code>)</dt> <dd> <p>Sets the location of the Kerberos server key file. See <a href="../auth-methods/#GSSAPI-AUTH">Section 19.3.3</a> for details. This parameter can only be set in the <code class="FILENAME">postgresql.conf</code> file or on the server command line.</p> </dd> <dt id="GUC-KRB-CASEINS-USERS">
<code class="VARNAME">krb_caseins_users</code> (<code class="TYPE">boolean</code>)</dt> <dd> <p>Sets whether GSSAPI user names should be treated case-insensitively. The default is <code class="LITERAL">off</code> (case sensitive). This parameter can only be set in the <code class="FILENAME">postgresql.conf</code> file or on the server command line.</p> </dd> <dt id="GUC-DB-USER-NAMESPACE">
<code class="VARNAME">db_user_namespace</code> (<code class="TYPE">boolean</code>)</dt> <dd> <p>This parameter enables per-database user names. It is off by default. This parameter can only be set in the <code class="FILENAME">postgresql.conf</code> file or on the server command line.</p> <p>If this is on, you should create users as <code class="LITERAL">username@dbname</code>. When <code class="LITERAL">username</code> is passed by a connecting client, <code class="LITERAL">@</code> and the database name are appended to the user name and that database-specific user name is looked up by the server. Note that when you create users with names containing <code class="LITERAL">@</code> within the SQL environment, you will need to quote the user name.</p> <p>With this parameter enabled, you can still create ordinary global users. Simply append <code class="LITERAL">@</code> when specifying the user name in the client, e.g. <code class="LITERAL">joe@</code>. The <code class="LITERAL">@</code> will be stripped off before the user name is looked up by the server.</p> <p><code class="VARNAME">db_user_namespace</code> causes the client's and server's user name representation to differ. Authentication checks are always done with the server's user name so authentication methods must be configured for the server's user name, not the client's. Because <code class="LITERAL">md5</code> uses the user name as salt on both the client and server, <code class="LITERAL">md5</code> cannot be used with <code class="VARNAME">db_user_namespace</code>.</p>  <blockquote class="NOTE"> <p><b>Note:</b> This feature is intended as a temporary measure until a complete solution is found. At that time, this option will be removed.</p> </blockquote>  </dd> </dl> </div> </div>  <div class="NAVFOOTER">  <table summary="Footer navigation table"> <tr> <td width="33%" align="left"><a href="../runtime-config-file-locations/" accesskey="P">Prev</a></td> <td width="34%" align="center"></td> <td width="33%" align="right"><a href="../runtime-config-resource/" accesskey="N">Next</a></td> </tr> <tr> <td width="33%" align="left">File Locations</td> <td width="34%" align="center"><a href="https://www.postgresql.org/docs/9.4/static/runtime-config.html" accesskey="U" target="_blank">Up</a></td> <td width="33%" align="right">Resource Consumption</td> </tr> </table> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 1996–2017 The PostgreSQL Global Development Group<br>Licensed under the PostgreSQL License.<br>
    <a href="https://www.postgresql.org/docs/9.4/static/runtime-config-connection.html" class="_attribution-link" target="_blank">https://www.postgresql.org/docs/9.4/static/runtime-config-connection.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
