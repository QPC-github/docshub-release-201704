
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Configuring and Running Docker (Engine) - Docker 1.13 - W3cubDocs</title>
  
  <meta name="description" content=" After successfully installing Docker, the docker daemon runs with its default configuration. ">
  <meta name="keywords" content="configure, and, run, docker, on, various, distributions, configuring, running, engine, -, docker~1.13">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/docker~1.13/engine/admin/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/docker~1.13.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/docker~1.13/" class="_nav-link" title="" style="margin-left:0;">Docker 1.13</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _docker">
				
<h1>Configure and run Docker on various distributions</h1>  <p>After successfully installing Docker, the <code class="highlighter-rouge">docker</code> daemon runs with its default configuration.</p> <p>In a production environment, system administrators typically configure the <code class="highlighter-rouge">docker</code> daemon to start and stop according to an organization’s requirements. In most cases, the system administrator configures a process manager such as <code class="highlighter-rouge">SysVinit</code>, <code class="highlighter-rouge">Upstart</code>, or <code class="highlighter-rouge">systemd</code> to manage the <code class="highlighter-rouge">docker</code> daemon’s start and stop.</p> <h3 id="running-the-docker-daemon-directly">Running the docker daemon directly</h3> <p>The Docker daemon can be run directly using the <code class="highlighter-rouge">dockerd</code> command. By default it listens on the Unix socket <code class="highlighter-rouge">unix:///var/run/docker.sock</code></p> <pre class="highlight" data-language="bash">$ dockerd

INFO[0000] +job init_networkdriver()
INFO[0000] +job serveapi(unix:///var/run/docker.sock)
INFO[0000] Listening for HTTP on unix (/var/run/docker.sock)
...
...
</pre>  <h3 id="configuring-the-docker-daemon-directly">Configuring the docker daemon directly</h3> <p>If you’re running the Docker daemon directly by running <code class="highlighter-rouge">dockerd</code> instead of using a process manager, you can append the configuration options to the <code class="highlighter-rouge">docker</code> run command directly. Other options can be passed to the Docker daemon to configure it.</p> <p>Some of the daemon’s options are:</p> <table> <thead> <tr> <th>Flag</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>
<code class="highlighter-rouge">-D</code>, <code class="highlighter-rouge">--debug=false</code>
</td> <td>Enable or disable debug mode. By default, this is false.</td> </tr> <tr> <td>
<code class="highlighter-rouge">-H</code>,<code class="highlighter-rouge">--host=[]</code>
</td> <td>Daemon socket(s) to connect to.</td> </tr> <tr> <td><code class="highlighter-rouge">--tls=false</code></td> <td>Enable or disable TLS. By default, this is false.</td> </tr> </tbody> </table> <p>Here is an example of running the Docker daemon with configuration options: <code class="highlighter-rouge">bash $ dockerd -D --tls=true --tlscert=/var/docker/server.pem --tlskey=/var/docker/serverkey.pem -H tcp://192.168.59.3:2376</code></p> <p>These options :</p> <ul> <li>Enable <code class="highlighter-rouge">-D</code> (debug) mode</li> <li>Set <code class="highlighter-rouge">tls</code> to true with the server certificate and key specified using <code class="highlighter-rouge">--tlscert</code> and <code class="highlighter-rouge">--tlskey</code> respectively</li> <li>Listen for connections on <code class="highlighter-rouge">tcp://192.168.59.3:2376</code>
</li> </ul> <p>The command line reference has the <a href="../reference/commandline/dockerd/">complete list of daemon flags</a> with explanations.</p> <h3 id="daemon-debugging">Daemon debugging</h3> <p>As noted above, setting the log level of the daemon to “debug” or enabling debug mode with <code class="highlighter-rouge">-D</code> allows the administrator or operator to gain much more knowledge about the runtime activity of the daemon. If faced with a non-responsive daemon, the administrator can force a full stack trace of all threads to be added to the daemon log by sending the <code class="highlighter-rouge">SIGUSR1</code> signal to the Docker daemon. A common way to send this signal is using the <code class="highlighter-rouge">kill</code> command on Linux systems. For example, <code class="highlighter-rouge">kill -USR1 &lt;daemon-pid&gt;</code> sends the <code class="highlighter-rouge">SIGUSR1</code> signal to the daemon process, causing the stack dump to be added to the daemon log.</p> <blockquote> <p><strong>Note:</strong> The log level setting of the daemon must be at least “info” level and above for the stack trace to be saved to the logfile. By default the daemon’s log level is set to “info”.</p> </blockquote> <p>The daemon will continue operating after handling the <code class="highlighter-rouge">SIGUSR1</code> signal and dumping the stack traces to the log. The stack traces can be used to determine the state of all goroutines and threads within the daemon.</p> <h2 id="ubuntu">Ubuntu</h2> <p>As of <code class="highlighter-rouge">14.04</code>, Ubuntu uses Upstart as a process manager. By default, Upstart jobs are located in <code class="highlighter-rouge">/etc/init</code> and the <code class="highlighter-rouge">docker</code> Upstart job can be found at <code class="highlighter-rouge">/etc/init/docker.conf</code>.</p> <p>After successfully <a href="https://docs.docker.com/engine/installation/linux/ubuntulinux/" target="_blank">installing Docker for Ubuntu</a>, you can check the running status using Upstart in this way:</p> <pre class="highlight" data-language="bash">$ sudo status docker

docker start/running, process 989
</pre>  <h3 id="running-docker">Running Docker</h3> <p>You can start/stop/restart the <code class="highlighter-rouge">docker</code> daemon using</p> <pre class="highlight" data-language="bash">$ sudo start docker

$ sudo stop docker

$ sudo restart docker
</pre>  <h3 id="configuring-docker">Configuring Docker</h3> <p>The instructions below depict configuring Docker on a system that uses <code class="highlighter-rouge">upstart</code> as the process manager. As of Ubuntu 15.04, Ubuntu uses <code class="highlighter-rouge">systemd</code> as its process manager. For Ubuntu 15.04 and higher, refer to <a href="systemd/">control and configure Docker with systemd</a>.</p> <p>You configure the <code class="highlighter-rouge">docker</code> daemon in the <code class="highlighter-rouge">/etc/default/docker</code> file on your system. You do this by specifying values in a <code class="highlighter-rouge">DOCKER_OPTS</code> variable.</p> <p>To configure Docker options:</p> <ol> <li> <p>Log into your host as a user with <code class="highlighter-rouge">sudo</code> or <code class="highlighter-rouge">root</code> privileges.</p> </li> <li> <p>If you don’t have one, create the <code class="highlighter-rouge">/etc/default/docker</code> file on your host. Depending on how you installed Docker, you may already have this file.</p> </li> <li> <p>Open the file with your favorite editor.</p> <pre class="highlight" data-language="bash">$ sudo vi /etc/default/docker
</pre>  </li> <li> <p>Add a <code class="highlighter-rouge">DOCKER_OPTS</code> variable with the following options. These options are appended to the <code class="highlighter-rouge">docker</code> daemon’s run command.</p> <pre class="highlight" data-language="bash">DOCKER_OPTS="-D --tls=true --tlscert=/var/docker/server.pem --tlskey=/var/docker/serverkey.pem -H tcp://192.168.59.3:2376"
</pre>  <p>These options :</p> <ul> <li>Enable <code class="highlighter-rouge">-D</code> (debug) mode</li> <li>Set <code class="highlighter-rouge">tls</code> to true with the server certificate and key specified using <code class="highlighter-rouge">--tlscert</code> and <code class="highlighter-rouge">--tlskey</code> respectively</li> <li>Listen for connections on <code class="highlighter-rouge">tcp://192.168.59.3:2376</code>
</li> </ul> <p>The command line reference has the <a href="../reference/commandline/dockerd/">complete list of daemon flags</a> with explanations.</p> </li> <li> <p>Save and close the file.</p> </li> <li> <p>Restart the <code class="highlighter-rouge">docker</code> daemon.</p> <pre class="highlight" data-language="bash">$ sudo restart docker
</pre>  </li> <li> <p>Verify that the <code class="highlighter-rouge">docker</code> daemon is running as specified with the <code class="highlighter-rouge">ps</code> command.</p> <p><code class="highlighter-rouge">bash $ ps aux | grep docker | grep -v grep</code></p> </li> </ol> <h3 id="logs">Logs</h3> <p>By default logs for Upstart jobs are located in <code class="highlighter-rouge">/var/log/upstart</code> and the logs for <code class="highlighter-rouge">docker</code> daemon can be located at <code class="highlighter-rouge">/var/log/upstart/docker.log</code></p> <pre class="highlight" data-language="bash">$ tail -f /var/log/upstart/docker.log

INFO[0000] Loading containers: done.
INFO[0000] Docker daemon commit=1b09a95-unsupported graphdriver=aufs version=1.11.0-dev
INFO[0000] +job acceptconnections()
INFO[0000] -job acceptconnections() = OK (0)
INFO[0000] Daemon has completed initialization
</pre>  <h2 id="centos--red-hat-enterprise-linux--fedora">CentOS / Red Hat Enterprise Linux / Fedora</h2> <p>As of <code class="highlighter-rouge">7.x</code>, CentOS and RHEL use <code class="highlighter-rouge">systemd</code> as the process manager. As of <code class="highlighter-rouge">21</code>, Fedora uses <code class="highlighter-rouge">systemd</code> as its process manager.</p> <p>After successfully installing Docker for <a href="https://docs.docker.com/engine/installation/linux/centos/" target="_blank">CentOS</a>/<a href="https://docs.docker.com/engine/installation/linux/rhel/" target="_blank">Red Hat Enterprise Linux</a>/<a href="https://docs.docker.com/engine/installation/linux/fedora/" target="_blank">Fedora</a>, you can check the running status in this way:</p> <pre class="highlight" data-language="bash">$ sudo systemctl status docker
</pre>  <h3 id="running-docker-1">Running Docker</h3> <p>You can start/stop/restart the <code class="highlighter-rouge">docker</code> daemon using</p> <pre class="highlight" data-language="bash">$ sudo systemctl start docker

$ sudo systemctl stop docker

$ sudo systemctl restart docker
</pre>  <p>If you want Docker to start at boot, you should also:</p> <pre class="highlight" data-language="bash">$ sudo systemctl enable docker
</pre>  <h3 id="configuring-docker-1">Configuring Docker</h3> <p>For CentOS 7.x and RHEL 7.x you can <a href="systemd/">control and configure Docker with systemd</a>.</p> <p>Previously, for CentOS 6.x and RHEL 6.x you would configure the <code class="highlighter-rouge">docker</code> daemon in the <code class="highlighter-rouge">/etc/sysconfig/docker</code> file on your system. You would do this by specifying values in a <code class="highlighter-rouge">other_args</code> variable. For a short time in CentOS 7.x and RHEL 7.x you would specify values in a <code class="highlighter-rouge">OPTIONS</code> variable. This is no longer recommended in favor of using systemd directly.</p> <p>For this section, we will use CentOS 7.x as an example to configure the <code class="highlighter-rouge">docker</code> daemon.</p> <p>To configure Docker options:</p> <ol> <li> <p>Log into your host as a user with <code class="highlighter-rouge">sudo</code> or <code class="highlighter-rouge">root</code> privileges.</p> </li> <li> <p>Create the <code class="highlighter-rouge">/etc/systemd/system/docker.service.d</code> directory.</p> <pre class="highlight" data-language="bash">$ sudo mkdir /etc/systemd/system/docker.service.d
</pre>  </li> <li> <p>Create a <code class="highlighter-rouge">/etc/systemd/system/docker.service.d/docker.conf</code> file.</p> </li> <li> <p>Open the file with your favorite editor.</p> <pre class="highlight" data-language="bash">$ sudo vi /etc/systemd/system/docker.service.d/docker.conf
</pre>  </li> <li> <p>Override the <code class="highlighter-rouge">ExecStart</code> configuration from your <code class="highlighter-rouge">docker.service</code> file to customize the <code class="highlighter-rouge">docker</code> daemon. To modify the <code class="highlighter-rouge">ExecStart</code> configuration you have to specify an empty configuration followed by a new one as follows:</p> <pre class="highlight" data-language="bash">[Service]
ExecStart=
ExecStart=/usr/bin/dockerd -H fd:// -D --tls=true --tlscert=/var/docker/server.pem --tlskey=/var/docker/serverkey.pem -H tcp://192.168.59.3:2376
</pre>  <p>These options :</p> <ul> <li>Enable <code class="highlighter-rouge">-D</code> (debug) mode</li> <li>Set <code class="highlighter-rouge">tls</code> to true with the server certificate and key specified using <code class="highlighter-rouge">--tlscert</code> and <code class="highlighter-rouge">--tlskey</code> respectively</li> <li>Listen for connections on <code class="highlighter-rouge">tcp://192.168.59.3:2376</code>
</li> </ul> <p>The command line reference has the <a href="../reference/commandline/dockerd/">complete list of daemon flags</a> with explanations.</p> </li> <li> <p>Save and close the file.</p> </li> <li> <p>Flush changes.</p> <pre class="highlight" data-language="bash">$ sudo systemctl daemon-reload
</pre>  </li> <li> <p>Restart the <code class="highlighter-rouge">docker</code> daemon.</p> <pre class="highlight" data-language="bash">$ sudo systemctl restart docker
</pre>  </li> <li> <p>Verify that the <code class="highlighter-rouge">docker</code> daemon is running as specified with the <code class="highlighter-rouge">ps</code> command.</p> <pre class="highlight" data-language="bash">$ ps aux | grep docker | grep -v grep
</pre>  </li> </ol> <h3 id="logs-1">Logs</h3> <p>systemd has its own logging system called the journal. The logs for the <code class="highlighter-rouge">docker</code> daemon can be viewed using <code class="highlighter-rouge">journalctl -u docker</code></p> <pre data-language="">$ sudo journalctl -u docker
May 06 00:22:05 localhost.localdomain systemd[1]: Starting Docker Application Container Engine...
May 06 00:22:05 localhost.localdomain docker[2495]: time="2015-05-06T00:22:05Z" level="info" msg="+job serveapi(unix:///var/run/docker.sock)"
May 06 00:22:05 localhost.localdomain docker[2495]: time="2015-05-06T00:22:05Z" level="info" msg="Listening for HTTP on unix (/var/run/docker.sock)"
May 06 00:22:06 localhost.localdomain docker[2495]: time="2015-05-06T00:22:06Z" level="info" msg="+job init_networkdriver()"
May 06 00:22:06 localhost.localdomain docker[2495]: time="2015-05-06T00:22:06Z" level="info" msg="-job init_networkdriver() = OK (0)"
May 06 00:22:06 localhost.localdomain docker[2495]: time="2015-05-06T00:22:06Z" level="info" msg="Loading containers: start."
May 06 00:22:06 localhost.localdomain docker[2495]: time="2015-05-06T00:22:06Z" level="info" msg="Loading containers: done."
May 06 00:22:06 localhost.localdomain docker[2495]: time="2015-05-06T00:22:06Z" level="info" msg="Docker daemon commit=1b09a95-unsupported graphdriver=aufs version=1.11.0-dev"
May 06 00:22:06 localhost.localdomain docker[2495]: time="2015-05-06T00:22:06Z" level="info" msg="+job acceptconnections()"
May 06 00:22:06 localhost.localdomain docker[2495]: time="2015-05-06T00:22:06Z" level="info" msg="-job acceptconnections() = OK (0)"
</pre> <blockquote> <p>Note: Using and configuring journal is an advanced topic and is beyond the scope of this article.</p> </blockquote>
<div class="_attribution">
  <p class="_attribution-p">
    © 2013–2016 Docker, Inc.<br>Licensed under the Apache License, Version 2.0.<br>Docker and the Docker logo are trademarks or registered trademarks of Docker, Inc. in the United States and/or other countries.<br>Docker, Inc. and other parties may also have trademark rights in other terms used herein.<br>
    <a href="https://docs.docker.com/engine/admin/" class="_attribution-link" target="_blank">https://docs.docker.com/engine/admin/</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
