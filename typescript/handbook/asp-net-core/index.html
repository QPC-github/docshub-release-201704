
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>ASP.NET Core - TypeScript - W3cubDocs</title>
  
  <meta name="description" content="First, install ASP.NET Core if you need it. This quick-start guide uses Visual Studio, which means that you’ll need Visual Studio 2015 in order to &hellip;">
  <meta name="keywords" content="asp, net, core, -, typescript">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/typescript/handbook/asp-net-core/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/typescript.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/typescript/" class="_nav-link" title="" style="margin-left:0;">TypeScript</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _typescript">
				
<h1 class="post-title">ASP.NET Core</h1>     <h2 id="setup">Setup</h2> <h2 id="install-aspnet-core-and-typescript">Install ASP.NET Core and TypeScript</h2> <p>First, <a href="https://get.asp.net" target="_blank">install ASP.NET Core</a> if you need it. This quick-start guide uses Visual Studio, which means that you’ll need Visual Studio 2015 in order to use ASP.NET Core.</p> <p>Next, if your version of Visual Studio does not already have TypeScript, you can install it for <a href="http://www.microsoft.com/en-us/download/details.aspx?id=48593" target="_blank">Visual Studio 2015</a>.</p> <h2 id="create-a-new-project">Create a new project</h2> <ol> <li>Choose <strong>File</strong>
</li> <li>Choose <strong>New Project</strong> (Ctrl + Shift + N)</li> <li>Choose <strong>Visual C#</strong>
</li> <li> <p>Choose <strong>ASP.NET Web Application</strong></p> <p><img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/new-asp-project.png" alt="Create new ASP.NET project"></p> </li> <li> <p>Choose <strong>ASP.NET 5 Empty</strong></p> <p>Let’s uncheck “Host in the cloud” since we’re going to run this locally. <img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/new-asp-project-empty.png" alt="Use empty template"></p> </li> </ol> <p>Run the application and make sure that it works.</p> <h2 id="set-up-the-server">Set up the server</h2> <p>In <code>project.json</code> add another entry in <code>"dependencies"</code>:</p> <pre data-language="javascripton">"Microsoft.AspNet.StaticFiles": "1.0.0-rc1-final"
</pre> <p>The resulting dependencies should look like this:</p> <pre data-language="javascripton">  "dependencies": {
  "Microsoft.AspNet.IISPlatformHandler": "1.0.0-rc1-final",
  "Microsoft.AspNet.Server.Kestrel": "1.0.0-rc1-final",
  "Microsoft.AspNet.StaticFiles": "1.0.0-rc1-final"
  },
</pre> <p>Replace the body of <code>Configure</code> in <code>Startup.cs</code> with</p> <pre data-language="cs">public void Configure(IApplicationBuilder app)
{
  app.UseIISPlatformHandler();
  app.UseDefaultFiles();
  app.UseStaticFiles();
}
</pre> <h2 id="add-typescript">Add TypeScript</h2> <p>The next step is to add a folder for TypeScript.</p> <p><img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/new-folder.png" alt="Create new folder"></p> <p>We’ll just call it <code>scripts</code>.</p> <p><img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/scripts-folder.png" alt="scripts folder"></p> <h2 id="add-typescript-code">Add TypeScript code</h2> <p>Right click on <code>scripts</code> and click <strong>New Item</strong>. Then choose <strong>TypeScript File</strong> (it may be in the .NET Core section) and name the file <code>app.ts</code>.</p> <p><img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/new-item.png" alt="New item"></p> <h2 id="add-example-code">Add example code</h2> <p>Type the following code into app.ts.</p> <pre data-language="typescript">function sayHello() {
  const compiler = (document.getElementById("compiler") as HTMLInputElement).value;
  const framework = (document.getElementById("framework") as HTMLInputElement).value;
  return `Hello from ${compiler} and ${framework}!`;
}
</pre> <h2 id="set-up-the-build">Set up the build</h2> <h3 id="configure-the-typescript-compiler">Configure the TypeScript compiler</h3> <p>First we need to tell TypeScript how to build. Right click on the scripts folder and click <strong>New Item</strong>. Then choose <strong>TypeScript Configuration File</strong> and use the default name <code>tsconfig.json</code>.</p> <p><img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/new-tsconfig.png" alt="Create tsconfig.json"></p> <p>Replace the default <code>tsconfig.json</code> with the following:</p> <pre data-language="javascripton">{
  "compilerOptions": {
    "noImplicitAny": true,
    "noEmitOnError": true,
    "sourceMap": true,
    "target": "es5"
  },
  "files": [
    "./app.ts"
  ],
  "compileOnSave": true
}
</pre> <p>This is similar to the default, with the following differences:</p> <ol> <li>It sets <code>"noImplicitAny": true</code>.</li> <li>It explicitly lists <code>"files"</code> instead of relying on <code>"excludes"</code>.</li> <li>It sets <code>"compileOnSave": true</code>.</li> </ol> <p><code>"noImplicitAny"</code> is good idea whenever you’re writing new code — you can make sure that you don’t write any untyped code by mistake. <code>"compileOnSave"</code> makes it easy to update your code in a running web app.</p> <h3 id="set-up-npm">Set up NPM</h3> <p>Now we need to set up NPM so we can download JavaScript packages. Right click on the project and click <strong>New Item</strong>. Then choose <strong>NPM Configuration File</strong> and use the default name <code>package.json</code>. Inside <code>"devDependencies"</code> add “gulp” and “del”:</p> <pre data-language="javascripton">"devDependencies": {
  "gulp": "3.9.0",
  "del": "2.2.0"
}
</pre> <p>Visual Studio should start installing gulp and del as soon as you save the file. If not, right-click package.json and then <strong>Restore Packages</strong>.</p> <h3 id="set-up-gulp">Set up gulp</h3> <p>Finally, add a new JavaScript file named <code>gulpfile.js</code>. Put the following code inside:</p> <pre data-language="javascript">/// &lt;binding AfterBuild='default' Clean='clean' /&gt;
/*
This file is the main entry point for defining Gulp tasks and using Gulp plugins.
Click here to learn more. http://go.microsoft.com/fwlink/?LinkId=518007
*/

var gulp = require('gulp');
var del = require('del');

var paths = {
  scripts: ['scripts/**/*.js', 'scripts/**/*.ts', 'scripts/**/*.map'],
};

gulp.task('clean', function () {
  return del(['wwwroot/scripts/**/*']);
});

gulp.task('default', function () {
  gulp.src(paths.scripts).pipe(gulp.dest('wwwroot/scripts'))
});
</pre> <p>The first line tells Visual Studio to run the task ‘default’ after the build finishes. It will also run the ‘clean’ task when you ask Visual Studio to clean the build.</p> <p>Now right-click on <code>gulpfile.js</code> and click <strong>Task Runner Explorer</strong>. If ‘default’ and ‘clean’ tasks don’t show up, refresh the explorer:</p> <p><img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/task-runner-explorer.png" alt="Refresh Task Runner Explorer"></p> <h2 id="write-an-html-page">Write an HTML page</h2> <p>Add a New Item named <code>index.html</code> inside <code>wwwroot</code>. Use the following code for <code>index.html</code>:</p> <pre data-language="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8" /&gt;
  &lt;script src="scripts/app.js"&gt;&lt;/script&gt;
  &lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id="message"&gt;&lt;/div&gt;
  &lt;div&gt;
    Compiler: &lt;input id="compiler" value="TypeScript" onkeyup="document.getElementById('message').innerText = sayHello()" /&gt;&lt;br /&gt;
    Framework: &lt;input id="framework" value="ASP.NET" onkeyup="document.getElementById('message').innerText = sayHello()" /&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre> <h2 id="test">Test</h2> <ol> <li>Run the project.</li> <li>You should see a message when you type in the input boxes:</li> </ol> <p><img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/running-demo.png" alt="Picture of running demo"></p> <h2 id="debug">Debug</h2> <ol> <li>In Edge, press F12 and click the <strong>Debugger</strong> tab.</li> <li>Look in the first localhost folder, then src/app.ts</li> <li>Put a breakpoint on the line with <code>return</code>.</li> <li>Type in the boxes and confirm that the breakpoint hits in TypeScript code and that inspection works correctly.</li> </ol> <p><img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/paused-demo.png" alt="Demo paused on breakpoint"></p> <p>That’s all you need to know to include basic TypeScript in your ASP.NET project. Next we’ll include Angular and write a simple Angular app.</p> <h2 id="add-angular-2">Add Angular 2</h2> <h2 id="add-npm-dependencies">Add NPM dependencies</h2> <p>Add the following <code>"dependencies"</code> to <code>package.json</code> to install Angular 2 and SystemJS:</p> <pre data-language="javascripton">  "dependencies": {
  "angular2": "2.0.0-beta.11",
  "systemjs": "0.19.24",
  },
</pre> <h2 id="update-tsconfigjson">Update tsconfig.json</h2> <p>Now that Angular 2 and its dependencies are installed, we need to enable TypeScript’s experimental support for decorators. We also need to add declarations for ES2015, since Angular uses core-js for things like <code>Promise</code>. In the future decorators will be the default and these settings will not be needed.</p> <p>Add <code>"experimentalDecorators": true, "emitDecoratorMetadata": true</code> to the <code>"compilerOptions"</code> section. Next, add <code>"lib": ["es2015", "es5", "dom"]</code> to <code>"compilerOptions"</code> as well to bring in declarations from ES2015. Finally, we’ll need to add a new entry in <code>"files"</code> for another file, <code>"./model.ts"</code>, which we’ll create. Our tsconfig should now look like this:</p> <pre data-language="javascripton">{
  "compilerOptions": {
    "noImplicitAny": true,
    "noEmitOnError": true,
    "sourceMap": true,
    "experimentalDecorators": true,
    "emitDecoratorMetadata": true,
    "target": "es5",
    "lib": [
      "es2015", "es5", "dom"
    ]
  },
  "files": [
    "./app.ts",
    "./model.ts",
    "./main.ts",
  ],
  "compileOnSave": true
}
</pre> <h2 id="add-angular-to-the-gulp-build">Add Angular to the gulp build</h2> <p>Finally, we need to make sure that the Angular files are copied as part of the build. We need to add:</p> <ol> <li>The paths to the library files.</li> <li>Add a <code>lib</code> task to pipe the files to <code>wwwroot</code>.</li> <li>Add a dependendency on <code>lib</code> to the <code>default</code> task.</li> </ol> <p>The updated <code>gulpfile.js</code> should look like this:</p> <pre data-language="xml">/// &lt;binding AfterBuild='default' Clean='clean' /&gt;
/*
This file is the main entry point for defining Gulp tasks and using Gulp plugins.
Click here to learn more. http://go.microsoft.com/fwlink/?LinkId=518007
*/

var gulp = require('gulp');
var del = require('del');

var paths = {
  scripts: ['scripts/**/*.js', 'scripts/**/*.ts', 'scripts/**/*.map'],
  libs: ['node_modules/angular2/bundles/angular2.js',
       'node_modules/angular2/bundles/angular2-polyfills.js',
       'node_modules/systemjs/dist/system.src.js',
       'node_modules/rxjs/bundles/Rx.js']
};

gulp.task('lib', function () {
  gulp.src(paths.libs).pipe(gulp.dest('wwwroot/scripts/lib'))
});

gulp.task('clean', function () {
  return del(['wwwroot/scripts/**/*']);
});

gulp.task('default', ['lib'], function () {
  gulp.src(paths.scripts).pipe(gulp.dest('wwwroot/scripts'))
});
</pre> <p>Again, make sure that Task Runner Explorer sees the new <code>lib</code> task after you save the gulpfile.</p> <h2 id="write-a-simple-angular-app-in-typescript">Write a simple Angular app in TypeScript</h2> <p>First, change the code in <code>app.ts</code> to:</p> <pre data-language="typescript">import {Component} from "angular2/core"
import {MyModel} from "./model"

@Component({
  selector: `my-app`,
  template: `&lt;div&gt;Hello from &lt;/div&gt;`
})
class MyApp {
  model = new MyModel();
  getCompiler() {
    return this.model.compiler;
  }
}
</pre> <p>Then add another TypeScript file in <code>src</code> named <code>model.ts</code>:</p> <pre data-language="typescript">export class MyModel {
  compiler = "TypeScript";
}
</pre> <p>And then another TypeScript file in <code>src</code> named <code>main.ts</code>:</p> <pre data-language="typescript">import {bootstrap} from "angular2/platform/browser";
import {MyApp} from "./app";
bootstrap(MyApp);
</pre> <p>Finally, change the code in <code>index.html</code> to the following:</p> <pre data-language="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8" /&gt;
  &lt;script src="scripts/lib/angular2-polyfills.js"&gt;&lt;/script&gt;
  &lt;script src="scripts/lib/system.src.js"&gt;&lt;/script&gt;
  &lt;script src="scripts/lib/rx.js"&gt;&lt;/script&gt;
  &lt;script src="scripts/lib/angular2.js"&gt;&lt;/script&gt;
  &lt;script&gt;
  System.config({
    packages: {
      'scripts': {
        format: 'cjs',
        defaultExtension: 'js'
      }
    }
  });
  System.import('scripts/main').then(null, console.error.bind(console));
  &lt;/script&gt;
  &lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;my-app&gt;Loading...&lt;/my-app&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre> <p>This loads the app. When you run the ASP.NET application you should see a div that says “Loading…” and then updates to say “Hello from TypeScript”.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © Microsoft and other contributors<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://www.typescriptlang.org/docs/handbook/asp-net-core.html" class="_attribution-link" target="_blank">https://www.typescriptlang.org/docs/handbook/asp-net-core.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
