
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>ASP.NET 4 - TypeScript - W3cubDocs</title>
  
  <meta name="description" content="If your version of Visual Studio does not already have TypeScript, you can install it for Visual Studio 2015 or Visual Studio 2013. This quickstart &hellip;">
  <meta name="keywords" content="asp, net, -, typescript">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/typescript/handbook/asp-net-4/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/typescript.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/typescript/" class="_nav-link" title="" style="margin-left:0;">TypeScript</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _typescript">
				
<h1 class="post-title">ASP.NET 4</h1>     <h2 id="setup">Setup</h2> <h2 id="install-typescript">Install TypeScript</h2> <p>If your version of Visual Studio does not already have TypeScript, you can install it for <a href="http://www.microsoft.com/en-us/download/details.aspx?id=48593" target="_blank">Visual Studio 2015</a> or <a href="https://www.microsoft.com/en-us/download/details.aspx?id=48739" target="_blank">Visual Studio 2013</a>. This quickstart uses Visual Studio 2015.</p> <h2 id="create-a-new-project">Create a new project</h2> <ol> <li>Choose <strong>File</strong>
</li> <li>Choose <strong>New Project</strong>
</li> <li>Choose <strong>Visual C#</strong>
</li> <li> <p>Choose <strong>ASP.NET Web Application</strong></p> <p><img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/new-asp-project.png" alt="Create new ASP.NET project"></p> </li> <li> <p>Choose <strong>MVC</strong></p> <p>I unchecked “Host in the cloud” since this will be a local demo. <img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/new-asp-project-template.png" alt="Use MVC template"></p> </li> </ol> <p>Run the application and make sure that it works.</p> <h2 id="add-typescript">Add TypeScript</h2> <p>The next step is to add a folder for TypeScript.</p> <p><img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/new-folder.png" alt="Create new folder"></p> <p>We’ll just call it src.</p> <p><img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/src-folder.png" alt="src folder"></p> <h2 id="add-typescript-code">Add TypeScript code</h2> <p>Right click on <code>src</code> and click <strong>New Item</strong>. Then choose <strong>TypeScript File</strong> and name the file <code>app.ts</code>.</p> <p><img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/new-item.png" alt="New item"></p> <h2 id="add-example-code">Add example code</h2> <p>Type the following code into <code>app.ts</code>.</p> <pre data-language="typescript">function sayHello() {
  const compiler = (document.getElementById("compiler") as HTMLInputElement).value;
  const framework = (document.getElementById("framework") as HTMLInputElement).value;
  return `Hello from ${compiler} and ${framework}!`;
}
</pre> <h2 id="set-up-the-build">Set up the build</h2> <p>Right click on the project and click <strong>New Item</strong>. Then choose <strong>TypeScript Configuration File</strong> and use the default name <code>tsconfig.json</code>.</p> <p><img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/new-tsconfig.png" alt="Create tsconfig.json"></p> <p>Replace the default <code>tsconfig.json</code> with the following:</p> <pre data-language="javascripton">{
  "compilerOptions": {
  "noImplicitAny": true,
  "noEmitOnError": true,
  "sourceMap": true,
  "target": "es5",
  "outDir": "./Scripts/App"
  },
  "files": [
  "./src/app.ts",
  ],
  "compileOnSave": true
}
</pre> <p>This is similar to the default, with the following differences:</p> <ol> <li>It sets <code>"noImplicitAny": true</code>.</li> <li>It specifies that <code>"outDir": "./Scripts/App"</code>.</li> <li>It explicitly lists <code>"files"</code> instead of relying on <code>"excludes"</code>.</li> <li>It sets <code>"compileOnSave": true</code>.</li> </ol> <p><code>"noImplicitAny"</code> is good idea whenever you’re writing new code — you can make sure that you don’t write any untyped code by mistake. <code>"compileOnSave"</code> makes it easy to update your code in a running web app. See <a href="../../tsconfig-json/">the tsconfig.json documentation</a> for more information.</p> <h2 id="call-the-script-from-a-view">Call the script from a view</h2> <ol> <li> <table> <tbody> <tr> <td>In the <strong>Solution Explorer</strong>, open <strong>Views</strong>
</td> <td><strong>Home</strong></td> <td>
<code>Index.cshtml</code>.</td> </tr> </tbody> </table> <p><img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/open-index.png" alt="Open Index.cshtml"></p> </li> <li> <p>Change the code to be the following:</p> <pre data-language="html">@{
  ViewBag.Title = "Home Page";
}
&lt;script src="~/Scripts/App/app.js"&gt;&lt;/script&gt;
&lt;div id="message"&gt;&lt;/div&gt;
&lt;div&gt;
  Compiler: &lt;input id="compiler" value="TypeScript" onkeyup="document.getElementById('message').innerText = sayHello()" /&gt;&lt;br /&gt;
  Framework: &lt;input id="framework" value="ASP.NET" onkeyup="document.getElementById('message').innerText = sayHello()" /&gt;
&lt;/div&gt;
</pre> </li> </ol> <h2 id="test">Test</h2> <ol> <li>Run the project.</li> <li>You should see a message when you type in the input boxes:</li> </ol> <p><img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/running-demo.png" alt="Picture of running demo"></p> <h2 id="debug">Debug</h2> <ol> <li>In Edge, press F12 and click the <strong>Debugger</strong> tab.</li> <li>Look in the first localhost folder, then src/app.ts</li> <li>Put a breakpoint on the line with <code>return</code>.</li> <li>Type in the boxes and confirm that the breakpoint hits in TypeScript code and that inspection works correctly.</li> </ol> <p><img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/paused-demo.png" alt="Demo paused on breakpoint"></p> <p>That’s all you need to know to include basic TypeScript in your ASP.NET project. Next we’ll include Angular and write a simple Angular app.</p> <h2 id="add-angular-2">Add Angular 2</h2> <h2 id="download-packages-from-npm">Download packages from NPM</h2> <ol> <li> <p>Install <a href="https://github.com/madskristensen/PackageInstaller" target="_blank">PackageInstaller</a>.</p> </li> <li> <p>Use PackageInstaller to install Angular 2, systemjs and Typings.</p> <p>Right-click on the project, then click on <strong>Quick Install Package</strong>.</p> <p><img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/packageinstaller-angular2.png" alt="Use PackageInstaller to install angular2"> <img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/packageinstaller-systemjs.png" alt="Use PackageInstaller to install systemjs"> <img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/packageinstaller-typings.png" alt="Use PackageInstaller to install Typings"></p> </li> <li> <p>Use PackageInstaller to install typings for es6-shim.</p> <p>Angular 2 includes es6-shim for Promise support, but TypeScript still needs the types. In PackageInstaller, choose Typing instead of npm. Then type “es6-shim”:</p> <p><img src="https://www.typescriptlang.org/assets/images/tutorials/aspnet/packageinstaller-es6-shim.png" alt="Use PackageInstaller to install es6-shim typings"></p> </li> </ol> <h2 id="update-tsconfigjson">Update tsconfig.json</h2> <p>Now that Angular 2 and its dependencies are installed, we need to enable TypeScript’s experimental support for decorators and include the es6-shim typings. In the future decorators and ES6 will be the default and these settings will not be needed. Add <code>"experimentalDecorators": true, "emitDecoratorMetadata": true</code> to the <code>"compilerOptions"</code> section, and add <code>"./typings/index.d.ts"</code> to the <code>"files"</code> section. Finally, we need to add a new entry in <code>"files"</code> for another file, <code>"./src/model.ts"</code>, that we will create. Our <code>tsconfig.json</code> should now look like this:</p> <pre data-language="javascripton">{
  "compilerOptions": {
  "noImplicitAny": false,
  "noEmitOnError": true,
  "sourceMap": true,
  "target": "es5",
  "experimentalDecorators": true,
  "emitDecoratorMetadata": true,
  "outDir": "./Scripts/App"
  },
  "files": [
  "./src/app.ts",
  "./src/model.ts",
  "./src/main.ts",
  "./typings/index.d.ts"
  ]
}
</pre> <h2 id="add-a-copyfiles-target-to-the-build">Add a CopyFiles target to the build</h2> <p>Finally, we need to make sure that the Angular files are copied as part of the build. To do this, edit the project by right-clicking ‘Unload’ and then ‘Edit csproj’. After the TypeScript configuration PropertyGroup, add a new ItemGroup and Target to copy the angular files.</p> <pre data-language="xml">&lt;ItemGroup&gt;
  &lt;NodeLib Include="$(MSBuildProjectDirectory)\node_modules\angular2\bundles\angular2.js"/&gt;
  &lt;NodeLib Include="$(MSBuildProjectDirectory)\node_modules\angular2\bundles\angular2-polyfills.js"/&gt;
  &lt;NodeLib Include="$(MSBuildProjectDirectory)\node_modules\systemjs\dist\system.src.js"/&gt;
  &lt;NodeLib Include="$(MSBuildProjectDirectory)\node_modules\rxjs\bundles\Rx.js"/&gt;
&lt;/ItemGroup&gt;
&lt;Target Name="CopyFiles" BeforeTargets="Build"&gt;
  &lt;Copy SourceFiles="@(NodeLib)" DestinationFolder="$(MSBuildProjectDirectory)\Scripts"/&gt;
&lt;/Target&gt;
</pre> <p>Now right-click on the project and reload it. You should now see <code>node_modules</code> in the Solution Explorer.</p> <h2 id="write-a-simple-angular-app-in-typescript">Write a simple Angular app in TypeScript</h2> <p>First, change the code in <code>app.ts</code> to:</p> <pre data-language="typescript">import {Component} from "angular2/core"
import {MyModel} from "./model"

@Component({
  selector: `my-app`,
  template: `&lt;div&gt;Hello from &lt;/div&gt;`
})
class MyApp {
  model = new MyModel();
  getCompiler() {
    return this.model.compiler;
  }
}
</pre> <p>Then add another TypeScript file in <code>src</code> named <code>model.ts</code>:</p> <pre data-language="typescript">export class MyModel {
  compiler = "TypeScript";
}
</pre> <p>And then another TypeScript file in <code>src</code> named <code>main.ts</code>:</p> <pre data-language="typescript">import {bootstrap} from "angular2/platform/browser";
import {MyApp} from "./app";
bootstrap(MyApp);
</pre> <p>Finally, change the code in <code>Views/Home/Index.cshtml</code> to the following:</p> <pre data-language="html">@{
  ViewBag.Title = "Home Page";
}
&lt;script src="~/Scripts/angular2-polyfills.js"&gt;&lt;/script&gt;
&lt;script src="~/Scripts/system.src.js"&gt;&lt;/script&gt;
&lt;script src="~/Scripts/rx.js"&gt;&lt;/script&gt;
&lt;script src="~/Scripts/angular2.js"&gt;&lt;/script&gt;
&lt;script&gt;
  System.config({
    packages: {
      '/Scripts/App': {
        format: 'cjs',
        defaultExtension: 'js'
      }
    }
  });
  System.import('/Scripts/App/main').then(null, console.error.bind(console));
&lt;/script&gt;
&lt;my-app&gt;Loading...&lt;/my-app&gt;
</pre> <p>This loads the app. When you run the ASP.NET application you should see a div that says “Loading…” and then updates to say “Hello from TypeScript”.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © Microsoft and other contributors<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://www.typescriptlang.org/docs/handbook/asp-net-4.html" class="_attribution-link" target="_blank">https://www.typescriptlang.org/docs/handbook/asp-net-4.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
