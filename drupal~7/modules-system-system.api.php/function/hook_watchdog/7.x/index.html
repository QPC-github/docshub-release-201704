
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Hook_watchdog - Drupal 7 - W3cubDocs</title>
  
  <meta name="description" content=" Log an event message. ">
  <meta name="keywords" content="function, hook, watchdog, -, drupal, drupal~7">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/drupal~7/modules-system-system.api.php/function/hook_watchdog/7.x/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/drupal~7.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/drupal~7/" class="_nav-link" title="" style="margin-left:0;">Drupal 7</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _drupal">
				
<h1 id="page-subtitle">function hook_watchdog</h1>     <pre class="signature">hook_watchdog(array $log_entry)</pre> <p>Log an event message.</p> <p>This hook allows modules to route log events to custom destinations, such as SMS, Email, pager, syslog, ...etc.</p> <h3>Parameters</h3> <p> <strong>$log_entry</strong>: An associative array containing the following keys:</p> <ul> <li>
<strong>type</strong>: The type of message for this entry.</li> <li>
<strong>user</strong>: The user object for the user who was logged in when the event happened.</li> <li>
<strong>uid</strong>: The user ID for the user who was logged in when the event happened.</li> <li>
<strong>request_uri</strong>: The request URI for the page the event happened in.</li> <li>
<strong>referer</strong>: The page that referred the user to the page where the event occurred.</li> <li>
<strong>ip</strong>: The IP address where the request for the page came from.</li> <li>
<strong>timestamp</strong>: The UNIX timestamp of the date/time the event occurred.</li> <li>
<strong>severity</strong>: The severity of the message; one of the following values as defined in <a href="http://www.faqs.org/rfcs/rfc3164.html" target="_blank">RFC 3164:</a> <ul> <li>
<strong><a href="../../../../includes-bootstrap.inc/constant/watchdog_emergency/7.x/" title="Log message severity -- Emergency: system is unusable." class="local">WATCHDOG_EMERGENCY</a></strong>: Emergency, system is unusable.</li> <li>
<strong><a href="../../../../includes-bootstrap.inc/constant/watchdog_alert/7.x/" title="Log message severity -- Alert: action must be taken immediately." class="local">WATCHDOG_ALERT</a></strong>: Alert, action must be taken immediately.</li> <li>
<strong><a href="../../../../includes-bootstrap.inc/constant/watchdog_critical/7.x/" title="Log message severity -- Critical conditions." class="local">WATCHDOG_CRITICAL</a></strong>: Critical conditions.</li> <li>
<strong><a href="../../../../includes-bootstrap.inc/constant/watchdog_error/7.x/" title="Log message severity -- Error conditions." class="local">WATCHDOG_ERROR</a></strong>: Error conditions.</li> <li>
<strong><a href="../../../../includes-bootstrap.inc/constant/watchdog_warning/7.x/" title="Log message severity -- Warning conditions." class="local">WATCHDOG_WARNING</a></strong>: Warning conditions.</li> <li>
<strong><a href="../../../../includes-bootstrap.inc/constant/watchdog_notice/7.x/" title="Log message severity -- Normal but significant conditions." class="local">WATCHDOG_NOTICE</a></strong>: Normal but significant conditions.</li> <li>
<strong><a href="../../../../includes-bootstrap.inc/constant/watchdog_info/7.x/" title="Log message severity -- Informational messages." class="local">WATCHDOG_INFO</a></strong>: Informational messages.</li> <li>
<strong><a href="../../../../includes-bootstrap.inc/constant/watchdog_debug/7.x/" title="Log message severity -- Debug-level messages." class="local">WATCHDOG_DEBUG</a></strong>: Debug-level messages.</li> </ul> </li> <li>
<strong>link</strong>: An optional link provided by the module that called the <a href="../../../../includes-bootstrap.inc/function/watchdog/7.x/" title="Logs a system message." class="local">watchdog</a>() function.</li> <li>
<strong>message</strong>: The text of the message to be logged. Variables in the message are indicated by using placeholder strings alongside the variables argument to declare the value of the placeholders. See <a href="../../../../includes-bootstrap.inc/function/t/7.x/" title="Translates a string to the current language or to a given language." class="local">t</a>() for documentation on how the message and variable parameters interact.</li> <li>
<strong>variables</strong>: An array of variables to be inserted into the message on display. Will be NULL or missing if a message is already translated or if the message is not possible to translate.</li> </ul> <h3>Related topics</h3> <div class="view view-api-references view-id-api_references view-display-id-block_related_topics view-dom-id-c751c5a0754139111abb8efff261ed2a"> <div class="view-content"> <dl api-related-topics> <dt><a href="../../../../includes-module.inc/group/hooks/7.x/">Hooks</a></dt> <dd>Allow modules to interact with the Drupal core.</dd> </dl> </div> </div>  <h3>File</h3> 
<dl> <dt>modules/system/<a href="../../../7.x/">system.api.php</a>, line 2506</dt> <dd>Hooks provided by Drupal core and the System module.</dd> </dl> <h3>Code</h3> <pre class="php" data-language="php">function hook_watchdog(array $log_entry) {
  global $base_url, $language;

  $severity_list = array(
    WATCHDOG_EMERGENCY =&gt; t('Emergency'),
    WATCHDOG_ALERT =&gt; t('Alert'),
    WATCHDOG_CRITICAL =&gt; t('Critical'),
    WATCHDOG_ERROR =&gt; t('Error'),
    WATCHDOG_WARNING =&gt; t('Warning'),
    WATCHDOG_NOTICE =&gt; t('Notice'),
    WATCHDOG_INFO =&gt; t('Info'),
    WATCHDOG_DEBUG =&gt; t('Debug'),
  );

  $to = 'someone@example.com';
  $params = array();
  $params['subject'] = t('[@site_name] @severity_desc: Alert from your web site', array(
    '@site_name' =&gt; variable_get('site_name', 'Drupal'),
    '@severity_desc' =&gt; $severity_list[$log_entry['severity']],
  ));

  $params['message'] = "\nSite:         @base_url";
  $params['message'] .= "\nSeverity:     (@severity) @severity_desc";
  $params['message'] .= "\nTimestamp:    @timestamp";
  $params['message'] .= "\nType:         @type";
  $params['message'] .= "\nIP Address:   @ip";
  $params['message'] .= "\nRequest URI:  @request_uri";
  $params['message'] .= "\nReferrer URI: @referer_uri";
  $params['message'] .= "\nUser:         (@uid) @name";
  $params['message'] .= "\nLink:         @link";
  $params['message'] .= "\nMessage:      \n\n@message";

  $params['message'] = t($params['message'], array(
    '@base_url' =&gt; $base_url,
    '@severity' =&gt; $log_entry['severity'],
    '@severity_desc' =&gt; $severity_list[$log_entry['severity']],
    '@timestamp' =&gt; format_date($log_entry['timestamp']),
    '@type' =&gt; $log_entry['type'],
    '@ip' =&gt; $log_entry['ip'],
    '@request_uri' =&gt; $log_entry['request_uri'],
    '@referer_uri' =&gt; $log_entry['referer'],
    '@uid' =&gt; $log_entry['uid'],
    '@name' =&gt; $log_entry['user']-&gt;name,
    '@link' =&gt; strip_tags($log_entry['link']),
    '@message' =&gt; strip_tags($log_entry['message']),
  ));

  drupal_mail('emaillog', 'entry', $to, $language, $params);
}
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © 2001–2016 by the original authors<br>Licensed under the GNU General Public License, version 2 and later.<br>Drupal is a registered trademark of Dries Buytaert.<br>
    <a href="https://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_watchdog/7.x" class="_attribution-link" target="_blank">https://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_watchdog/7.x</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
