
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Standard_install - Drupal 7 - W3cubDocs</title>
  
  <meta name="description" content=" Implements hook_install(). ">
  <meta name="keywords" content="function, standard, install, -, drupal, drupal~7">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/drupal~7/profiles-standard-standard.install/function/standard_install/7.x/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/drupal~7.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/drupal~7/" class="_nav-link" title="" style="margin-left:0;">Drupal 7</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _drupal">
				
<h1 id="page-subtitle">function standard_install</h1>     <pre class="signature">standard_install()</pre> <p>Implements <a href="../../../../modules-system-system.api.php/function/hook_install/7.x/" title="Perform setup tasks when the module is installed." class="local">hook_install</a>().</p> <p>Perform actions to set up the site for this profile.</p> <h3>See also</h3> <p> <a href="../../../../modules-system-system.install/function/system_install/7.x/" title="Implements hook_install()." class="local">system_install</a>()</p> <h3>File</h3> 
<dl> <dt>profiles/standard/<a href="https://api.drupal.org/api/drupal/profiles%21standard%21standard.install/7.x" target="_blank">standard.install</a>, line 14</dt> <dd>Install, update and uninstall functions for the standard installation profile.</dd> </dl> <h3>Code</h3> <pre class="php" data-language="php">function standard_install() {
  // Add text formats.
  $filtered_html_format = array(
    'format' =&gt; 'filtered_html',
    'name' =&gt; 'Filtered HTML',
    'weight' =&gt; 0,
    'filters' =&gt; array(
      // URL filter.
      'filter_url' =&gt; array(
        'weight' =&gt; 0,
        'status' =&gt; 1,
      ),
      // HTML filter.
      'filter_html' =&gt; array(
        'weight' =&gt; 1,
        'status' =&gt; 1,
      ),
      // Line break filter.
      'filter_autop' =&gt; array(
        'weight' =&gt; 2,
        'status' =&gt; 1,
      ),
      // HTML corrector filter.
      'filter_htmlcorrector' =&gt; array(
        'weight' =&gt; 10,
        'status' =&gt; 1,
      ),
    ),
  );
  $filtered_html_format = (object) $filtered_html_format;
  filter_format_save($filtered_html_format);

  $full_html_format = array(
    'format' =&gt; 'full_html',
    'name' =&gt; 'Full HTML',
    'weight' =&gt; 1,
    'filters' =&gt; array(
      // URL filter.
      'filter_url' =&gt; array(
        'weight' =&gt; 0,
        'status' =&gt; 1,
      ),
      // Line break filter.
      'filter_autop' =&gt; array(
        'weight' =&gt; 1,
        'status' =&gt; 1,
      ),
      // HTML corrector filter.
      'filter_htmlcorrector' =&gt; array(
        'weight' =&gt; 10,
        'status' =&gt; 1,
      ),
    ),
  );
  $full_html_format = (object) $full_html_format;
  filter_format_save($full_html_format);

  // Enable some standard blocks.
  $default_theme = variable_get('theme_default', 'bartik');
  $admin_theme = 'seven';
  $blocks = array(
    array(
      'module' =&gt; 'system',
      'delta' =&gt; 'main',
      'theme' =&gt; $default_theme,
      'status' =&gt; 1,
      'weight' =&gt; 0,
      'region' =&gt; 'content',
      'pages' =&gt; '',
      'cache' =&gt; -1,
    ),
    array(
      'module' =&gt; 'search',
      'delta' =&gt; 'form',
      'theme' =&gt; $default_theme,
      'status' =&gt; 1,
      'weight' =&gt; -1,
      'region' =&gt; 'sidebar_first',
      'pages' =&gt; '',
      'cache' =&gt; -1,
    ),
    array(
      'module' =&gt; 'node',
      'delta' =&gt; 'recent',
      'theme' =&gt; $admin_theme,
      'status' =&gt; 1,
      'weight' =&gt; 10,
      'region' =&gt; 'dashboard_main',
      'pages' =&gt; '',
      'cache' =&gt; -1,
    ),
    array(
      'module' =&gt; 'user',
      'delta' =&gt; 'login',
      'theme' =&gt; $default_theme,
      'status' =&gt; 1,
      'weight' =&gt; 0,
      'region' =&gt; 'sidebar_first',
      'pages' =&gt; '',
      'cache' =&gt; -1,
    ),
    array(
      'module' =&gt; 'system',
      'delta' =&gt; 'navigation',
      'theme' =&gt; $default_theme,
      'status' =&gt; 1,
      'weight' =&gt; 0,
      'region' =&gt; 'sidebar_first',
      'pages' =&gt; '',
      'cache' =&gt; -1,
    ),
    array(
      'module' =&gt; 'system',
      'delta' =&gt; 'powered-by',
      'theme' =&gt; $default_theme,
      'status' =&gt; 1,
      'weight' =&gt; 10,
      'region' =&gt; 'footer',
      'pages' =&gt; '',
      'cache' =&gt; -1,
    ),
    array(
      'module' =&gt; 'system',
      'delta' =&gt; 'help',
      'theme' =&gt; $default_theme,
      'status' =&gt; 1,
      'weight' =&gt; 0,
      'region' =&gt; 'help',
      'pages' =&gt; '',
      'cache' =&gt; -1,
    ),
    array(
      'module' =&gt; 'system',
      'delta' =&gt; 'main',
      'theme' =&gt; $admin_theme,
      'status' =&gt; 1,
      'weight' =&gt; 0,
      'region' =&gt; 'content',
      'pages' =&gt; '',
      'cache' =&gt; -1,
    ),
    array(
      'module' =&gt; 'system',
      'delta' =&gt; 'help',
      'theme' =&gt; $admin_theme,
      'status' =&gt; 1,
      'weight' =&gt; 0,
      'region' =&gt; 'help',
      'pages' =&gt; '',
      'cache' =&gt; -1,
    ),
    array(
      'module' =&gt; 'user',
      'delta' =&gt; 'login',
      'theme' =&gt; $admin_theme,
      'status' =&gt; 1,
      'weight' =&gt; 10,
      'region' =&gt; 'content',
      'pages' =&gt; '',
      'cache' =&gt; -1,
    ),
    array(
      'module' =&gt; 'user',
      'delta' =&gt; 'new',
      'theme' =&gt; $admin_theme,
      'status' =&gt; 1,
      'weight' =&gt; 0,
      'region' =&gt; 'dashboard_sidebar',
      'pages' =&gt; '',
      'cache' =&gt; -1,
    ),
    array(
      'module' =&gt; 'search',
      'delta' =&gt; 'form',
      'theme' =&gt; $admin_theme,
      'status' =&gt; 1,
      'weight' =&gt; -10,
      'region' =&gt; 'dashboard_sidebar',
      'pages' =&gt; '',
      'cache' =&gt; -1,
    ),
  );
  $query = db_insert('block')-&gt;fields(array('module', 'delta', 'theme', 'status', 'weight', 'region', 'pages', 'cache'));
  foreach ($blocks as $block) {
    $query-&gt;values($block);
  }
  $query-&gt;execute();

  // Insert default pre-defined node types into the database. For a complete
  // list of available node type attributes, refer to the node type API
  // documentation at: http://api.drupal.org/api/HEAD/function/hook_node_info.
  $types = array(
    array(
      'type' =&gt; 'page',
      'name' =&gt; st('Basic page'),
      'base' =&gt; 'node_content',
      'description' =&gt; st("Use &lt;em&gt;basic pages&lt;/em&gt; for your static content, such as an 'About us' page."),
      'custom' =&gt; 1,
      'modified' =&gt; 1,
      'locked' =&gt; 0,
    ),
    array(
      'type' =&gt; 'article',
      'name' =&gt; st('Article'),
      'base' =&gt; 'node_content',
      'description' =&gt; st('Use &lt;em&gt;articles&lt;/em&gt; for time-sensitive content like news, press releases or blog posts.'),
      'custom' =&gt; 1,
      'modified' =&gt; 1,
      'locked' =&gt; 0,
    ),
  );

  foreach ($types as $type) {
    $type = node_type_set_defaults($type);
    node_type_save($type);
    node_add_body_field($type);
  }

  // Insert default pre-defined RDF mapping into the database.
  $rdf_mappings = array(
    array(
      'type' =&gt; 'node',
      'bundle' =&gt; 'page',
      'mapping' =&gt; array(
        'rdftype' =&gt; array('foaf:Document'),
      ),
    ),
    array(
      'type' =&gt; 'node',
      'bundle' =&gt; 'article',
      'mapping' =&gt; array(
        'field_image' =&gt; array(
          'predicates' =&gt; array('og:image', 'rdfs:seeAlso'),
          'type' =&gt; 'rel',
        ),
        'field_tags' =&gt; array(
          'predicates' =&gt; array('dc:subject'),
          'type' =&gt; 'rel',
        ),
      ),
    ),
  );
  foreach ($rdf_mappings as $rdf_mapping) {
    rdf_mapping_save($rdf_mapping);
  }

  // Default "Basic page" to not be promoted and have comments disabled.
  variable_set('node_options_page', array('status'));
  variable_set('comment_page', COMMENT_NODE_HIDDEN);

  // Don't display date and author information for "Basic page" nodes by default.
  variable_set('node_submitted_page', FALSE);

  // Enable user picture support and set the default to a square thumbnail option.
  variable_set('user_pictures', '1');
  variable_set('user_picture_dimensions', '1024x1024');
  variable_set('user_picture_file_size', '800');
  variable_set('user_picture_style', 'thumbnail');

  // Allow visitor account creation with administrative approval.
  variable_set('user_register', USER_REGISTER_VISITORS_ADMINISTRATIVE_APPROVAL);

  // Create a default vocabulary named "Tags", enabled for the 'article' content type.
  $description = st('Use tags to group articles on similar topics into categories.');
  $vocabulary = (object) array(
    'name' =&gt; st('Tags'),
    'description' =&gt; $description,
    'machine_name' =&gt; 'tags',
  );
  taxonomy_vocabulary_save($vocabulary);

  $field = array(
    'field_name' =&gt; 'field_' . $vocabulary-&gt;machine_name,
    'type' =&gt; 'taxonomy_term_reference',
    // Set cardinality to unlimited for tagging.
    'cardinality' =&gt; FIELD_CARDINALITY_UNLIMITED,
    'settings' =&gt; array(
      'allowed_values' =&gt; array(
        array(
          'vocabulary' =&gt; $vocabulary-&gt;machine_name,
          'parent' =&gt; 0,
        ),
      ),
    ),
  );
  field_create_field($field);

  $help = st('Enter a comma-separated list of words to describe your content.');
  $instance = array(
    'field_name' =&gt; 'field_' . $vocabulary-&gt;machine_name,
    'entity_type' =&gt; 'node',
    'label' =&gt; 'Tags',
    'bundle' =&gt; 'article',
    'description' =&gt; $help,
    'widget' =&gt; array(
      'type' =&gt; 'taxonomy_autocomplete',
      'weight' =&gt; -4,
    ),
    'display' =&gt; array(
      'default' =&gt; array(
        'type' =&gt; 'taxonomy_term_reference_link',
        'weight' =&gt; 10,
      ),
      'teaser' =&gt; array(
        'type' =&gt; 'taxonomy_term_reference_link',
        'weight' =&gt; 10,
      ),
    ),
  );
  field_create_instance($instance);


  // Create an image field named "Image", enabled for the 'article' content type.
  // Many of the following values will be defaulted, they're included here as an illustrative examples.
  // See http://api.drupal.org/api/function/field_create_field/7

  $field = array(
    'field_name' =&gt; 'field_image',
    'type' =&gt; 'image',
    'cardinality' =&gt; 1,
    'locked' =&gt; FALSE,
    'indexes' =&gt; array('fid' =&gt; array('fid')),
    'settings' =&gt; array(
      'uri_scheme' =&gt; 'public',
      'default_image' =&gt; FALSE,
    ),
    'storage' =&gt; array(
      'type' =&gt; 'field_sql_storage',
      'settings' =&gt; array(),
    ),
  );
  field_create_field($field);


  // Many of the following values will be defaulted, they're included here as an illustrative examples.
  // See http://api.drupal.org/api/function/field_create_instance/7
  $instance = array(
    'field_name' =&gt; 'field_image',
    'entity_type' =&gt; 'node',
    'label' =&gt; 'Image',
    'bundle' =&gt; 'article',
    'description' =&gt; st('Upload an image to go with this article.'),
    'required' =&gt; FALSE,

    'settings' =&gt; array(
      'file_directory' =&gt; 'field/image',
      'file_extensions' =&gt; 'png gif jpg jpeg',
      'max_filesize' =&gt; '',
      'max_resolution' =&gt; '',
      'min_resolution' =&gt; '',
      'alt_field' =&gt; TRUE,
      'title_field' =&gt; '',
    ),

    'widget' =&gt; array(
      'type' =&gt; 'image_image',
      'settings' =&gt; array(
        'progress_indicator' =&gt; 'throbber',
        'preview_image_style' =&gt; 'thumbnail',
      ),
      'weight' =&gt; -1,
    ),

    'display' =&gt; array(
      'default' =&gt; array(
        'label' =&gt; 'hidden',
        'type' =&gt; 'image',
        'settings' =&gt; array('image_style' =&gt; 'large', 'image_link' =&gt; ''),
        'weight' =&gt; -1,
      ),
      'teaser' =&gt; array(
        'label' =&gt; 'hidden',
        'type' =&gt; 'image',
        'settings' =&gt; array('image_style' =&gt; 'medium', 'image_link' =&gt; 'content'),
        'weight' =&gt; -1,
      ),
    ),
  );
  field_create_instance($instance);

  // Enable default permissions for system roles.
  $filtered_html_permission = filter_permission_name($filtered_html_format);
  user_role_grant_permissions(DRUPAL_ANONYMOUS_RID, array('access content', 'access comments', $filtered_html_permission));
  user_role_grant_permissions(DRUPAL_AUTHENTICATED_RID, array('access content', 'access comments', 'post comments', 'skip comment approval', $filtered_html_permission));

  // Create a default role for site administrators, with all available permissions assigned.
  $admin_role = new stdClass();
  $admin_role-&gt;name = 'administrator';
  $admin_role-&gt;weight = 2;
  user_role_save($admin_role);
  user_role_grant_permissions($admin_role-&gt;rid, array_keys(module_invoke_all('permission')));
  // Set this as the administrator role.
  variable_set('user_admin_role', $admin_role-&gt;rid);

  // Assign user 1 the "administrator" role.
  db_insert('users_roles')
    -&gt;fields(array('uid' =&gt; 1, 'rid' =&gt; $admin_role-&gt;rid))
    -&gt;execute();

  // Create a Home link in the main menu.
  $item = array(
    'link_title' =&gt; st('Home'),
    'link_path' =&gt; '&lt;front&gt;',
    'menu_name' =&gt; 'main-menu',
  );
  menu_link_save($item);

  // Update the menu router information.
  menu_rebuild();

  // Enable the admin theme.
  db_update('system')
    -&gt;fields(array('status' =&gt; 1))
    -&gt;condition('type', 'theme')
    -&gt;condition('name', 'seven')
    -&gt;execute();
  variable_set('admin_theme', 'seven');
  variable_set('node_admin_theme', '1');
}
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © 2001–2016 by the original authors<br>Licensed under the GNU General Public License, version 2 and later.<br>Drupal is a registered trademark of Dries Buytaert.<br>
    <a href="https://api.drupal.org/api/drupal/profiles!standard!standard.install/function/standard_install/7.x" class="_attribution-link" target="_blank">https://api.drupal.org/api/drupal/profiles!standard!standard.install/function/standard_install/7.x</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
