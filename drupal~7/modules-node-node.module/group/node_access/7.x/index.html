
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Node Access Rights - Drupal 7 - W3cubDocs</title>
  
  <meta name="description" content=" The node access system determines who can do what to which nodes. ">
  <meta name="keywords" content="node, access, rights, -, drupal, drupal~7">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/drupal~7/modules-node-node.module/group/node_access/7.x/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/drupal~7.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/drupal~7/" class="_nav-link" title="" style="margin-left:0;">Drupal 7</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _drupal">
				
<h1 id="page-subtitle">Node access rights</h1>      <p>The node access system determines who can do what to which nodes.</p> <p>In determining access rights for a node, <a href="../../../function/node_access/7.x/" title="Determines whether the current user may perform the operation on the node." class="local">node_access</a>() first checks whether the user has the "bypass node access" permission. Such users have unrestricted access to all nodes. user 1 will always pass this check.</p> <p>Next, all implementations of <a href="../../../../modules-node-node.api.php/function/hook_node_access/7.x/" title="Control access to a node." class="local">hook_node_access</a>() will be called. Each implementation may explicitly allow, explicitly deny, or ignore the access request. If at least one module says to deny the request, it will be rejected. If no modules deny the request and at least one says to allow it, the request will be permitted.</p> <p>If all modules ignore the access request, then the node_access table is used to determine access. All node access modules are queried using <a href="../../../../modules-node-node.api.php/function/hook_node_grants/7.x/" title="Inform the node access system what permissions the user has." class="local">hook_node_grants</a>() to assemble a list of "grant IDs" for the user. This list is compared against the table. If any row contains the node ID in question (or 0, which stands for "all nodes"), one of the grant IDs returned, and a value of TRUE for the operation in question, then access is granted. Note that this table is a list of grants; any matching row is sufficient to grant access to the node.</p> <p>In node listings (lists of nodes generated from a select query, such as the default home page at path 'node', an RSS feed, a recent content block, etc.), the process above is followed except that <a href="../../../../modules-node-node.api.php/function/hook_node_access/7.x/" title="Control access to a node." class="local">hook_node_access</a>() is not called on each node for performance reasons and for proper functioning of the pager system. When adding a node listing to your module, be sure to use a dynamic query created by <a href="../../../../includes-database-database.inc/function/db_select/7.x/" title="Returns a new SelectQuery object for the active database." class="local">db_select</a>() and add a tag of "node_access". This will allow modules dealing with node access to ensure only nodes to which the user has access are retrieved, through the use of <a href="../../../../modules-system-system.api.php/function/hook_query_tag_alter/7.x/" title="Perform alterations to a structured query for a given tag." class="local">hook_query_TAG_alter</a>(). Tagging a query with "node_access" does not check the published/unpublished status of nodes, so the base query is responsible for ensuring that unpublished nodes are not displayed to inappropriate users.</p> <p>Note: Even a single module returning <a href="../../../constant/node_access_deny/7.x/" title="Modules should return this value from hook_node_access() to deny access to a node." class="local">NODE_ACCESS_DENY</a> from <a href="../../../../modules-node-node.api.php/function/hook_node_access/7.x/" title="Control access to a node." class="local">hook_node_access</a>() will block access to the node. Therefore, implementers should take care to not deny access unless they really intend to. Unless a module wishes to actively deny access it should return <a href="../../../constant/node_access_ignore/7.x/" title="Modules should return this value from hook_node_access() to not affect node access." class="local">NODE_ACCESS_IGNORE</a> (or simply return nothing) to allow other modules or the node_access table to control access.</p> <p>To see how to write a node access module of your own, see node_access_example.module.</p> <h3>File</h3> 
<dl> <dt>modules/node/<a href="../../../7.x/">node.module</a>, line 2925</dt> <dd>The core that allows content to be submitted to the site. Modules and scripts may programmatically submit nodes using the usual form API pattern.</dd> </dl> <h3>Functions</h3>
<div class="view view-api-references view-id-api_references view-display-id-block_items_in_group view-dom-id-9b00f588aff84082e36b4cd876b8fc4b"> <div class="view-content"> <table class="views-table cols-3"> <thead> <tr> <th class="views-field views-field-title active" scope="col"> Name </th> <th class="views-field views-field-file-name" scope="col"> Location </th> <th class="views-field views-field-summary" scope="col"> Description </th> </tr> </thead> <tbody> <tr class="odd views-row-first"> <td class="views-field views-field-title active" data-th="Name"> <a href="../../../../modules-node-node.api.php/function/hook_node_access/7.x/">hook_node_access</a> </td> <td class="views-field views-field-file-name" data-th="Location"> modules/node/<a href="../../../../modules-node-node.api.php/7.x/">node.api.php</a> </td> <td class="views-field views-field-summary" data-th="Description"> Control access to a node. </td> </tr> <tr class="even"> <td class="views-field views-field-title active" data-th="Name"> <a href="../../../../modules-node-node.api.php/function/hook_node_access_records/7.x/">hook_node_access_records</a> </td> <td class="views-field views-field-file-name" data-th="Location"> modules/node/<a href="../../../../modules-node-node.api.php/7.x/">node.api.php</a> </td> <td class="views-field views-field-summary" data-th="Description"> Set permissions for a node to be written to the database. </td> </tr> <tr class="odd"> <td class="views-field views-field-title active" data-th="Name"> <a href="../../../../modules-node-node.api.php/function/hook_node_access_records_alter/7.x/">hook_node_access_records_alter</a> </td> <td class="views-field views-field-file-name" data-th="Location"> modules/node/<a href="../../../../modules-node-node.api.php/7.x/">node.api.php</a> </td> <td class="views-field views-field-summary" data-th="Description"> Alter permissions for a node before it is written to the database. </td> </tr> <tr class="even"> <td class="views-field views-field-title active" data-th="Name"> <a href="../../../../modules-node-node.api.php/function/hook_node_grants/7.x/">hook_node_grants</a> </td> <td class="views-field views-field-file-name" data-th="Location"> modules/node/<a href="../../../../modules-node-node.api.php/7.x/">node.api.php</a> </td> <td class="views-field views-field-summary" data-th="Description"> Inform the node access system what permissions the user has. </td> </tr> <tr class="odd"> <td class="views-field views-field-title active" data-th="Name"> <a href="../../../../modules-node-node.api.php/function/hook_node_grants_alter/7.x/">hook_node_grants_alter</a> </td> <td class="views-field views-field-file-name" data-th="Location"> modules/node/<a href="../../../../modules-node-node.api.php/7.x/">node.api.php</a> </td> <td class="views-field views-field-summary" data-th="Description"> Alter user access rules when trying to view, edit or delete a node. </td> </tr> <tr class="even"> <td class="views-field views-field-title active" data-th="Name"> <a href="../../../function/node_access/7.x/">node_access</a> </td> <td class="views-field views-field-file-name" data-th="Location"> modules/node/<a href="../../../7.x/">node.module</a> </td> <td class="views-field views-field-summary" data-th="Description"> Determines whether the current user may perform the operation on the node. </td> </tr> <tr class="odd"> <td class="views-field views-field-title active" data-th="Name"> <a href="../../../function/node_access_acquire_grants/7.x/">node_access_acquire_grants</a> </td> <td class="views-field views-field-file-name" data-th="Location"> modules/node/<a href="../../../7.x/">node.module</a> </td> <td class="views-field views-field-summary" data-th="Description"> Gets the list of node access grants and writes them to the database. </td> </tr> <tr class="even"> <td class="views-field views-field-title active" data-th="Name"> <a href="../../../function/node_access_grants/7.x/">node_access_grants</a> </td> <td class="views-field views-field-file-name" data-th="Location"> modules/node/<a href="../../../7.x/">node.module</a> </td> <td class="views-field views-field-summary" data-th="Description"> Fetches an array of permission IDs granted to the given user ID. </td> </tr> <tr class="odd"> <td class="views-field views-field-title active" data-th="Name"> <a href="../../../function/node_access_needs_rebuild/7.x/">node_access_needs_rebuild</a> </td> <td class="views-field views-field-file-name" data-th="Location"> modules/node/<a href="../../../7.x/">node.module</a> </td> <td class="views-field views-field-summary" data-th="Description"> Flags or unflags the node access grants for rebuilding. </td> </tr> <tr class="even"> <td class="views-field views-field-title active" data-th="Name"> <a href="../../../function/node_access_rebuild/7.x/">node_access_rebuild</a> </td> <td class="views-field views-field-file-name" data-th="Location"> modules/node/<a href="../../../7.x/">node.module</a> </td> <td class="views-field views-field-summary" data-th="Description"> Rebuilds the node access database. </td> </tr> <tr class="odd"> <td class="views-field views-field-title active" data-th="Name"> <a href="../../../function/node_access_view_all_nodes/7.x/">node_access_view_all_nodes</a> </td> <td class="views-field views-field-file-name" data-th="Location"> modules/node/<a href="../../../7.x/">node.module</a> </td> <td class="views-field views-field-summary" data-th="Description"> Determines whether the user has a global viewing grant for all nodes. </td> </tr> <tr class="even"> <td class="views-field views-field-title active" data-th="Name"> <a href="../../../function/node_access_write_grants/7.x/">node_access_write_grants</a> </td> <td class="views-field views-field-file-name" data-th="Location"> modules/node/<a href="../../../7.x/">node.module</a> </td> <td class="views-field views-field-summary" data-th="Description"> Writes a list of grants to the database, deleting any previously saved ones. </td> </tr> <tr class="odd"> <td class="views-field views-field-title active" data-th="Name"> <a href="../../../function/node_list_permissions/7.x/">node_list_permissions</a> </td> <td class="views-field views-field-file-name" data-th="Location"> modules/node/<a href="../../../7.x/">node.module</a> </td> <td class="views-field views-field-summary" data-th="Description"> Helper function to generate standard node permission list for a given type. </td> </tr> <tr class="even"> <td class="views-field views-field-title active" data-th="Name"> <a href="../../../function/node_node_access/7.x/">node_node_access</a> </td> <td class="views-field views-field-file-name" data-th="Location"> modules/node/<a href="../../../7.x/">node.module</a> </td> <td class="views-field views-field-summary" data-th="Description"> Implements <a href="../../../../modules-node-node.api.php/function/hook_node_access/7.x/" title="Control access to a node." class="local">hook_node_access</a>(). </td> </tr> <tr class="odd"> <td class="views-field views-field-title active" data-th="Name"> <a href="../../../function/node_permissions_get_configured_types/7.x/">node_permissions_get_configured_types</a> </td> <td class="views-field views-field-file-name" data-th="Location"> modules/node/<a href="../../../7.x/">node.module</a> </td> <td class="views-field views-field-summary" data-th="Description"> Returns an array of node types that should be managed by permissions. </td> </tr> <tr class="even"> <td class="views-field views-field-title active" data-th="Name"> <a href="../../../function/node_query_entity_field_access_alter/7.x/">node_query_entity_field_access_alter</a> </td> <td class="views-field views-field-file-name" data-th="Location"> modules/node/<a href="../../../7.x/">node.module</a> </td> <td class="views-field views-field-summary" data-th="Description"> Implements <a href="../../../../modules-system-system.api.php/function/hook_query_tag_alter/7.x/" title="Perform alterations to a structured query for a given tag." class="local">hook_query_TAG_alter</a>(). </td> </tr> <tr class="odd"> <td class="views-field views-field-title active" data-th="Name"> <a href="../../../function/node_query_node_access_alter/7.x/">node_query_node_access_alter</a> </td> <td class="views-field views-field-file-name" data-th="Location"> modules/node/<a href="../../../7.x/">node.module</a> </td> <td class="views-field views-field-summary" data-th="Description"> Implements <a href="../../../../modules-system-system.api.php/function/hook_query_tag_alter/7.x/" title="Perform alterations to a structured query for a given tag." class="local">hook_query_TAG_alter</a>(). </td> </tr> <tr class="even"> <td class="views-field views-field-title active" data-th="Name"> <a href="../../../function/_node_access_rebuild_batch_finished/7.x/">_node_access_rebuild_batch_finished</a> </td> <td class="views-field views-field-file-name" data-th="Location"> modules/node/<a href="../../../7.x/">node.module</a> </td> <td class="views-field views-field-summary" data-th="Description"> Implements <a href="../../../../modules-system-form.api.php/function/callback_batch_finished/7.x/" title="Complete a batch process." class="local">callback_batch_finished</a>(). </td> </tr> <tr class="odd"> <td class="views-field views-field-title active" data-th="Name"> <a href="../../../function/_node_access_rebuild_batch_operation/7.x/">_node_access_rebuild_batch_operation</a> </td> <td class="views-field views-field-file-name" data-th="Location"> modules/node/<a href="../../../7.x/">node.module</a> </td> <td class="views-field views-field-summary" data-th="Description"> Implements <a href="../../../../modules-system-form.api.php/function/callback_batch_operation/7.x/" title="Perform a single batch operation." class="local">callback_batch_operation</a>(). </td> </tr> <tr class="even views-row-last"> <td class="views-field views-field-title active" data-th="Name"> <a href="../../../function/_node_query_node_access_alter/7.x/">_node_query_node_access_alter</a> </td> <td class="views-field views-field-file-name" data-th="Location"> modules/node/<a href="../../../7.x/">node.module</a> </td> <td class="views-field views-field-summary" data-th="Description"> Helper for node access functions. </td> </tr> </tbody> </table> </div> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2001–2016 by the original authors<br>Licensed under the GNU General Public License, version 2 and later.<br>Drupal is a registered trademark of Dries Buytaert.<br>
    <a href="https://api.drupal.org/api/drupal/modules!node!node.module/group/node_access/7.x" class="_attribution-link" target="_blank">https://api.drupal.org/api/drupal/modules!node!node.module/group/node_access/7.x</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
