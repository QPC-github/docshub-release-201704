
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Chef Apply Provisioner - Vagrant - W3cubDocs</title>
  
  <meta name="description" content=" Provisioner name&#58; chef_apply ">
  <meta name="keywords" content="chef, apply, provisioner, -, vagrant">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/vagrant/provisioning/chef_apply/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/vagrant.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/vagrant/" class="_nav-link" title="" style="margin-left:0;">Vagrant</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _vagrant">
				
<h1 id="chef-apply-provisioner">Chef Apply Provisioner</h1> <p><strong>Provisioner name: <code>chef_apply</code></strong></p> <p>The Vagrant Chef Apply provisioner allows you to provision the guest using <a href="https://www.getchef.com/" target="_blank">Chef</a>, specifically with <a href="https://docs.getchef.com/ctl_chef_apply.html" target="_blank">Chef Apply</a>.</p> <p>Chef Apply is ideal for people who are already experienced with Chef and the Chef ecosystem. Specifically, this documentation page does not cover how use Chef or how to write Chef recipes.</p> <div class="alert alert-warning"> <p><strong>Warning:</strong> If you are not familiar with Chef and Vagrant already, we recommend starting with the <a href="../shell/">shell provisioner</a>.</p> </div> <h2 id="options">Options</h2> <p>This section lists the complete set of available options for the Chef Apply provisioner. More detailed examples of how to use the provisioner are available below this section.</p> <ul> <li>
<p><a href="#recipe"><code>recipe</code></a> (string) - The raw recipe contents to execute using Chef Apply on the guest.</p> </li> <li>
<p><a href="#log_level"><code>log_level</code></a> (string) - The log level to use while executing <code>chef-apply</code>. The default value is "info".</p> </li> <li>
<p><a href="#upload_path"><code>upload_path</code></a> (string) - <strong>Advanced!</strong> The location on the guest where the generated recipe file should be stored. For most use cases, it is unlikely you will need to customize this value. The default value is <code>/tmp/vagrant-chef-apply-#</code> where <code>#</code> is a unique counter generated by Vagrant to prevent collisions.</p> </li> </ul> <p>In addition to all the options listed above, the Chef Apply provisioner supports the <a href="../chef_common/">common options for all Chef provisioners</a>.</p> <h2 id="specifying-a-recipe">Specifying a Recipe</h2> <p>The easiest way to get started with the Chef Apply provisioner is to just specify an inline <a href="https://docs.chef.io/recipes.html" target="_blank">Chef recipe</a>. For example:</p> <pre class="highlight ruby" data-language="ruby"><span class="no">Vagrant</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="s2">"2"</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">provision</span> <span class="s2">"chef_apply"</span> <span class="k">do</span> <span class="o">|</span><span class="n">chef</span><span class="o">|</span>
    <span class="n">chef</span><span class="p">.</span><span class="nf">recipe</span> <span class="o">=</span> <span class="s2">"package[apache2]"</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre>
<p>This causes Vagrant to run Chef Apply with the given recipe contents. If you are familiar with Chef, you know this will install the apache2 package from the system package provider.</p> <p>Since single-line Chef recipes are rare, you can also specify the recipe using a "heredoc":</p> <pre class="highlight ruby" data-language="ruby"><span class="no">Vagrant</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="s2">"2"</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">provision</span> <span class="s2">"chef_apply"</span> <span class="k">do</span> <span class="o">|</span><span class="n">chef</span><span class="o">|</span>
    <span class="n">chef</span><span class="p">.</span><span class="nf">recipe</span> <span class="o">=</span> <span class="o">&lt;&lt;-</span><span class="no">RECIPE</span><span class="sh">
      package "apache2"

      template "/etc/apache2/my.config" do
        # ...
      end
</span><span class="no">    RECIPE</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre>
<p>Finally, if you would prefer to store the recipe as plain-text, you can set the recipe to the contents of a file:</p> <pre class="highlight ruby" data-language="ruby"><span class="no">Vagrant</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="s2">"2"</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">provision</span> <span class="s2">"chef_apply"</span> <span class="k">do</span> <span class="o">|</span><span class="n">chef</span><span class="o">|</span>
    <span class="n">chef</span><span class="p">.</span><span class="nf">recipe</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="s2">"/path/to/my/recipe.rb"</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre> <h2 id="roles">Roles</h2> <p>The Vagrant Chef Apply provisioner does not support roles. Please use a different Vagrant Chef provisioner if you need support for roles.</p> <h2 id="data-bags">Data Bags</h2> <p>The Vagrant Chef Apply provisioner does not support data_bags. Please use a different Vagrant Chef provisioner if you need support for data_bags.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2010–2017 Mitchell Hashimoto<br>Licensed under the MPL 2.0 License.<br>
    <a href="https://www.vagrantup.com/docs/provisioning/chef_apply.html" class="_attribution-link" target="_blank">https://www.vagrantup.com/docs/provisioning/chef_apply.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
