
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>CDbTestCase - Yii 1.1 - W3cubDocs</title>
  
  <meta name="description" content="a list of fixtures that should be loaded before each test method executes. The array keys are fixture names, and the array values are either AR &hellip;">
  <meta name="keywords" content="cdbtestcase, -, yii, yii~1.1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/yii~1.1/cdbtestcase/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/yii~1.1.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/yii~1.1/" class="_nav-link" title="" style="margin-left:0;">Yii 1.1</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _yii">
				
<h1>CDbTestCase</h1>  <table class="summaryTable docClass"> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr> <th>Package</th> <td><a href="../#system.test">system.test</a></td> </tr> <tr> <th>Inheritance</th> <td>abstract class CDbTestCase » <a href="../ctestcase/">CTestCase</a>
</td> </tr> <tr> <th>Since</th> <td>1.1</td> </tr> <tr> <th>Source Code</th> <td><a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.17/framework/test/CDbTestCase.php" target="_blank">framework/test/CDbTestCase.php</a></td> </tr> </table> <div id="classDescription"> CDbTestCase is the base class for test cases about DB-related features. <br><br> CDbTestCase provides database fixture management with the help of <a href="../cdbfixturemanager/">CDbFixtureManager</a>. By declaring <a href="../cdbtestcase/#fixtures">fixtures</a> property, one can ensure the specified tables have the expected fixture state when executing each test method. In addition, CDbTestCase provides two ways to access the fixture data. <br><br> For example, assume we declare <a href="../cdbtestcase/#fixtures">fixtures</a> to be: <pre>
public $fixtures=array(
    'posts' =&gt; 'Post',
    'comments' =&gt; 'Comment',
);
</pre> <br><br> We can access the original fixture data rows using <code>$this-&gt;posts</code> <code>$this-&gt;posts['first post']</code>. We can also retrieve an ActiveRecord instance corresponding to a fixture data row using <code>$this-&gt;posts('first post')</code>. Note, here 'first post' refers to a key to a row in the original fixture data.</div>  <div class="summary docProperty"> <h2>Protected Properties</h2>  <table class="summaryTable"> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="fixtures"> <td><a href="../cdbtestcase/#fixtures-detail">fixtures</a></td> <td>array</td> <td>a list of fixtures that should be loaded before each test method executes.</td> <td>CDbTestCase</td> </tr> </table> </div>  <div class="summary docMethod"> <h2>Public Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="__call"> <td><a href="../cdbtestcase/#__call-detail">__call()</a></td> <td>PHP magic method.</td> <td>CDbTestCase</td> </tr> <tr id="__get"> <td><a href="../cdbtestcase/#__get-detail">__get()</a></td> <td>PHP magic method.</td> <td>CDbTestCase</td> </tr> <tr id="getFixtureData"> <td><a href="../cdbtestcase/#getFixtureData-detail">getFixtureData()</a></td> <td>Returns the named fixture data</td> <td>CDbTestCase</td> </tr> <tr id="getFixtureManager"> <td><a href="../cdbtestcase/#getFixtureManager-detail">getFixtureManager()</a></td> <td>Returns the database fixture manager</td> <td>CDbTestCase</td> </tr> <tr id="getFixtureRecord"> <td><a href="../cdbtestcase/#getFixtureRecord-detail">getFixtureRecord()</a></td> <td>Returns the ActiveRecord instance corresponding to the specified alias in the named fixture. False is returned if there is no such fixture or the record cannot be found.</td> <td>CDbTestCase</td> </tr> </table> </div> <div class="summary docMethod"> <h2>Protected Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="setUp"> <td><a href="../cdbtestcase/#setUp-detail">setUp()</a></td> <td>Sets up the fixture before executing a test method.</td> <td>CDbTestCase</td> </tr> </table> </div>  <h2>Property Details</h2> <h3 class="detailHeader" id="fixtures-detail"> fixtures<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">protected array <b>$fixtures</b>;</pre> <p>a list of fixtures that should be loaded before each test method executes. The array keys are fixture names, and the array values are either AR class names or table names. If table names, they must begin with a colon character (e.g. 'Post' means an AR class, while ':post' means a table name). Defaults to false, meaning fixtures will not be used at all.</p> <h2>Method Details</h2> <h3 class="detailHeader" id="__call-detail"> __call() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public mixed <b>__call</b>(string $name, string $params)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">method name</td> </tr> <tr> <td class="paramNameCol">$params</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">method parameters</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the property value</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.17/framework/test/CDbTestCase.php#L73" target="_blank">framework/test/CDbTestCase.php#73</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">__call</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fixtures</span><span style="color: #007700">) &amp;&amp; isset(</span><span style="color: #0000BB">$params</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]) &amp;&amp; (</span><span style="color: #0000BB">$record</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFixtureManager</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getRecord</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]))!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">$record</span><span style="color: #007700">;<br>    else<br>        throw new </span><span style="color: #0000BB">Exception</span><span style="color: #007700">(</span><span style="color: #DD0000">"Unknown method '</span><span style="color: #0000BB">$name</span><span style="color: #DD0000">' for class '"</span><span style="color: #007700">.</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">"'."</span><span style="color: #007700">);<br>}</span></pre> </div> <p>PHP magic method. This method is overridden so that named fixture ActiveRecord instances can be accessed in terms of a method call.</p> <h3 class="detailHeader" id="__get-detail"> __get() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public mixed <b>__get</b>(string $name)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the property name</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the property value</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.17/framework/test/CDbTestCase.php#L57" target="_blank">framework/test/CDbTestCase.php#57</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">__get</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fixtures</span><span style="color: #007700">) &amp;&amp; (</span><span style="color: #0000BB">$rows</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFixtureManager</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getRows</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">))!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">$rows</span><span style="color: #007700">;<br>    else<br>        throw new </span><span style="color: #0000BB">Exception</span><span style="color: #007700">(</span><span style="color: #DD0000">"Unknown property '</span><span style="color: #0000BB">$name</span><span style="color: #DD0000">' for class '"</span><span style="color: #007700">.</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">).</span><span style="color: #DD0000">"'."</span><span style="color: #007700">);<br>}</span></pre> </div> <p>PHP magic method. This method is overridden so that named fixture data can be accessed like a normal property.</p> <h3 class="detailHeader" id="getFixtureData-detail"> getFixtureData() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public array <b>getFixtureData</b>(string $name)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the fixture name (the key value in <a href="../cdbtestcase/#fixtures">fixtures</a>).</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">the named fixture data</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.17/framework/test/CDbTestCase.php#L93" target="_blank">framework/test/CDbTestCase.php#93</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getFixtureData</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFixtureManager</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getRows</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br>}</span></pre> </div>  <h3 class="detailHeader" id="getFixtureManager-detail"> getFixtureManager() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public <a href="../cdbfixturemanager/">CDbFixtureManager</a> <b>getFixtureManager</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol"><a href="../cdbfixturemanager/">CDbFixtureManager</a></td> <td class="paramDescCol">the database fixture manager</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.17/framework/test/CDbTestCase.php#L84" target="_blank">framework/test/CDbTestCase.php#84</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getFixtureManager</span><span style="color: #007700">()<br>{<br>    return </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getComponent</span><span style="color: #007700">(</span><span style="color: #DD0000">'fixture'</span><span style="color: #007700">);<br>}</span></pre> </div>  <h3 class="detailHeader" id="getFixtureRecord-detail"> getFixtureRecord() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public <a href="../cactiverecord/">CActiveRecord</a> <b>getFixtureRecord</b>(string $name, string $alias)</pre> </td></tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the fixture name (the key value in <a href="../cdbtestcase/#fixtures">fixtures</a>).</td> </tr> <tr> <td class="paramNameCol">$alias</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the alias of the fixture data row</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol"><a href="../cactiverecord/">CActiveRecord</a></td> <td class="paramDescCol">the ActiveRecord instance corresponding to the specified alias in the named fixture. False is returned if there is no such fixture or the record cannot be found.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.17/framework/test/CDbTestCase.php#L104" target="_blank">framework/test/CDbTestCase.php#104</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getFixtureRecord</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$alias</span><span style="color: #007700">)<br>{<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFixtureManager</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getRecord</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$alias</span><span style="color: #007700">);<br>}</span></pre> </div>  <h3 class="detailHeader" id="setUp-detail"> setUp() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>setUp</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.17/framework/test/CDbTestCase.php#L114" target="_blank">framework/test/CDbTestCase.php#114</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">setUp</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">setUp</span><span style="color: #007700">();<br>    if(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fixtures</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFixtureManager</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">load</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fixtures</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Sets up the fixture before executing a test method. If you override this method, make sure the parent implementation is invoked. Otherwise, the database fixtures will not be managed properly.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2008–2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc/api/1.1/CDbTestCase" class="_attribution-link" target="_blank">http://www.yiiframework.com/doc/api/1.1/CDbTestCase</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
