
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Quadtree Geom - D3.js 3 - W3cubDocs</title>
  
  <meta name="description" content=" API Reference ▸ Geometry ▸ Quadtree Geom ">
  <meta name="keywords" content="quadtree, geom, -, d, js, d3~3">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/d3~3/quadtree-geom.md/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/d3~3.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/d3~3/" class="_nav-link" title="" style="margin-left:0;">D3.js 3</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _d3">
				
<h1>Quadtree Geom</h1>
<blockquote> <p><a href="../">API Reference</a> ▸ <a href="../geometry.md/">Geometry</a> ▸ <strong>Quadtree Geom</strong></p> </blockquote>  <p>A <strong>quadtree</strong> is a two-dimensional recursive spatial subdivision. This implementation uses square partitions, dividing each square into four equally-sized squares. Each point exists in a unique node; if multiple points are in the same position, some points may be stored on internal nodes rather than leaf nodes. Quadtrees can be used to accelerate various spatial operations, such as the Barnes-Hut approximation for computing n-body forces, or collision detection.</p> <p><img src="https://camo.githubusercontent.com/a7ea927e1aaa9a115dbb994c5254304824cc5dcb/687474703a2f2f626c2e6f636b732e6f72672f6d626f73746f636b2f7261772f343334333231342f7468756d626e61696c2e706e67" width="202" data-canonical-src="http://bl.ocks.org/mbostock/raw/4343214/thumbnail.png" style="max-width:100%;"> <img src="https://camo.githubusercontent.com/0cb03b12d3b62fde292f0c382d6a9ff54c936761/687474703a2f2f626c2e6f636b732e6f72672f6d626f73746f636b2f7261772f363231363732342f7468756d626e61696c2e706e67" width="202" data-canonical-src="http://bl.ocks.org/mbostock/raw/6216724/thumbnail.png" style="max-width:100%;"> <img src="https://camo.githubusercontent.com/7b6e15a6c57b40a398bc63a8157061b6148d0912/687474703a2f2f626c2e6f636b732e6f72672f6d626f73746f636b2f7261772f363232343035302f7468756d626e61696c2e706e67" width="202" data-canonical-src="http://bl.ocks.org/mbostock/raw/6224050/thumbnail.png" style="max-width:100%;"> <img src="https://camo.githubusercontent.com/d4c4e8666187f31ffb156fc077b8085f3e75a943/687474703a2f2f626c2e6f636b732e6f72672f7061747269636b73757272792f7261772f363437383137382f7468756d626e61696c2e706e67" width="202" data-canonical-src="http://bl.ocks.org/patricksurry/raw/6478178/thumbnail.png" style="max-width:100%;"> <img src="https://camo.githubusercontent.com/bae838670eed34b2e62231d7e24b54d448b7a734/687474703a2f2f626c2e6f636b732e6f72672f6c6c62346c6c2f7261772f383730393336332f7468756d626e61696c2e706e67" width="202" data-canonical-src="http://bl.ocks.org/llb4ll/raw/8709363/thumbnail.png" style="max-width:100%;"></p> <h6 id="quadtree"> d3.geom.<b>quadtree</b>()</h6> <p>Creates a new quadtree factory with the default <a href="#x"><em>x</em>-accessor</a>, <a href="#y"><em>y</em>-accessor</a> and <a href="#extent">extent</a>. The <a href="#_quadtree">returned function</a> can be used to create any number of quadtrees from data with the factory’s configuration.</p> <h6 id="_quadtree"> <b>quadtree</b>(<i>points</i>),  <b>quadtree</b>(<i>points</i>, <i>x2</i>, <i>y2</i>),  <b>quadtree</b>(<i>points</i>, <i>x1</i>, <i>y1</i>, <i>x2</i>, <i>y2</i>)</h6> <p>Constructs a new quadtree for the specified array of data <em>points</em>, returning the root node of a new quadtree. The elements of the <em>points</em> array must have <em>x</em> and <em>y</em> members defining their coordinates. The current <a href="#x"><em>x</em>-</a> and <a href="#y"><em>y</em>-</a> accessor functions are ignored. The extent can also be specified with by additional, optional arguments with <code>x1</code> and <code>y1</code> specified explicitly or assumed to be zero if omitted. To build a quadtree by adding points incrementally, the specified <em>points</em> array can be empty, and then points can be later <a href="#add">added</a> to the returned root node; in this case, you must also specify the <a href="#extent">extent</a> of the quadtree.</p> <p>Each node in the quadtree has several properties:</p> <ul> <li>
<em>nodes</em> - a sparse array of the four child nodes in order: top-left, top-right, bottom-left, bottom-right</li> <li>
<em>leaf</em> - a boolean indicating whether this is an internal node or a leaf node</li> <li>
<em>point</em> - the point associated with this node, if any (may apply to either internal or leaf nodes)</li> <li>
<em>x</em> - the <em>x</em>-coordinate of the associated point, if any</li> <li>
<em>y</em> - the <em>y</em>-coordinate of the associated point, if any</li> </ul> <p>The returned root node also defines <a href="#add">add</a> and <a href="#visit">visit</a> methods.</p> <h6 id="add"> root.<b>add</b>(<i>point</i>)</h6> <p>Adds the specified new <em>point</em> to the quadtree.</p> <h6 id="visit"> root.<b>visit</b>(<i>callback</i>)</h6> <p>Visits each node in the quadtree, invoking the specified <em>callback</em> with arguments {<i>node</i>, <em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em>} for each node, where <em>node</em> is the node being visited and the remaining arguments are the coordinates of the top-left and bottom-right corners of the node respectively. (Note: the definition of the coordinate system used by the quadtree is arbitrary, so a more precise rule is that <em>x1</em> &lt;= <em>x2</em> and <em>y1</em> &lt;= <em>y2</em>. In the typical coordinate system used by SVG and Canvas, the origin ⟨0,0⟩ is in the top-left corner, and thus ⟨<em>x1</em>, <em>y1</em>⟩ is also the top-left corner of the current node.) Nodes are traversed in pre-order. If the <em>callback</em> returns true for a given node, then the children of that node are not visited; otherwise, all child nodes are visited.</p> <h6 id="visit"> root.<b>find</b>(<i>point</i>)</h6> <p>Given any point <em>[x,y]</em>, returns the closest point in the quadtree.</p> <h6 id="x"> quadtree.<b>x</b>([<i>x</i>])</h6> <p>If <em>x</em> is specified, sets the x-coordinate accessor and returns this quadtree factory. If <em>x</em> is not specified, returns the current <em>x</em>-coordinate accessor, which defaults to:</p> <pre data-language="javascript">function(d) { return d[0]; }</pre> <p>For each point added to the quadtree, either during <a href="#_quadtree">initial construction</a> or lazily <a href="#add">added</a>, the <em>x</em>-accessor is invoked with the arguments {<i>d</i>, <i>i</i>}, where <em>d</em> is the current point and <em>i</em> is its index in the array of all points. The <em>x</em>-accessor must then return a numeric value indicating the <em>x</em>-coordinate of the given point. The <em>x</em>-accessor may also be defined as a constant number rather than a function, if desired.</p> <h6 id="y"> quadtree.<b>y</b>([<i>y</i>])</h6> <p>If <em>y</em> is specified, sets the y-coordinate accessor and returns this quadtree factory. If <em>y</em> is not specified, returns the current <em>y</em>-coordinate accessor, which defaults to:</p> <pre data-language="javascript">function(d) { return d[1]; }</pre> <p>For each point added to the quadtree, either during <a href="#_quadtree">initial construction</a> or lazily <a href="#add">added</a>, the <em>y</em>-accessor is invoked with the arguments {<i>d</i>, <i>i</i>}, where <em>d</em> is the current point and <em>i</em> is its index in the array of all points. The <em>y</em>-accessor must then return a numeric value indicating the <em>y</em>-coordinate of the given point. The <em>y</em>-accessor may also be defined as a constant number rather than a function, if desired.</p> <h6 id="extent"> quadtree.<b>extent</b>([<i>extent</i>])</h6> <p>If <em>extent</em> is specified, sets the current extent and returns this quadtree factory. If <em>extent</em> is not specified, returns the current extent, which defaults to null. When the extent is null, an extent will be computed automatically by scanning the array of input points passed to the <a href="#_quadtree">quadtree constructor</a>. Otherwise, the <em>extent</em> must be specified as a two-dimensional array [​[<i>x0</i>, <i>y0</i>], [​<i>x1</i>, <i>y1</i>]​], where <em>x0</em> and <em>y0</em> are the lower bounds of the extent, and <em>x1</em> and <em>y1</em> are the upper bounds of the extent. Setting an extent is required when constructing a quadtree lazily from an initially-empty set of nodes.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2010–2016 Michael Bostock<br>Licensed under the BSD License.<br>
    <a href="https://github.com/d3/d3-3.x-api-reference/blob/master/Quadtree-Geom.md" class="_attribution-link" target="_blank">https://github.com/d3/d3-3.x-api-reference/blob/master/Quadtree-Geom.md</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
