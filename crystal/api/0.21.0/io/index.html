
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>IO - Crystal - W3cubDocs</title>
  
  <meta name="description" content=" The IO module is the basis for all input and output in Crystal. ">
  <meta name="keywords" content="module, io, -, crystal">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/crystal/api/0.21.0/io/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/crystal.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/crystal/" class="_nav-link" title="" style="margin-left:0;">Crystal</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _crystal">
				
<h1 class="type-name"> module IO </h1> <h2>Overview</h2> <p>The <code><a href="../io/">IO</a></code> module is the basis for all input and output in Crystal.</p> <p>This module is included by types like <code><a href="../file/">File</a></code>, <code><a href="../socket/">Socket</a></code> and <code><a href="../io/memory/">IO::Memory</a></code> and provide many useful methods for reading to and writing from an IO, like <code><a href="../io/#print%28%2Aobjects%3A_%29%3ANil-instance-method">#print</a></code>, <code><a href="../io/#puts%3ANil-instance-method">#puts</a></code>, <code><a href="../io/#gets%28limit%3AInt%2Cchomp%3Dfalse%29%3AString%3F-instance-method">#gets</a></code> and <code><a href="../io/#printf%28format_string%2Cargs%3AArray%7CTuple%29%3ANil-instance-method">#printf</a></code>.</p> <p>The only requirement for a type including the <code><a href="../io/">IO</a></code> module is to define these two methods:</p> <ul>
<li>
<code><a href="../io/#read%28slice%3ABytes%29-instance-method">#read(slice : Bytes)</a></code>: read at most <em>slice.size</em> bytes into <em>slice</em> and return the number of bytes read</li>
<li>
<code><a href="../io/#write%28slice%3ABytes%29%3ANil-instance-method">#write(slice : Bytes)</a></code>: write the whole <em>slice</em> into the IO</li>
</ul> <p>For example, this is a simple <code><a href="../io/">IO</a></code> on top of a <code><a href="../bytes/">Bytes</a></code>:</p> <pre data-language="crystal">class SimpleSliceIO
  include IO

  def initialize(@slice : Bytes)
  end

  def read(slice : Bytes)
    slice.size.times { |i| slice[i] = @slice[i] }
    @slice += slice.size
    slice.size
  end

  def write(slice : Bytes)
    slice.size.times { |i| @slice[i] = slice[i] }
    @slice += slice.size
    nil
  end
end

slice = Slice.new(9) { |i| ('a'.ord + i).to_u8 }
String.new(slice) # =&gt; "abcdefghi"

io = SimpleSliceIO.new(slice)
io.gets(3) # =&gt; "abc"
io.print "xyz"
String.new(slice) # =&gt; "abcxyzghi"</pre> <h3>Encoding</h3> <p>An <code><a href="../io/">IO</a></code> can be set an encoding with the <code><a href="../io/#set_encoding%28encoding%3AString%2Cinvalid%3ASymbol%3F%3Dnil%29-instance-method">#set_encoding</a></code> method. When this is set, all string operations (<code><a href="../io/#gets%28limit%3AInt%2Cchomp%3Dfalse%29%3AString%3F-instance-method">#gets</a></code>, <code><a href="../io/#gets_to_end%3AString-instance-method">#gets_to_end</a></code>, <code><a href="../io/#read_char%3AChar%3F-instance-method">#read_char</a></code>, <code><a href="../io/#%3C%3C%28obj%29%3Aself-instance-method">#&lt;&lt;</a></code>, <code><a href="../io/#print%28%2Aobjects%3A_%29%3ANil-instance-method">#print</a></code>, <code><a href="../io/#puts%3ANil-instance-method">#puts</a></code> <code><a href="../io/#printf%28format_string%2Cargs%3AArray%7CTuple%29%3ANil-instance-method">#printf</a></code>) will write in the given encoding, and read from the given encoding. Byte operations (<code><a href="../io/#read%28slice%3ABytes%29-instance-method">#read</a></code>, <code><a href="../io/#write%28slice%3ABytes%29%3ANil-instance-method">#write</a></code>, <code><a href="../io/#read_byte%3AUInt8%3F-instance-method">#read_byte</a></code>, <code><a href="../io/#write_byte%28byte%3AUInt8%29-instance-method">#write_byte</a></code>) never do encoding/decoding operations.</p> <p>If an encoding is not set, the default one is UTF-8.</p> <p>Mixing string and byte operations might not give correct results and should be avoided, as string operations might need to read extra bytes in order to get characters in the given encoding.</p> <h2>Direct including types</h2> <ul class="other-types-list"> <li class="other-type"><a href="../flate/reader/">Flate::Reader</a></li> <li class="other-type"><a href="../flate/writer/">Flate::Writer</a></li> <li class="other-type"><a href="../gzip/reader/">Gzip::Reader</a></li> <li class="other-type"><a href="../gzip/writer/">Gzip::Writer</a></li> <li class="other-type"><a href="http/server/response" target="_blank">HTTP::Server::Response</a></li> <li class="other-type"><a href="http/websocket/protocol/streamio" target="_blank">HTTP::WebSocket::Protocol::StreamIO</a></li> <li class="other-type"><a href="../io/buffered/">IO::Buffered</a></li> <li class="other-type"><a href="../io/delimited/">IO::Delimited</a></li> <li class="other-type"><a href="../io/hexdump/">IO::Hexdump</a></li> <li class="other-type"><a href="../io/memory/">IO::Memory</a></li> <li class="other-type"><a href="../io/multiwriter/">IO::MultiWriter</a></li> <li class="other-type"><a href="../io/sized/">IO::Sized</a></li> <li class="other-type"><a href="../openssl/ssl/socket/">OpenSSL::SSL::Socket</a></li> <li class="other-type"><a href="../string/builder/">String::Builder</a></li> <li class="other-type"><a href="../zlib/reader/">Zlib::Reader</a></li> <li class="other-type"><a href="../zlib/writer/">Zlib::Writer</a></li> </ul> <h2>Defined in:</h2> <a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L64" target="_blank">io.cr</a> <br> <a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io/delimited.cr#L1" target="_blank">io/delimited.cr</a> <br> <a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io/encoding.cr#L1" target="_blank">io/encoding.cr</a> <br> <a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io/error.cr#L1" target="_blank">io/error.cr</a> <br> <a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io/hexdump.cr#L25" target="_blank">io/hexdump.cr</a> <br> <a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io/multi_writer.cr#L1" target="_blank">io/multi_writer.cr</a> <br> <a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io/sized.cr#L1" target="_blank">io/sized.cr</a> <br> <h2>Class Method Summary</h2> <ul class="list-summary"> <li class="entry-summary"> <a href="#copy%28src%2Cdst%2Climit%3AInt%29-class-method" class="signature"><strong>.copy</strong>(src, dst, limit : Int)</a> <div class="summary"><p>Copy at most <em>limit</em> bytes from <em>src</em> to <em>dst</em>.</p></div> </li> <li class="entry-summary"> <a href="#copy%28src%2Cdst%29-class-method" class="signature"><strong>.copy</strong>(src, dst)</a> <div class="summary"><p>Copy all contents from <em>src</em> to <em>dst</em>.</p></div> </li> <li class="entry-summary"> <a href="#pipe%28read_blocking%3Dfalse%2Cwrite_blocking%3Dfalse%29-class-method" class="signature"><strong>.pipe</strong>(read_blocking = false, write_blocking = false)</a> <div class="summary"><p>Creates a pair of pipe endpoints (connected to each other) and returns them as a two-element <code><a href="../tuple/">Tuple</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#pipe%28read_blocking%3Dfalse%2Cwrite_blocking%3Dfalse%2C%26block%29-class-method" class="signature"><strong>.pipe</strong>(read_blocking = false, write_blocking = false, &amp;block)</a> <div class="summary"><p>Creates a pair of pipe endpoints (connected to each other) and passes them to the given block.</p></div> </li> <li class="entry-summary"> <a href="#select%28read_ios%2Cwrite_ios%2Cerror_ios%2Ctimeout_sec%3ALibC%3A%3ATimeT%7CInt%7CFloat%3F%29-class-method" class="signature"><strong>.select</strong>(read_ios, write_ios, error_ios, timeout_sec : LibC::TimeT | Int | Float?)</a> <div class="summary"><p>Returns an array of all given IOs that are * ready to read if they appeared in <em>read_ios</em> * ready to write if they appeared in <em>write_ios</em> * have an error condition if they appeared in <em>error_ios</em></p></div> </li> <li class="entry-summary"> <a href="#select%28read_ios%2Cwrite_ios%3Dnil%2Cerror_ios%3Dnil%29-class-method" class="signature"><strong>.select</strong>(read_ios, write_ios = nil, error_ios = nil)</a> </li> </ul> <h2>Instance Method Summary</h2> <ul class="list-summary"> <li class="entry-summary"> <a href="#%3C%3C%28obj%29%3Aself-instance-method" class="signature"><strong>#&lt;&lt;</strong>(obj) : self</a> <div class="summary"><p>Writes the given object into this <code><a href="../io/">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#close-instance-method" class="signature"><strong>#close</strong></a> <div class="summary"><p>Closes this <code><a href="../io/">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#closed%3F-instance-method" class="signature"><strong>#closed?</strong></a> <div class="summary"><p>Returns <code>true</code> if this <code><a href="../io/">IO</a></code> is closed.</p></div> </li> <li class="entry-summary"> <a href="#each_byte-instance-method" class="signature"><strong>#each_byte</strong></a> <div class="summary"><p>Returns an <code><a href="../iterator/">Iterator</a></code> for the bytes in this <code><a href="../io/">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#each_byte%28%26block%29%3ANil-instance-method" class="signature"><strong>#each_byte</strong>(&amp;block) : Nil</a> <div class="summary"><p>Inovkes the given block with each byte (<code><a href="../uint8/">UInt8</a></code>) in this <code><a href="../io/">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#each_char%28%26block%29%3ANil-instance-method" class="signature"><strong>#each_char</strong>(&amp;block) : Nil</a> <div class="summary"><p>Inovkes the given block with each <code><a href="../char/">Char</a></code> in this <code><a href="../io/">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#each_char-instance-method" class="signature"><strong>#each_char</strong></a> <div class="summary"><p>Returns an <code><a href="../iterator/">Iterator</a></code> for the chars in this <code><a href="../io/">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#each_line%28%2Aargs%2C%2A%2Aoptions%2C%26block%29%3ANil-instance-method" class="signature"><strong>#each_line</strong>(*args, **options, &amp;block) : Nil</a> <div class="summary"><p>Invokes the given block with each <em>line</em> in this <code><a href="../io/">IO</a></code>, where a line is defined by the arguments passed to this method, which can be the same ones as in the <code><a href="../io/#gets%28limit%3AInt%2Cchomp%3Dfalse%29%3AString%3F-instance-method">#gets</a></code> methods.</p></div> </li> <li class="entry-summary"> <a href="#each_line%28%2Aargs%2C%2A%2Aoptions%29-instance-method" class="signature"><strong>#each_line</strong>(*args, **options)</a> <div class="summary"><p>Returns an <code><a href="../iterator/">Iterator</a></code> for the <em>lines</em> in this <code><a href="../io/">IO</a></code>, where a line is defined by the arguments passed to this method, which can be the same ones as in the <code><a href="../io/#gets%28limit%3AInt%2Cchomp%3Dfalse%29%3AString%3F-instance-method">#gets</a></code> methods.</p></div> </li> <li class="entry-summary"> <a href="#encoding%3AString-instance-method" class="signature"><strong>#encoding</strong> : String</a> <div class="summary"><p>Returns this <code><a href="../io/">IO</a></code>'s encoding.</p></div> </li> <li class="entry-summary"> <a href="#flush-instance-method" class="signature"><strong>#flush</strong></a> <div class="summary"><p>Flushes buffered data, if any.</p></div> </li> <li class="entry-summary"> <a href="#gets%28limit%3AInt%2Cchomp%3Dfalse%29%3AString%3F-instance-method" class="signature"><strong>#gets</strong>(limit : Int, chomp = false) : String?</a> <div class="summary"><p>Reads a line of at most <em>limit</em> bytes from this <code><a href="../io/">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#gets%28delimiter%3AChar%2Cchomp%3Dfalse%29%3AString%3F-instance-method" class="signature"><strong>#gets</strong>(delimiter : Char, chomp = false) : String?</a> <div class="summary"><p>Reads until <em>delimiter</em> is found, or the end of the <code><a href="../io/">IO</a></code> is reached.</p></div> </li> <li class="entry-summary"> <a href="#gets%28delimiter%3AString%2Cchomp%3Dfalse%29%3AString%3F-instance-method" class="signature"><strong>#gets</strong>(delimiter : String, chomp = false) : String?</a> <div class="summary"><p>Reads until <em>delimiter</em> is found or the end of the <code><a href="../io/">IO</a></code> is reached.</p></div> </li> <li class="entry-summary"> <a href="#gets%28chomp%3Dtrue%29%3AString%3F-instance-method" class="signature"><strong>#gets</strong>(chomp = true) : String?</a> <div class="summary"><p>Reads a line from this <code><a href="../io/">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#gets%28delimiter%3AChar%2Climit%3AInt%2Cchomp%3Dfalse%29%3AString%3F-instance-method" class="signature"><strong>#gets</strong>(delimiter : Char, limit : Int, chomp = false) : String?</a> <div class="summary"><p>Reads until <em>delimiter</em> is found, <em>limit</em> bytes are read, or the end of the <code><a href="../io/">IO</a></code> is reached.</p></div> </li> <li class="entry-summary"> <a href="#gets_to_end%3AString-instance-method" class="signature"><strong>#gets_to_end</strong> : String</a> <div class="summary"><p>Reads the rest of this <code><a href="../io/">IO</a></code> data as a <code><a href="../string/">String</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#peek%3ABytes%3F-instance-method" class="signature"><strong>#peek</strong> : Bytes?</a> <div class="summary"><p>Peeks into this IO, if possible.</p></div> </li> <li class="entry-summary"> <a href="#print%28%2Aobjects%3A_%29%3ANil-instance-method" class="signature"><strong>#print</strong>(*objects : _) : Nil</a> <div class="summary"><p>Writes the given objects into this <code><a href="../io/">IO</a></code> by invoking <code>to_s(io)</code> on each of the objects.</p></div> </li> <li class="entry-summary"> <a href="#print%28obj%29%3ANil-instance-method" class="signature"><strong>#print</strong>(obj) : Nil</a> <div class="summary"><p>Same as <code><a href="../io/#%3C%3C%28obj%29%3Aself-instance-method">#&lt;&lt;</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#printf%28format_string%2Cargs%3AArray%7CTuple%29%3ANil-instance-method" class="signature"><strong>#printf</strong>(format_string, args : Array | Tuple) : Nil</a> </li> <li class="entry-summary"> <a href="#printf%28format_string%2C%2Aargs%29%3ANil-instance-method" class="signature"><strong>#printf</strong>(format_string, *args) : Nil</a> </li> <li class="entry-summary"> <a href="#puts%28%2Aobjects%3A_%29%3ANil-instance-method" class="signature"><strong>#puts</strong>(*objects : _) : Nil</a> <div class="summary"><p>Writes the given objects, each followed by a newline character.</p></div> </li> <li class="entry-summary"> <a href="#puts%3ANil-instance-method" class="signature"><strong>#puts</strong> : Nil</a> <div class="summary"><p>Writes a newline character.</p></div> </li> <li class="entry-summary"> <a href="#puts%28obj%29%3ANil-instance-method" class="signature"><strong>#puts</strong>(obj) : Nil</a> <div class="summary"><p>Writes the given object to this <code><a href="../io/">IO</a></code> followed by a newline character.</p></div> </li> <li class="entry-summary"> <a href="#puts%28string%3AString%29%3ANil-instance-method" class="signature"><strong>#puts</strong>(string : String) : Nil</a> <div class="summary"><p>Writes the given string to this <code><a href="../io/">IO</a></code> followed by a newline character unless the string already ends with one.</p></div> </li> <li class="entry-summary"> <a href="#read%28slice%3ABytes%29-instance-method" class="signature"><strong>#read</strong>(slice : Bytes)</a> <div class="summary"><p>Reads at most <em>slice.size</em> bytes from this <code><a href="../io/">IO</a></code> into <em>slice</em>.</p></div> </li> <li class="entry-summary"> <a href="#read_byte%3AUInt8%3F-instance-method" class="signature"><strong>#read_byte</strong> : UInt8?</a> <div class="summary"><p>Reads a single byte from this <code><a href="../io/">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#read_bytes%28type%2Cformat%3AIO%3A%3AByteFormat%3DIO%3A%3AByteFormat%3A%3ASystemEndian%29-instance-method" class="signature"><strong>#read_bytes</strong>(type, format : IO::ByteFormat = IO::ByteFormat::SystemEndian)</a> <div class="summary"><p>Reads an instance of the given <em>type</em> from this <code><a href="../io/">IO</a></code> using the specified <em>format</em>.</p></div> </li> <li class="entry-summary"> <a href="#read_char%3AChar%3F-instance-method" class="signature"><strong>#read_char</strong> : Char?</a> <div class="summary"><p>Reads a single <code><a href="../char/">Char</a></code> from this <code><a href="../io/">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#read_fully%28slice%3ABytes%29-instance-method" class="signature"><strong>#read_fully</strong>(slice : Bytes)</a> <div class="summary"><p>Tries to read exactly <code>slice.size</code> bytes from this <code><a href="../io/">IO</a></code> into <em>slice</em>.</p></div> </li> <li class="entry-summary"> <a href="#read_fully%3F%28slice%3ABytes%29-instance-method" class="signature"><strong>#read_fully?</strong>(slice : Bytes)</a> <div class="summary"><p>Tries to read exactly <code>slice.size</code> bytes from this <code><a href="../io/">IO</a></code> into <em>slice</em>.</p></div> </li> <li class="entry-summary"> <a href="#read_line%28%2Aargs%2C%2A%2Aoptions%29%3AString%3F-instance-method" class="signature"><strong>#read_line</strong>(*args, **options) : String?</a> <div class="summary"><p>Same as <code><a href="../io/#gets%28limit%3AInt%2Cchomp%3Dfalse%29%3AString%3F-instance-method">#gets</a></code>, but raises <code><a href="../io/eoferror/">EOFError</a></code> if called at the end of this <code><a href="../io/">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#read_string%28bytesize%3AInt%29%3AString-instance-method" class="signature"><strong>#read_string</strong>(bytesize : Int) : String</a> <div class="summary"><p>Reads an UTF-8 encoded string of exactly <em>bytesize</em> bytes.</p></div> </li> <li class="entry-summary"> <a href="#read_utf8%28slice%3ABytes%29-instance-method" class="signature"><strong>#read_utf8</strong>(slice : Bytes)</a> <div class="summary"><p>Reads UTF-8 decoded bytes into the given <em>slice</em>.</p></div> </li> <li class="entry-summary"> <a href="#read_utf8_byte-instance-method" class="signature"><strong>#read_utf8_byte</strong></a> <div class="summary"><p>Reads a single decoded UTF-8 byte from this <code><a href="../io/">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#rewind-instance-method" class="signature"><strong>#rewind</strong></a> <div class="summary"><p>Rewinds this <code><a href="../io/">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#set_encoding%28encoding%3AString%2Cinvalid%3ASymbol%3F%3Dnil%29-instance-method" class="signature"><strong>#set_encoding</strong>(encoding : String, invalid : Symbol? = nil)</a> <div class="summary"><p>Sets the encoding of this <code><a href="../io/">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#skip%28bytes_count%3AInt%29%3ANil-instance-method" class="signature"><strong>#skip</strong>(bytes_count : Int) : Nil</a> <div class="summary"><p>Reads and discards exactly <em>bytes_count</em> bytes.</p></div> </li> <li class="entry-summary"> <a href="#skip_to_end%3ANil-instance-method" class="signature"><strong>#skip_to_end</strong> : Nil</a> <div class="summary"><p>Reads and discards bytes from <code>self</code> until there are no more bytes.</p></div> </li> <li class="entry-summary"> <a href="#tty%3F%3ABool-instance-method" class="signature"><strong>#tty?</strong> : Bool</a> <div class="summary"><p>Returns <code>true</code> if this <code><a href="../io/">IO</a></code> is associated with a terminal device (tty), <code>false</code> otherwise.</p></div> </li> <li class="entry-summary"> <a href="#write%28slice%3ABytes%29%3ANil-instance-method" class="signature"><strong>#write</strong>(slice : Bytes) : Nil</a> <div class="summary"><p>Writes the contents of <em>slice</em> into this <code><a href="../io/">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#write_byte%28byte%3AUInt8%29-instance-method" class="signature"><strong>#write_byte</strong>(byte : UInt8)</a> <div class="summary"><p>Writes a single byte into this <code><a href="../io/">IO</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#write_bytes%28object%2Cformat%3AIO%3A%3AByteFormat%3DIO%3A%3AByteFormat%3A%3ASystemEndian%29-instance-method" class="signature"><strong>#write_bytes</strong>(object, format : IO::ByteFormat = IO::ByteFormat::SystemEndian)</a> <div class="summary"><p>Writes the given object to this <code><a href="../io/">IO</a></code> using the specified <em>format</em>.</p></div> </li> <li class="entry-summary"> <a href="#write_utf8%28slice%3ABytes%29-instance-method" class="signature"><strong>#write_utf8</strong>(slice : Bytes)</a> <div class="summary"><p>Writes a slice of UTF-8 encoded bytes to this <code><a href="../io/">IO</a></code>, using the current encoding.</p></div> </li> </ul>  <h2>Class Method Detail</h2> <div class="entry-detail" id="copy(src,dst,limit:Int)-class-method"> <h3 class="signature">def self.<strong>copy</strong>(src, dst, limit : <a href="../int/">Int</a>)<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L1137" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Copy at most <em>limit</em> bytes from <em>src</em> to <em>dst</em>.</p> <pre data-language="crystal">io = IO::Memory.new "hello"
io2 = IO::Memory.new

IO.copy io, io2, 3

io2.to_s # =&gt; "hel"</pre>
</div>   </div> <div class="entry-detail" id="copy(src,dst)-class-method"> <h3 class="signature">def self.<strong>copy</strong>(src, dst)<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L1117" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Copy all contents from <em>src</em> to <em>dst</em>.</p> <pre data-language="crystal">io = IO::Memory.new "hello"
io2 = IO::Memory.new

IO.copy io, io2

io2.to_s # =&gt; "hello"</pre>
</div>   </div> <div class="entry-detail" id="pipe(read_blocking=false,write_blocking=false)-class-method"> <h3 class="signature">def self.<strong>pipe</strong>(read_blocking = false, write_blocking = false)<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L217" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Creates a pair of pipe endpoints (connected to each other) and returns them as a two-element <code><a href="../tuple/">Tuple</a></code>.</p> <pre data-language="crystal">reader, writer = IO.pipe
writer.puts "hello"
writer.puts "world"
reader.gets # =&gt; "hello"
reader.gets # =&gt; "world"</pre>
</div>   </div> <div class="entry-detail" id="pipe(read_blocking=false,write_blocking=false,&amp;block)-class-method"> <h3 class="signature">def self.<strong>pipe</strong>(read_blocking = false, write_blocking = false, &amp;block)<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L243" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Creates a pair of pipe endpoints (connected to each other) and passes them to the given block. Both endpoints are closed after the block.</p> <pre data-language="crystal">IO.pipe do |reader, writer|
  writer.puts "hello"
  writer.puts "world"
  reader.gets # =&gt; "hello"
  reader.gets # =&gt; "world"
end</pre>
</div>   </div> <div class="entry-detail" id="select(read_ios,write_ios,error_ios,timeout_sec:LibC::TimeT|Int|Float?)-class-method"> <h3 class="signature">def self.<strong>select</strong>(read_ios, write_ios, error_ios, timeout_sec : <a href="../libc/timet/">LibC::TimeT</a> | <a href="../int/">Int</a> | <a href="../float/">Float</a>?)<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L102" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Returns an array of all given IOs that are</p> <ul>
<li>ready to read if they appeared in <em>read_ios</em>
</li>
<li>ready to write if they appeared in <em>write_ios</em>
</li>
<li>have an error condition if they appeared in <em>error_ios</em>
</li>
</ul> <p>If the optional <em>timeout_sec</em> is given, <code>nil</code> is returned if no <code><a href="../io/">IO</a></code> was ready after the specified amount of seconds passed. Fractions are supported.</p> <p>If timeout_sec is <code>nil</code>, this method blocks until an <code><a href="../io/">IO</a></code> is ready.</p>
</div>   </div> <div class="entry-detail" id="select(read_ios,write_ios=nil,error_ios=nil)-class-method"> <h3 class="signature">def self.<strong>select</strong>(read_ios, write_ios = nil, error_ios = nil)<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L88" target="_blank" class="view-source">Source</a>
</h3>   </div> <h2>Instance Method Detail</h2> <div class="entry-detail" id="&lt;&lt;(obj):self-instance-method"> <h3 class="signature">def <strong>&lt;&lt;</strong>(obj) : self<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L264" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Writes the given object into this <code><a href="../io/">IO</a></code>. This ends up calling <code>to_s(io)</code> on the object.</p> <pre data-language="crystal">io = IO::Memory.new
io &lt;&lt; 1
io &lt;&lt; '-'
io &lt;&lt; "Crystal"
io.to_s # =&gt; "1-Crystal"</pre>
</div>   </div> <div class="entry-detail" id="close-instance-method"> <h3 class="signature">def <strong>close</strong><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L187" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Closes this <code><a href="../io/">IO</a></code>.</p> <p><code><a href="../io/">IO</a></code> defines this is a no-op method, but including types may override.</p>
</div>   </div> <div class="entry-detail" id="closed?-instance-method"> <h3 class="signature">def <strong>closed?</strong><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L193" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Returns <code>true</code> if this <code><a href="../io/">IO</a></code> is closed.</p> <p><code><a href="../io/">IO</a></code> defines returns <code>false</code>, but including types may override.</p>
</div>   </div> <div class="entry-detail" id="each_byte-instance-method"> <h3 class="signature">def <strong>each_byte</strong><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L1071" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Returns an <code><a href="../iterator/">Iterator</a></code> for the bytes in this <code><a href="../io/">IO</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new("aあ")
iter = io.each_byte
iter.next # =&gt; 97
iter.next # =&gt; 227
iter.next # =&gt; 129
iter.next # =&gt; 130</pre>
</div>   </div> <div class="entry-detail" id="each_byte(&amp;block):Nil-instance-method"> <h3 class="signature">def <strong>each_byte</strong>(&amp;block) : <a href="../nil/">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L1055" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Inovkes the given block with each byte (<code><a href="../uint8/">UInt8</a></code>) in this <code><a href="../io/">IO</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new("aあ")
io.each_byte do |byte|
  puts byte
end</pre> <p>Output:</p> <pre data-language="crystal">97
227
129
130</pre>
</div>   </div> <div class="entry-detail" id="each_char(&amp;block):Nil-instance-method"> <h3 class="signature">def <strong>each_char</strong>(&amp;block) : <a href="../nil/">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L1020" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Inovkes the given block with each <code><a href="../char/">Char</a></code> in this <code><a href="../io/">IO</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new("あめ")
io.each_char do |char|
  puts char
end</pre> <p>Output:</p> <pre data-language="crystal">あ
め</pre>
</div>   </div> <div class="entry-detail" id="each_char-instance-method"> <h3 class="signature">def <strong>each_char</strong><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L1034" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Returns an <code><a href="../iterator/">Iterator</a></code> for the chars in this <code><a href="../io/">IO</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new("あめ")
iter = io.each_char
iter.next # =&gt; 'あ'
iter.next # =&gt; 'め'</pre>
</div>   </div> <div class="entry-detail" id="each_line(*args,**options,&amp;block):Nil-instance-method"> <h3 class="signature">def <strong>each_line</strong>(*args, **options, &amp;block) : <a href="../nil/">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L985" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Invokes the given block with each <em>line</em> in this <code><a href="../io/">IO</a></code>, where a line is defined by the arguments passed to this method, which can be the same ones as in the <code><a href="../io/#gets%28limit%3AInt%2Cchomp%3Dfalse%29%3AString%3F-instance-method">#gets</a></code> methods.</p> <pre data-language="crystal">io = IO::Memory.new("hello\nworld")
io.each_line do |line|
  puts line.chomp.reverse
end</pre> <p>Output:</p> <pre data-language="crystal">olleh
dlrow</pre>
</div>   </div> <div class="entry-detail" id="each_line(*args,**options)-instance-method"> <h3 class="signature">def <strong>each_line</strong>(*args, **options)<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L1001" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Returns an <code><a href="../iterator/">Iterator</a></code> for the <em>lines</em> in this <code><a href="../io/">IO</a></code>, where a line is defined by the arguments passed to this method, which can be the same ones as in the <code><a href="../io/#gets%28limit%3AInt%2Cchomp%3Dfalse%29%3AString%3F-instance-method">#gets</a></code> methods.</p> <pre data-language="crystal">io = IO::Memory.new("hello\nworld")
iter = io.each_line
iter.next # =&gt; "hello"
iter.next # =&gt; "world"</pre>
</div>   </div> <div class="entry-detail" id="encoding:String-instance-method"> <h3 class="signature">def <strong>encoding</strong> : <a href="../string/">String</a><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L1103" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"><p>Returns this <code><a href="../io/">IO</a></code>'s encoding. The default is <code>UTF-8</code>.</p></div>   </div> <div class="entry-detail" id="flush-instance-method"> <h3 class="signature">def <strong>flush</strong><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L204" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Flushes buffered data, if any.</p> <p><code><a href="../io/">IO</a></code> defines this is a no-op method, but including types may override.</p>
</div>   </div> <div class="entry-detail" id="gets(limit:Int,chomp=false):String?-instance-method"> <h3 class="signature">def <strong>gets</strong>(limit : <a href="../int/">Int</a>, chomp = false) : <a href="../string/">String</a>?<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L658" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Reads a line of at most <em>limit</em> bytes from this <code><a href="../io/">IO</a></code>. A line is terminated by the <code>\n</code> character. Returns <code>nil</code> if called at the end of this <code><a href="../io/">IO</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new "hello\nworld"
io.gets(3) # =&gt; "hel"
io.gets(3) # =&gt; "lo\n"
io.gets(3) # =&gt; "wor"
io.gets(3) # =&gt; "ld"
io.gets(3) # =&gt; nil</pre>
</div>   </div> <div class="entry-detail" id="gets(delimiter:Char,chomp=false):String?-instance-method"> <h3 class="signature">def <strong>gets</strong>(delimiter : <a href="../char/">Char</a>, chomp = false) : <a href="../string/">String</a>?<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L672" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Reads until <em>delimiter</em> is found, or the end of the <code><a href="../io/">IO</a></code> is reached. Returns <code>nil</code> if called at the end of this <code><a href="../io/">IO</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new "hello\nworld"
io.gets('o') # =&gt; "hello"
io.gets('r') # =&gt; "\nwor"
io.gets('z') # =&gt; "ld"
io.gets('w') # =&gt; nil</pre>
</div>   </div> <div class="entry-detail" id="gets(delimiter:String,chomp=false):String?-instance-method"> <h3 class="signature">def <strong>gets</strong>(delimiter : <a href="../string/">String</a>, chomp = false) : <a href="../string/">String</a>?<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L837" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Reads until <em>delimiter</em> is found or the end of the <code><a href="../io/">IO</a></code> is reached. Returns <code>nil</code> if called at the end of this <code><a href="../io/">IO</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new "hello\nworld"
io.gets("wo") # =&gt; "hello\nwo"
io.gets("wo") # =&gt; "rld"
io.gets("wo") # =&gt; nil</pre>
</div>   </div> <div class="entry-detail" id="gets(chomp=true):String?-instance-method"> <h3 class="signature">def <strong>gets</strong>(chomp = true) : <a href="../string/">String</a>?<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L642" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Reads a line from this <code><a href="../io/">IO</a></code>. A line is terminated by the <code>\n</code> character. Returns <code>nil</code> if called at the end of this <code><a href="../io/">IO</a></code>.</p> <p>By default the newline is removed from the returned string, unless <em>chomp</em> is <code>false</code>.</p> <pre data-language="crystal">io = IO::Memory.new "hello\nworld\nfoo\n"
io.gets               # =&gt; "hello"
io.gets(chomp: false) # =&gt; "world\n"
io.gets               # =&gt; "foo"
io.gets               # =&gt; nil</pre>
</div>   </div> <div class="entry-detail" id="gets(delimiter:Char,limit:Int,chomp=false):String?-instance-method"> <h3 class="signature">def <strong>gets</strong>(delimiter : <a href="../char/">Char</a>, limit : <a href="../int/">Int</a>, chomp = false) : <a href="../string/">String</a>?<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L686" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Reads until <em>delimiter</em> is found, <em>limit</em> bytes are read, or the end of the <code><a href="../io/">IO</a></code> is reached. Returns <code>nil</code> if called at the end of this <code><a href="../io/">IO</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new "hello\nworld"
io.gets('o', 3)  # =&gt; "hel"
io.gets('r', 10) # =&gt; "lo\nwor"
io.gets('z', 10) # =&gt; "ld"
io.gets('w', 10) # =&gt; nil</pre>
</div>   </div> <div class="entry-detail" id="gets_to_end:String-instance-method"> <h3 class="signature">def <strong>gets_to_end</strong> : <a href="../string/">String</a><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L611" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Reads the rest of this <code><a href="../io/">IO</a></code> data as a <code><a href="../string/">String</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new "hello world"
io.gets_to_end # =&gt; "hello world"</pre>
</div>   </div> <div class="entry-detail" id="peek:Bytes?-instance-method"> <h3 class="signature">def <strong>peek</strong> : <a href="../bytes/">Bytes</a>?<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L540" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Peeks into this IO, if possible.</p> <p>If this IO can peek into some data, it returns a slice with that data. Returns <code>nil</code> if this IO isn't peekable, or if there's no data to peek.</p> <p>The returned bytes are only valid data until a next call to any method that reads from this IO is invoked.</p> <p>By default this method returns <code>nil</code>, but IO implementations that provide buffering or wrap other IOs should override this method.</p>
</div>   </div> <div class="entry-detail" id="print(*objects:_):Nil-instance-method"> <h3 class="signature">def <strong>print</strong>(*objects : _) : <a href="../nil/">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L291" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Writes the given objects into this <code><a href="../io/">IO</a></code> by invoking <code>to_s(io)</code> on each of the objects.</p> <pre data-language="crystal">io = IO::Memory.new
io.print 1, '-', "Crystal"
io.to_s # =&gt; "1-Crystal"</pre>
</div>   </div> <div class="entry-detail" id="print(obj):Nil-instance-method"> <h3 class="signature">def <strong>print</strong>(obj) : <a href="../nil/">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L278" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Same as <code><a href="../io/#%3C%3C%28obj%29%3Aself-instance-method">#&lt;&lt;</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new
io.print 1
io.print '-'
io.print "Crystal"
io.to_s # =&gt; "1-Crystal"</pre>
</div>   </div> <div class="entry-detail" id="printf(format_string,args:Array|Tuple):Nil-instance-method"> <h3 class="signature">def <strong>printf</strong>(format_string, args : <a href="../array/">Array</a> | <a href="../tuple/">Tuple</a>) : <a href="../nil/">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L357" target="_blank" class="view-source">Source</a>
</h3>   </div> <div class="entry-detail" id="printf(format_string,*args):Nil-instance-method"> <h3 class="signature">def <strong>printf</strong>(format_string, *args) : <a href="../nil/">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L352" target="_blank" class="view-source">Source</a>
</h3>   </div> <div class="entry-detail" id="puts(*objects:_):Nil-instance-method"> <h3 class="signature">def <strong>puts</strong>(*objects : _) : <a href="../nil/">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L345" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Writes the given objects, each followed by a newline character.</p> <pre data-language="crystal">io = IO::Memory.new
io.puts 1, '-', "Crystal"
io.to_s # =&gt; "1\n-\nCrystal\n"</pre>
</div>   </div> <div class="entry-detail" id="puts:Nil-instance-method"> <h3 class="signature">def <strong>puts</strong> : <a href="../nil/">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L333" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Writes a newline character.</p> <pre data-language="crystal">io = IO::Memory.new
io.puts
io.to_s # =&gt; "\n"</pre>
</div>   </div> <div class="entry-detail" id="puts(obj):Nil-instance-method"> <h3 class="signature">def <strong>puts</strong>(obj) : <a href="../nil/">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L321" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Writes the given object to this <code><a href="../io/">IO</a></code> followed by a newline character.</p> <pre data-language="crystal">io = IO::Memory.new
io.puts 1
io.puts "Crystal"
io.to_s # =&gt; "1\nCrystal\n"</pre>
</div>   </div> <div class="entry-detail" id="puts(string:String):Nil-instance-method"> <h3 class="signature">def <strong>puts</strong>(string : <a href="../string/">String</a>) : <a href="../nil/">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L307" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Writes the given string to this <code><a href="../io/">IO</a></code> followed by a newline character unless the string already ends with one.</p> <pre data-language="crystal">io = IO::Memory.new
io.puts "hello\n"
io.puts "world"
io.to_s # =&gt; "hello\nworld\n"</pre>
</div>   </div> <div class="entry-detail" id="read(slice:Bytes)-instance-method"> <h3 class="signature">abstract def <strong>read</strong>(slice : <a href="../bytes/">Bytes</a>)<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L172" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Reads at most <em>slice.size</em> bytes from this <code><a href="../io/">IO</a></code> into <em>slice</em>. Returns the number of bytes read.</p> <pre data-language="crystal">io = IO::Memory.new "hello"
slice = Bytes.new(4)
io.read(slice) # =&gt; 4
slice          # =&gt; Bytes[104, 101, 108, 108]
io.read(slice) # =&gt; 1
slice          # =&gt; Bytes[111, 101, 108, 108]</pre>
</div>   </div> <div class="entry-detail" id="read_byte:UInt8?-instance-method"> <h3 class="signature">def <strong>read_byte</strong> : <a href="../uint8/">UInt8</a>?<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L370" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Reads a single byte from this <code><a href="../io/">IO</a></code>. Returns <code>nil</code> if there is no more data to read.</p> <pre data-language="crystal">io = IO::Memory.new "a"
io.read_byte # =&gt; 97
io.read_byte # =&gt; nil</pre>
</div>   </div> <div class="entry-detail" id="read_bytes(type,format:IO::ByteFormat=IO::ByteFormat::SystemEndian)-instance-method"> <h3 class="signature">def <strong>read_bytes</strong>(type, format : <a href="../io/byteformat/">IO::ByteFormat</a> = IO::ByteFormat::SystemEndian)<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L952" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Reads an instance of the given <em>type</em> from this <code><a href="../io/">IO</a></code> using the specified <em>format</em>.</p> <p>This ends up invoking <code>type.from_io(self, format)</code>, so any type defining a <code>from_io(io : <a href="../io/">IO</a>, format : <a href="../io/byteformat/">IO::ByteFormat</a> = <a href="../io/byteformat/">IO::ByteFormat</a>::SystemEndian)</code> method can be read in this way.</p> <p>See <code><a href="../int/#from_io%28io%3AIO%2Cformat%3AIO%3A%3AByteFormat%29-class-method">Int#from_io</a></code> and <code><a href="../float/#from_io%28io%3AIO%2Cformat%3AIO%3A%3AByteFormat%29-class-method">Float#from_io</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new
io.puts "\u{4}\u{3}\u{2}\u{1}"
io.rewind
io.read_bytes(Int32, IO::ByteFormat::LittleEndian) # =&gt; 0x01020304</pre>
</div>   </div> <div class="entry-detail" id="read_char:Char?-instance-method"> <h3 class="signature">def <strong>read_char</strong> : <a href="../char/">Char</a>?<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L387" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Reads a single <code><a href="../char/">Char</a></code> from this <code><a href="../io/">IO</a></code>. Returns <code>nil</code> if there is no more data to read.</p> <pre data-language="crystal">io = IO::Memory.new "あ"
io.read_char # =&gt; 'あ'
io.read_char # =&gt; nil</pre>
</div>   </div> <div class="entry-detail" id="read_fully(slice:Bytes)-instance-method"> <h3 class="signature">def <strong>read_fully</strong>(slice : <a href="../bytes/">Bytes</a>)<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L580" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Tries to read exactly <code>slice.size</code> bytes from this <code><a href="../io/">IO</a></code> into <em>slice</em>. Raises <code><a href="../io/eoferror/">EOFError</a></code> if there aren't <code>slice.size</code> bytes of data.</p> <pre data-language="crystal">io = IO::Memory.new "123451234"
slice = Bytes.new(5)
io.read_fully(slice) # =&gt; 5
slice                # =&gt; Bytes[49, 50, 51, 52, 53]
io.read_fully(slice) # raises IO::EOFError</pre>
</div>   </div> <div class="entry-detail" id="read_fully?(slice:Bytes)-instance-method"> <h3 class="signature">def <strong>read_fully?</strong>(slice : <a href="../bytes/">Bytes</a>)<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L595" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Tries to read exactly <code>slice.size</code> bytes from this <code><a href="../io/">IO</a></code> into <em>slice</em>. Returns <code>nil</code> if there aren't <code>slice.size</code> bytes of data, otherwise returns the number of bytes read.</p> <pre data-language="crystal">io = IO::Memory.new "123451234"
slice = Bytes.new(5)
io.read_fully?(slice) # =&gt; 5
slice                 # =&gt; Bytes[49, 50, 51, 52, 53]
io.read_fully?(slice) # =&gt; nil</pre>
</div>   </div> <div class="entry-detail" id="read_line(*args,**options):String?-instance-method"> <h3 class="signature">def <strong>read_line</strong>(*args, **options) : <a href="../string/">String</a>?<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L877" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"><p>Same as <code><a href="../io/#gets%28limit%3AInt%2Cchomp%3Dfalse%29%3AString%3F-instance-method">#gets</a></code>, but raises <code><a href="../io/eoferror/">EOFError</a></code> if called at the end of this <code><a href="../io/">IO</a></code>.</p></div>   </div> <div class="entry-detail" id="read_string(bytesize:Int):String-instance-method"> <h3 class="signature">def <strong>read_string</strong>(bytesize : <a href="../int/">Int</a>) : <a href="../string/">String</a><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L514" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Reads an UTF-8 encoded string of exactly <em>bytesize</em> bytes. Raises <code><a href="../io/eoferror/">EOFError</a></code> if there are not enough bytes to build the string.</p> <pre data-language="crystal">io = IO::Memory.new("hello world")
io.read_string(5) # =&gt; "hello"
io.read_string(1) # =&gt; " "
io.read_string(6) # raises IO::EOFError</pre>
</div>   </div> <div class="entry-detail" id="read_utf8(slice:Bytes)-instance-method"> <h3 class="signature">def <strong>read_utf8</strong>(slice : <a href="../bytes/">Bytes</a>)<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L496" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Reads UTF-8 decoded bytes into the given <em>slice</em>. Returns the number of UTF-8 bytes read.</p> <p>If no encoding is set, this is the same as <code><a href="../io/#read%28slice%3ABytes%29-instance-method">#read(slice)</a></code>.</p> <pre data-language="crystal">bytes = "你".encode("GB2312") # =&gt; Bytes[196, 227]

io = IO::Memory.new(bytes)
io.set_encoding("GB2312")

buffer = uninitialized UInt8[1024]
bytes_read = io.read_utf8(buffer.to_slice) # =&gt; 3
buffer.to_slice[0, bytes_read]             # =&gt; Bytes[228, 189, 160]

"你".bytes # =&gt; [228, 189, 160]</pre>
</div>   </div> <div class="entry-detail" id="read_utf8_byte-instance-method"> <h3 class="signature">def <strong>read_utf8_byte</strong><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L471" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Reads a single decoded UTF-8 byte from this <code><a href="../io/">IO</a></code>. Returns <code>nil</code> if there is no more data to read.</p> <p>If no encoding is set, this is the same as <code><a href="../io/#read_byte%3AUInt8%3F-instance-method">#read_byte</a></code>.</p> <pre data-language="crystal">bytes = "你".encode("GB2312") # =&gt; Bytes[196, 227]

io = IO::Memory.new(bytes)
io.set_encoding("GB2312")
io.read_utf8_byte # =&gt; 228
io.read_utf8_byte # =&gt; 189
io.read_utf8_byte # =&gt; 160
io.read_utf8_byte # =&gt; nil

"你".bytes # =&gt; [228, 189, 160]</pre>
</div>   </div> <div class="entry-detail" id="rewind-instance-method"> <h3 class="signature">def <strong>rewind</strong><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L1077" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"><p>Rewinds this <code><a href="../io/">IO</a></code>. By default this method raises, but including types may implement it.</p></div>   </div> <div class="entry-detail" id="set_encoding(encoding:String,invalid:Symbol?=nil)-instance-method"> <h3 class="signature">def <strong>set_encoding</strong>(encoding : <a href="../string/">String</a>, invalid : <a href="../symbol/">Symbol</a>? = nil)<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L1089" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Sets the encoding of this <code><a href="../io/">IO</a></code>.</p> <p>The <em>invalid</em> argument can be:</p> <ul>
<li>
<code>nil</code>: an exception is raised on invalid byte sequences</li>
<li>
<code>:skip</code>: invalid byte sequences are ignored</li>
</ul> <p>String operations (<code><a href="../io/#gets%28limit%3AInt%2Cchomp%3Dfalse%29%3AString%3F-instance-method">#gets</a></code>, <code><a href="../io/#gets_to_end%3AString-instance-method">#gets_to_end</a></code>, <code><a href="../io/#read_char%3AChar%3F-instance-method">#read_char</a></code>, <code><a href="../io/#%3C%3C%28obj%29%3Aself-instance-method">#&lt;&lt;</a></code>, <code><a href="../io/#print%28%2Aobjects%3A_%29%3ANil-instance-method">#print</a></code>, <code><a href="../io/#puts%3ANil-instance-method">#puts</a></code> <code><a href="../io/#printf%28format_string%2Cargs%3AArray%7CTuple%29%3ANil-instance-method">#printf</a></code>) will use this encoding.</p>
</div>   </div> <div class="entry-detail" id="skip(bytes_count:Int):Nil-instance-method"> <h3 class="signature">def <strong>skip</strong>(bytes_count : <a href="../int/">Int</a>) : <a href="../nil/">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L890" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Reads and discards exactly <em>bytes_count</em> bytes. Raises <code><a href="../io/eoferror/">IO::EOFError</a></code> if there aren't at least <em>bytes_count</em> bytes.</p> <pre data-language="crystal">io = IO::Memory.new "hello world"
io.skip(6)
io.gets    # =&gt; "world"
io.skip(1) # raises IO::EOFError</pre>
</div>   </div> <div class="entry-detail" id="skip_to_end:Nil-instance-method"> <h3 class="signature">def <strong>skip_to_end</strong> : <a href="../nil/">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L902" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"><p>Reads and discards bytes from <code>self</code> until there are no more bytes.</p></div>   </div> <div class="entry-detail" id="tty?:Bool-instance-method"> <h3 class="signature">def <strong>tty?</strong> : <a href="../bool/">Bool</a><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L964" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Returns <code>true</code> if this <code><a href="../io/">IO</a></code> is associated with a terminal device (tty), <code>false</code> otherwise.</p> <p>IO returns <code>false</code>, but including types may override.</p> <pre data-language="crystal">STDIN.tty?          # =&gt; true
IO::Memory.new.tty? # =&gt; false</pre>
</div>   </div> <div class="entry-detail" id="write(slice:Bytes):Nil-instance-method"> <h3 class="signature">abstract def <strong>write</strong>(slice : <a href="../bytes/">Bytes</a>) : <a href="../nil/">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L182" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Writes the contents of <em>slice</em> into this <code><a href="../io/">IO</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new
slice = Bytes.new(4) { |i| ('a'.ord + i).to_u8 }
io.write(slice)
io.to_s # =&gt; "abcd"</pre>
</div>   </div> <div class="entry-detail" id="write_byte(byte:UInt8)-instance-method"> <h3 class="signature">def <strong>write_byte</strong>(byte : <a href="../uint8/">UInt8</a>)<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L915" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Writes a single byte into this <code><a href="../io/">IO</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new
io.write_byte 97_u8
io.to_s # =&gt; "a"</pre>
</div>   </div> <div class="entry-detail" id="write_bytes(object,format:IO::ByteFormat=IO::ByteFormat::SystemEndian)-instance-method"> <h3 class="signature">def <strong>write_bytes</strong>(object, format : <a href="../io/byteformat/">IO::ByteFormat</a> = IO::ByteFormat::SystemEndian)<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L934" target="_blank" class="view-source">Source</a>
</h3> <div class="doc">
<p>Writes the given object to this <code><a href="../io/">IO</a></code> using the specified <em>format</em>.</p> <p>This ends up invoking <code>object.to_io(self, format)</code>, so any object defining a <code>to_io(io : <a href="../io/">IO</a>, format : <a href="../io/byteformat/">IO::ByteFormat</a> = <a href="../io/byteformat/">IO::ByteFormat</a>::SystemEndian)</code> method can be written in this way.</p> <p>See <code><a href="../int/#to_io%28io%3AIO%2Cformat%3AIO%3A%3AByteFormat%29-instance-method">Int#to_io</a></code> and <code><a href="../float/#to_io%28io%3AIO%2Cformat%3AIO%3A%3AByteFormat%29-instance-method">Float#to_io</a></code>.</p> <pre data-language="crystal">io = IO::Memory.new
io.write_bytes(0x01020304, IO::ByteFormat::LittleEndian)
io.rewind
io.gets(4) # =&gt; "\u{4}\u{3}\u{2}\u{1}"</pre>
</div>   </div> <div class="entry-detail" id="write_utf8(slice:Bytes)-instance-method"> <h3 class="signature">def <strong>write_utf8</strong>(slice : <a href="../bytes/">Bytes</a>)<a href="https://github.com/crystal-lang/crystal/blob/c2c2276ec667171af5c2347490f49acdbdc4a3ca/src/io.cr#L545" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"><p>Writes a slice of UTF-8 encoded bytes to this <code><a href="../io/">IO</a></code>, using the current encoding.</p></div>   </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2017 Manas Technology Solutions.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://crystal-lang.org/api/0.21.0/IO.html" class="_attribution-link" target="_blank">https://crystal-lang.org/api/0.21.0/IO.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
